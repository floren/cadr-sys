 8-Nov-84 03:38:18-EST,7714;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 8 Nov 84 03:38-EST
Date: Thursday, 8 November 1984, 03:38-EST
From: JCMA@MIT-OZ
Subject: >>Error: Mail error from XX: -Error on hostname lookup
To: BUG-zmail@MIT-OZ

In Symbolics 3600 System 242.356, Hardcopy 20.10,
Experimental RELATUS 131.73, FEP 22, on Lisp Machine Jim Morrison:

This error is really obnoxious.  Why can't the lispm be smart enough to figure
whether a random tops20 can handle multiple recipients in the to field (or
whatever the problem really is)?  Why can't we get this patch right away?
This is really a major pain.

>>Error: Mail error from XX: -Error on hostname lookup
While in the function (:DEFUN-METHOD MAILER:CHAOS-MAIL-USER-CHECK-REPLY)  (:METHOD MAILER:CHAOS-MAIL-USER :RECEIVE-MESSAGE)  (:INTERNAL (:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE) 0.)

(:DEFUN-METHOD MAILER:CHAOS-MAIL-USER-CHECK-REPLY):  (P.C. = 56)
   Arg 0 (SELF): #<CHAOS-MAIL-USER 12062373>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor MAILER:CHAOS-MAIL-USER -- 3. IV's, 1. FL's 110057341>
   Local 2 (REPLY): "-Error on hostname lookup"
   Local 3 (.SELECTQ-ITEM.): 45.

(:METHOD MAILER:CHAOS-MAIL-USER :RECEIVE-MESSAGE):  (P.C. = 46)
   Arg 0 (SELF): #<CHAOS-MAIL-USER 12062373>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor MAILER:CHAOS-MAIL-USER -- 3. IV's, 1. FL's 110057341>
   Arg 2 (OPERATION): :RECEIVE-MESSAGE
   Arg 3 (TRACE-LINE): NIL
   Arg 4 (SOURCE-STREAM): #<DTP-COMPILED-FUNCTION SI:WITH-INPUT-FROM-STRING-INTERNAL-FUNCTION 10672207>
   Arg 5 (BODY-STREAM): NIL

(:INTERNAL (:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE) 0.):  (P.C. = 7)
   Arg 0 (SELF): #<CHAOS-MAIL-USER 12062373>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor MAILER:CHAOS-MAIL-USER -- 3. IV's, 1. FL's 110057341>
   Rest arg (.DAEMON-CALLER-ARGS.): (:RECEIVE-MESSAGE NIL #<DTP-COMPILED-FUNCTION SI:WITH-INPUT-FROM-STRING-INTERNAL-FUNCTION 10672207> NIL)

(:METHOD MAILER:MAIL-ACCESS-PATH :WHOPPER :RECEIVE-MESSAGE):  (P.C. = 23)
   Arg 0 (SELF): #<CHAOS-MAIL-USER 12062373>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor MAILER:MAIL-ACCESS-PATH -- 2. IV's, 0. FL's 110057334>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE) 0.) 65073505>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor MAILER:CHAOS-MAIL-USER -- 3. IV's, 1. FL's 110057341>
   Arg 4 (.OPERATION.): :RECEIVE-MESSAGE
   Arg 5 (TRACE-LINE): NIL
   Arg 6 (STREAM): #<DTP-COMPILED-FUNCTION SI:WITH-INPUT-FROM-STRING-INTERNAL-FUNCTION 10672207>
   --Defaulted args:--
   Arg 7 (BODY-STREAM): NIL

(:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE):  (P.C. = 12)
   Arg 0 (SELF): #<CHAOS-MAIL-USER 12062373>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor MAILER:CHAOS-MAIL-USER -- 3. IV's, 1. FL's 110057341>
   Rest arg (.DAEMON-CALLER-ARGS.): (:RECEIVE-MESSAGE NIL #<DTP-COMPILED-FUNCTION SI:WITH-INPUT-FROM-STRING-INTERNAL-FUNCTION 10672207>)

ZWEI:INVOKE-MAIL-SERVICE:  (P.C. = 211)
   Arg 0 (SERVICE-ACCESS-PATH): #<SERVICE-ACCESS-PATH STORE-AND-FORWARD-MAIL (CHAOS-MAIL) -- XX on CHAOS 12062167>
   Arg 1 (RECIPIENTS): ((:NAME "mclure" :HOST (:OBJECT #<HOST SRI-UNIX 41173421>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 4.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 24.))) (:NAME "zauderer%ucbcory" :HOST (:OBJECT #<UNIX-HOST UCB-VAX 41172303>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 48.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 72.))))
   Arg 2 (TEMPLATE-EXPANSION): (:MULTIPLE-SENDINGS T :TEXT #<NODE 12050557> :HEADERS (:DATE 2677739635. :FROM ((:NAME "Phil-sci-request" :HOST ** :INTERVAL **)) :SENDER ((:NAME "JCMA" :HOST **)) :SUBJECT "Addition to mailing list" :TO ((:NAME "mike" :HOST ** :INTERVAL **) (:NAME "mcc" :HOST ** :INTERVAL **) (:NAME "dshurtle" :HOST ** :INTERVAL **) (:NAME "mclure" :HOST ** :INTERVAL **) (:NAME "COMBS" :HOST ** :INTERVAL **) (:NAME "zauderer%ucbcory" :HOST ** :INTERVAL **)) ...) :HEADER-FORMAT :SHORT :TRANSMIT-TIME 2677739635. ...)

ZWEI:NETWORK-SEND-IT-2:  (P.C. = 503)
   Arg 0 (RECIPIENTS): ((:NAME "zauderer%ucbcory" :HOST (:OBJECT #<UNIX-HOST UCB-VAX 41172303>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 48.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 72.))) (:NAME "mclure" :HOST (:OBJECT #<HOST SRI-UNIX 41173421>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 4.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 24.))))
   Arg 1 (TEMPLATE-EXPANSION): (:MULTIPLE-SENDINGS T :TEXT #<NODE 12050557> :HEADERS (:DATE 2677739635. :FROM ((:NAME "Phil-sci-request" :HOST ** :INTERVAL **)) :SENDER ((:NAME "JCMA" :HOST **)) :SUBJECT "Addition to mailing list" :TO ((:NAME "mike" :HOST ** :INTERVAL **) (:NAME "mcc" :HOST ** :INTERVAL **) (:NAME "dshurtle" :HOST ** :INTERVAL **) (:NAME "mclure" :HOST ** :INTERVAL **) (:NAME "COMBS" :HOST ** :INTERVAL **) (:NAME "zauderer%ucbcory" :HOST ** :INTERVAL **)) ...) :HEADER-FORMAT :SHORT :TRANSMIT-TIME 2677739635. ...)

ZWEI:NETWORK-SEND-IT-1:  (P.C. = 171)
   Arg 0 (SERVICES): NIL
   Arg 1 (RECIPIENTS): ((:NAME "zauderer%ucbcory" :HOST (:OBJECT #<UNIX-HOST UCB-VAX 41172303>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 48.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 72.))) (:NAME "mclure" :HOST (:OBJECT #<HOST SRI-UNIX 41173421>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 4.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 24.))))
   Arg 2 (TEMPLATE-EXPANSION): (:MULTIPLE-SENDINGS T :TEXT #<NODE 12050557> :HEADERS (:DATE 2677739635. :FROM ((:NAME "Phil-sci-request" :HOST ** :INTERVAL **)) :SENDER ((:NAME "JCMA" :HOST **)) :SUBJECT "Addition to mailing list" :TO ((:NAME "mike" :HOST ** :INTERVAL **) (:NAME "mcc" :HOST ** :INTERVAL **) (:NAME "dshurtle" :HOST ** :INTERVAL **) (:NAME "mclure" :HOST ** :INTERVAL **) (:NAME "COMBS" :HOST ** :INTERVAL **) (:NAME "zauderer%ucbcory" :HOST ** :INTERVAL **)) ...) :HEADER-FORMAT :SHORT :TRANSMIT-TIME 2677739635. ...)

Rest of stack:
ZWEI:NETWORK-SEND-IT:  (P.C. = 114)
ZWEI:FUNCALL-TEMPLATE-EXPANSION:  (P.C. = 47)
(:METHOD ZWEI:BASIC-DRAFT-MSG :TRANSMIT):  (P.C. = 315)
(:METHOD ZWEI:DRAFT-MSG :COMBINED :TRANSMIT):  (P.C. = 25)
ZWEI:COM-SEND-MESSAGE:  (P.C. = 50)
ZWEI:COM-MAIL-END:  (P.C. = 4)
ZWEI:COMMAND-EXECUTE:  (P.C. = 55)
ZWEI:PROCESS-COMMAND-CHAR:  (P.C. = 14)
(:METHOD ZWEI:EDITOR :EDIT):  (P.C. = 214)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :EDIT):  (P.C. = 50)
ZWEI:ZMAIL-MAIL:  (P.C. = 113)
ZWEI:CONTINUE-DRAFT-MSG:  (P.C. = 21)
ZWEI:COMPOSE-VIA-DRAFT-MSG:  (P.C. = 5)
ZWEI:FUNCALL-TEMPLATE-EXPANSION:  (P.C. = 47)
ZWEI:COMPOSE-FROM-TEMPLATE:  (P.C. = 20)
ZWEI:NORMAL-REPLY-INTERNAL:  (P.C. = 54)
ZWEI:COM-ZMAIL-REPLY-ALL:  (P.C. = 14)
ZWEI:EXPAND-AND-CALL-INTERNAL:  (P.C. = 11)
ZWEI:EXPAND-AND-CALL:  (P.C. = 23)
(:METHOD ZWEI:SEQUENCE :COMMAND):  (P.C. = 11)
ZWEI:COMMAND-WITH-UNIVERSE-OR-FILTER:  (P.C. = 111)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 1.):  (P.C. = 7)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 22)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 141)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 47)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 52)
SI:PROCESS-TOP-LEVEL:  (P.C. = 53)
 8-Nov-84 08:13:56-EST,3240;000000000000
Received: from SCRC-RIVERSIDE by MIT-OZ via Chaosnet; 8 Nov 84 08:13-EST
Received: from SCRC-PEACE by SCRC-RIVERSIDE via CHAOS with CHAOS-MAIL id 26412; Thu 8-Nov-84 08:14:20-EST
Date: Thursday, 8 November 1984, 08:14-EST
From: Charles Hornig <Hornig at SCRC-STONY-BROOK>
Subject: >>Error: Mail error from XX: -Error on hostname lookup
To: JCMA at MIT-OZ, BUG-zmail at MIT-OZ
In-Reply-To: The message of 8 Nov 84 03:38-EST from JCMA at MIT-OZ
Message-ID: <841108081402.7.HORNIG@PEACE.SCRC.Symbolics.COM>

    Date: Thursday, 8 November 1984, 03:38-EST
    From: JCMA@MIT-OZ

    In Symbolics 3600 System 242.356, Hardcopy 20.10,
    Experimental RELATUS 131.73, FEP 22, on Lisp Machine Jim Morrison:

    This error is really obnoxious.  Why can't the lispm be smart enough to figure
    whether a random tops20 can handle multiple recipients in the to field (or
    whatever the problem really is)?  Why can't we get this patch right away?
    This is really a major pain.

If XX can't support being a mail gateway, then edit its host object to
remove its STORE-AND-FORWARD-MAIL service.

    >>Error: Mail error from XX: -Error on hostname lookup
    While in the function (:DEFUN-METHOD MAILER:CHAOS-MAIL-USER-CHECK-REPLY)  (:METHOD MAILER:CHAOS-MAIL-USER :RECEIVE-MESSAGE)  (:INTERNAL (:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE) 0.)

    (:DEFUN-METHOD MAILER:CHAOS-MAIL-USER-CHECK-REPLY):  (P.C. = 56)
       Arg 0 (SELF): #<CHAOS-MAIL-USER 12062373>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor MAILER:CHAOS-MAIL-USER -- 3. IV's, 1. FL's 110057341>
       Local 2 (REPLY): "-Error on hostname lookup"
       Local 3 (.SELECTQ-ITEM.): 45.

    (:METHOD MAILER:CHAOS-MAIL-USER :RECEIVE-MESSAGE):  (P.C. = 46)
    (:INTERNAL (:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE) 0.):  (P.C. = 7)
    (:METHOD MAILER:MAIL-ACCESS-PATH :WHOPPER :RECEIVE-MESSAGE):  (P.C. = 23)
    (:METHOD MAILER:CHAOS-MAIL-USER :COMBINED :RECEIVE-MESSAGE):  (P.C. = 12)

    ZWEI:INVOKE-MAIL-SERVICE:  (P.C. = 211)
       Arg 0 (SERVICE-ACCESS-PATH): #<SERVICE-ACCESS-PATH STORE-AND-FORWARD-MAIL (CHAOS-MAIL) -- XX on CHAOS 12062167>
       Arg 1 (RECIPIENTS): ((:NAME "mclure" :HOST (:OBJECT #<HOST SRI-UNIX 41173421>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 4.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 24.))) (:NAME "zauderer%ucbcory" :HOST (:OBJECT #<UNIX-HOST UCB-VAX 41172303>) :INTERVAL (("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 48.) ("    mclure@Sri-Unix.arpa, COMBS@SUMEX-AIM.ARPA, zauderer%ucbcory@UCB-VAX" 72.))))
       Arg 2 (TEMPLATE-EXPANSION): (:MULTIPLE-SENDINGS T :TEXT #<NODE 12050557> :HEADERS (:DATE 2677739635. :FROM ((:NAME "Phil-sci-request" :HOST ** :INTERVAL **)) :SENDER ((:NAME "JCMA" :HOST **)) :SUBJECT "Addition to mailing list" :TO ((:NAME "mike" :HOST ** :INTERVAL **) (:NAME "mcc" :HOST ** :INTERVAL **) (:NAME "dshurtle" :HOST ** :INTERVAL **) (:NAME "mclure" :HOST ** :INTERVAL **) (:NAME "COMBS" :HOST ** :INTERVAL **) (:NAME "zauderer%ucbcory" :HOST ** :INTERVAL **)) ...) :HEADER-FORMAT :SHORT :TRANSMIT-TIME 2677739635. ...)

12-Nov-84 02:24:15-EST,1014;000000000001
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 12 Nov 84 02:23-EST
Date: Monday, 12 November 1984, 02:27-EST
From: JCMA@MIT-OZ
Subject: Sending Mail From Lisp Machines
To: bug-mail@MIT-OZ, bug-zmail@MIT-OZ

I was sending a message to standford with only one host in the to header and
no cc header and I got a too many hosts error from XX and EE.  the only
Tops-20 that handles mail properly (using rel 5.2 prime) is OZ.  Why is this?
Are these 20s broken or is the lisp machine giving them the wrong information?

This is a serious problem and should be attended to.  Hornig suggested
removing XX, EE, and SPEECH from the list of mail-forwarders in the MIT
namespace.  If this is indeed a top-20 bug and not a lisp machine bug, this
could be an interim solution.  However, this error is a recent phenomena that
began with rel 5.2.  That may mean that the lisp machine is at fault, or it is
now using some documented feature which has not been implemented on those 20s.

What's the verdict?
13-Nov-84 10:59:09-EST,4193;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 13 Nov 84 10:58-EST
Date: Tuesday, 13 November 1984, 11:02-EST
From: JCMA@MIT-OZ
Subject: Better Handling For Sending Mail Needed
To: BUG-zmail@MIT-OZ

In Symbolics 3600 System 242.356, Hardcopy 20.10,
Experimental RELATUS 131.96, FEP 22, on Lisp Machine Jim Morrison:

Why doesn't this know to check if the host is up, before going off and losing?
If it is going to be stupid and blow out instead of finding a host that is up,
why is there no proceed handler which offers to try another host?

>>Error: ML (at Chaos address 3114) did not respond to a MAIL request.
While in the function CHAOS:CHECK-CONNECTION-STATE  CHAOS:WAIT-FOR-CONNECT  CHAOS:CONNECT

CHAOS:CHECK-CONNECTION-STATE:  (P.C. = 117)
   Arg 0 (CONN): #<CHAOS Connection for MAIL to ML 72016352>
   Arg 1 (EXPECTED-STATE): CHAOS:OPEN-STATE
   Local 2 (STATE): CHAOS:RFC-SENT-STATE

CHAOS:WAIT-FOR-CONNECT:  (P.C. = 13)
   Arg 0 (CONN): #<CHAOS Connection for MAIL to ML 72016352>
   Arg 1 (EXPECTED-STATE): CHAOS:OPEN-STATE
   Arg 2 (TIMEOUT): 600.

CHAOS:CONNECT:  (P.C. = 250)
   Arg 0 (HOST): #<ITS-HOST ML 72301072>
   Arg 1 (CONTACT-NAME): "MAIL"
   Arg 2 (WINDOW-SIZE): 13.
   Arg 3 (TIMEOUT): 600.

CHAOS:OPEN-STREAM:  (P.C. = 65)
   Arg 0 (HOST): #<ITS-HOST ML 72301072>
   Arg 1 (CONTACT-NAME): "MAIL"
   Rest arg: NIL

CHAOS:|MEDIUM-CHAOS-((NETWORK CHAOS))-G0223|:  (P.C. = 11)
   Arg 0 (SERVICE-ACCESS-PATH): #<SERVICE-ACCESS-PATH STORE-AND-FORWARD-MAIL (CHAOS-MAIL) -- ML on CHAOS 6262077>
   Rest arg (ARGS): NIL

NETI:GET-CONNECTION-FOR-SERVICE-TO-HOST:  (P.C. = 12)
   Arg 0 (SERVICE-ACCESS-PATH): #<SERVICE-ACCESS-PATH STORE-AND-FORWARD-MAIL (CHAOS-MAIL) -- ML on CHAOS 6262077>
   Arg 1 (NETWORK): #<CHAOS-NETWORK CHAOS 72177671>
   Arg 2 (IMPLEMENTATION): #<MEDIUM-IMPLEMENTATION 73367753>
   Arg 3 (CONNECTION-ARGS): NIL

NETI:GET-CONNECTION-FOR-SERVICE-1:  (P.C. = 220)
   Arg 0 (MEDIUM): #<MEDIUM-DESCRIPTION on CHAOS 6262073>
   Arg 1 (SERVICE-ACCESS-PATH): #<SERVICE-ACCESS-PATH STORE-AND-FORWARD-MAIL (CHAOS-MAIL) -- ML on CHAOS 6262077>
   Arg 2 (CONNECTION-ARGS): NIL

NET:GET-CONNECTION-FOR-SERVICE:  (P.C. = 7)
   Arg 0 (SERVICE-ACCESS-PATH): #<SERVICE-ACCESS-PATH STORE-AND-FORWARD-MAIL (CHAOS-MAIL) -- ML on CHAOS 6262077>
   Rest arg (CONNECTION-ARGS): NIL

Rest of stack:
MAILER:CHAOS-MAIL-USER-INTERNAL:  (P.C. = 6)
MAILER:INVOKE-SERVICE-STORE-AND-FORWARD-MAIL-WITH-CHAOS-MAIL:  (P.C. = 3)
NET:INVOKE-SERVICE-ACCESS-PATH:  (P.C. = 21)
ZWEI:INVOKE-MAIL-SERVICE:  (P.C. = 7)
ZWEI:NETWORK-SEND-IT-2:  (P.C. = 503)
ZWEI:NETWORK-SEND-IT-1:  (P.C. = 171)
ZWEI:NETWORK-SEND-IT:  (P.C. = 114)
ZWEI:FUNCALL-TEMPLATE-EXPANSION:  (P.C. = 47)
(:METHOD ZWEI:BASIC-DRAFT-MSG :TRANSMIT):  (P.C. = 315)
(:METHOD ZWEI:DRAFT-MSG :COMBINED :TRANSMIT):  (P.C. = 25)
ZWEI:COM-SEND-MESSAGE:  (P.C. = 50)
ZWEI:COM-MAIL-END:  (P.C. = 4)
ZWEI:COMMAND-EXECUTE:  (P.C. = 55)
ZWEI:PROCESS-COMMAND-CHAR:  (P.C. = 14)
(:METHOD ZWEI:EDITOR :EDIT):  (P.C. = 214)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :EDIT):  (P.C. = 50)
ZWEI:ZMAIL-MAIL:  (P.C. = 113)
ZWEI:CONTINUE-DRAFT-MSG:  (P.C. = 21)
ZWEI:COMPOSE-VIA-DRAFT-MSG:  (P.C. = 5)
ZWEI:FUNCALL-TEMPLATE-EXPANSION:  (P.C. = 47)
ZWEI:COMPOSE-FROM-TEMPLATE:  (P.C. = 20)
ZWEI:NORMAL-REPLY-INTERNAL:  (P.C. = 54)
ZWEI:NORMAL-REPLY:  (P.C. = 5)
ZWEI:COM-ZMAIL-REPLY:  (P.C. = 20)
ZWEI:COMMAND-EXECUTE:  (P.C. = 55)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0.) 0.):  (P.C. = 7)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0.):  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 11)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 146)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 47)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 52)
SI:PROCESS-TOP-LEVEL:  (P.C. = 53)
13-Nov-84 20:31:35-EST,17428;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 13 Nov 84 20:31-EST
Date: Tuesday, 13 November 1984, 20:34-EST
From: JCMA@MIT-OZ
Subject: >>Error: The binding stack overflowed.
To: BUG-zmail@MIT-OZ

In Symbolics 3600 System 242.356, Hardcopy 20.10,
Experimental RELATUS 131.96, FEP 22, on Lisp Machine Jim Morrison:

I tried doing Meta-X View Mail in zmail, and after viewing, when it can time
to put the experimental configuration back up, this happened.  It was a little
difficult to generate the bug report because the error printed out in the
message viewing window and but it wasn't selected (apparently).

>>Error: The binding stack overflowed.
While in the function #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>  (:METHOD ZWEI:ZMAIL-SUMMARY-SCROLL-WINDOW :COMBINED :EXPOSE)  TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

#<ZMAIL-FRAME Main Zmail Window 5040715 exposed>:
   Arg 0: 63.
   Arg 1: (#<DTP-LOCATIVE 22642750> #<DTP-LOCATIVE 22642755> #<DTP-LOCATIVE 22642762> #<DTP-LOCATIVE 22642767> #<DTP-LOCATIVE 22642774> #<DTP-LOCATIVE 22643001> #<DTP-LOCATIVE 22643006> #<DTP-LOCATIVE 22643013> #<DTP-LOCATIVE 22643020> #<DTP-LOCATIVE 22643032> ...)
   Local 0: 63.
   Local 1: (#<DTP-LOCATIVE 22642750> #<DTP-LOCATIVE 22642755> #<DTP-LOCATIVE 22642762> #<DTP-LOCATIVE 22642767> #<DTP-LOCATIVE 22642774> #<DTP-LOCATIVE 22643001> #<DTP-LOCATIVE 22643006> #<DTP-LOCATIVE 22643013> #<DTP-LOCATIVE 22643020> #<DTP-LOCATIVE 22643032> ...)

(:METHOD ZWEI:ZMAIL-SUMMARY-SCROLL-WINDOW :COMBINED :EXPOSE):  (P.C. = 6)
   Arg 0 (SELF): #<ZMAIL-SUMMARY-SCROLL-WINDOW Zmail Summary Scroll Window 2 5052202 deexposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-SUMMARY-SCROLL-WINDOW -- 10. IV's, 21. FL's 107233112>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS:  (P.C. = 114)
   Arg 0 (SHEET): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

(:METHOD TV:SHEET :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

(:METHOD TV:SHEET :SCREEN-MANAGE):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE
   Rest arg (ARGS): ((((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 242. 1087. 262.)))

(:METHOD TV:SHEET :COMBINED :SCREEN-MANAGE):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-DEQUEUE-ENTRY:  (P.C. = 117)
   Arg 0 (ENTRY): ((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 242. 1087. 262.)
   --Defaulted args:--
   Arg 1 (UNCOND): NIL

TV:SCREEN-MANAGE-DEQUEUE:  (P.C. = 10)

TV:SCREEN-MANAGE-DELAYING-SCREEN-MANAGEMENT-INTERNAL:  (P.C. = 6)

(:METHOD TV:SHEET :WHOPPER :EXPOSE):  (P.C. = 152)
   Arg 0 (SELF): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 7 5070403 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD TV:COMMAND-MENU-PANE :COMBINED :EXPOSE) 0.) 11501735>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor TV:COMMAND-MENU-PANE -- 1. IV's, 6. FL's 107247545>
   Arg 4 (.OPERATION.): :EXPOSE
   --Defaulted args:--
   Arg 5 (TURN-ON-BLINKERS): NIL
   Arg 6 (BITS-ACTION): NIL
   Arg 7 (X): 1.
   Arg 8 (Y): 242.

(:METHOD TV:COMMAND-MENU-PANE :COMBINED :EXPOSE):  (P.C. = 17)
   Arg 0 (SELF): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 7 5070403 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:COMMAND-MENU-PANE -- 1. IV's, 6. FL's 107247545>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS:  (P.C. = 114)
   Arg 0 (SHEET): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

(:METHOD TV:SHEET :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

(:METHOD TV:SHEET :SCREEN-MANAGE):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE
   Rest arg (ARGS): ((((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 262. 1087. 286.)))

(:METHOD TV:SHEET :COMBINED :SCREEN-MANAGE):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-DEQUEUE-ENTRY:  (P.C. = 117)
   Arg 0 (ENTRY): ((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 262. 1087. 286.)
   --Defaulted args:--
   Arg 1 (UNCOND): NIL

TV:SCREEN-MANAGE-DEQUEUE:  (P.C. = 10)

TV:SCREEN-MANAGE-DELAYING-SCREEN-MANAGEMENT-INTERNAL:  (P.C. = 6)

(:METHOD TV:SHEET :WHOPPER :EXPOSE):  (P.C. = 152)
   Arg 0 (SELF): #<BUTTONS-FRAME Buttons Frame 2 5070215 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD TV:BUTTONS-FRAME :COMBINED :EXPOSE) 1.) 11525532>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor TV:BUTTONS-FRAME -- 4. IV's, 11. FL's 107255756>
   Arg 4 (.OPERATION.): :EXPOSE
   --Defaulted args:--
   Arg 5 (TURN-ON-BLINKERS): NIL
   Arg 6 (BITS-ACTION): NIL
   Arg 7 (X): 1.
   Arg 8 (Y): 262.

(:METHOD TV:BUTTONS-FRAME :COMBINED :EXPOSE):  (P.C. = 30)
   Arg 0 (SELF): #<BUTTONS-FRAME Buttons Frame 2 5070215 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:BUTTONS-FRAME -- 4. IV's, 11. FL's 107255756>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS:  (P.C. = 114)
   Arg 0 (SHEET): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

(:METHOD TV:SHEET :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

(:METHOD TV:SHEET :SCREEN-MANAGE):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE
   Rest arg (ARGS): ((((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 286. 1087. 338.)))

(:METHOD TV:SHEET :COMBINED :SCREEN-MANAGE):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-DEQUEUE-ENTRY:  (P.C. = 117)
   Arg 0 (ENTRY): ((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 286. 1087. 338.)
   --Defaulted args:--
   Arg 1 (UNCOND): NIL

TV:SCREEN-MANAGE-DEQUEUE:  (P.C. = 10)

TV:SCREEN-MANAGE-DELAYING-SCREEN-MANAGEMENT-INTERNAL:  (P.C. = 6)

(:METHOD TV:SHEET :WHOPPER :EXPOSE):  (P.C. = 152)
   Arg 0 (SELF): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 8 5070305 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD TV:COMMAND-MENU-PANE :COMBINED :EXPOSE) 0.) 11501735>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor TV:COMMAND-MENU-PANE -- 1. IV's, 6. FL's 107247545>
   Arg 4 (.OPERATION.): :EXPOSE
   --Defaulted args:--
   Arg 5 (TURN-ON-BLINKERS): NIL
   Arg 6 (BITS-ACTION): NIL
   Arg 7 (X): 1.
   Arg 8 (Y): 286.

(:METHOD TV:COMMAND-MENU-PANE :COMBINED :EXPOSE):  (P.C. = 17)
   Arg 0 (SELF): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 8 5070305 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:COMMAND-MENU-PANE -- 1. IV's, 6. FL's 107247545>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS:  (P.C. = 114)
   Arg 0 (SHEET): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

(:METHOD TV:SHEET :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

(:METHOD TV:SHEET :SCREEN-MANAGE):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE
   Rest arg (ARGS): ((((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 338. 1087. 684.)))

(:METHOD TV:SHEET :COMBINED :SCREEN-MANAGE):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-DEQUEUE-ENTRY:  (P.C. = 117)
   Arg 0 (ENTRY): ((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 338. 1087. 684.)
   --Defaulted args:--
   Arg 1 (UNCOND): NIL

TV:SCREEN-MANAGE-DEQUEUE:  (P.C. = 10)

TV:SCREEN-MANAGE-DELAYING-SCREEN-MANAGEMENT-INTERNAL:  (P.C. = 6)

(:METHOD TV:SHEET :WHOPPER :EXPOSE):  (P.C. = 152)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 7 5051225 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:ZMAIL-WINDOW :COMBINED :EXPOSE) 0.) 11423545>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-WINDOW -- 1. IV's, 19. FL's 107224710>
   Arg 4 (.OPERATION.): :EXPOSE
   --Defaulted args:--
   Arg 5 (TURN-ON-BLINKERS): NIL
   Arg 6 (BITS-ACTION): NIL
   Arg 7 (X): 1.
   Arg 8 (Y): 338.

(:METHOD ZWEI:ZMAIL-WINDOW :COMBINED :EXPOSE):  (P.C. = 55)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 7 5051225 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-WINDOW -- 1. IV's, 19. FL's 107224710>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS:  (P.C. = 114)
   Arg 0 (SHEET): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

(:METHOD TV:SHEET :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

(:METHOD TV:SHEET :SCREEN-MANAGE):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE
   Rest arg (ARGS): ((((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 684. 1087. 748.)))

(:METHOD TV:SHEET :COMBINED :SCREEN-MANAGE):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-DEQUEUE-ENTRY:  (P.C. = 117)
   Arg 0 (ENTRY): ((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 684. 1087. 748.)
   --Defaulted args:--
   Arg 1 (UNCOND): NIL

TV:SCREEN-MANAGE-DEQUEUE:  (P.C. = 10)

TV:SCREEN-MANAGE-DELAYING-SCREEN-MANAGEMENT-INTERNAL:  (P.C. = 6)

(:METHOD TV:SHEET :WHOPPER :EXPOSE):  (P.C. = 152)
   Arg 0 (SELF): #<ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE Zmail Mouse Sensitive Mode Line Pane 2 5044361 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE :COMBINED :EXPOSE) 0.) 11517422>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE -- 0. IV's, 16. FL's 107216512>
   Arg 4 (.OPERATION.): :EXPOSE
   --Defaulted args:--
   Arg 5 (TURN-ON-BLINKERS): NIL
   Arg 6 (BITS-ACTION): NIL
   Arg 7 (X): 1.
   Arg 8 (Y): 684.

(:METHOD ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE :COMBINED :EXPOSE):  (P.C. = 17)
   Arg 0 (SELF): #<ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE Zmail Mouse Sensitive Mode Line Pane 2 5044361 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE -- 0. IV's, 16. FL's 107216512>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-AUTOEXPOSE-INFERIORS:  (P.C. = 114)
   Arg 0 (SHEET): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

(:METHOD TV:SHEET :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE-AUTOEXPOSE-INFERIORS

(:METHOD TV:SHEET :SCREEN-MANAGE):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Arg 2 (OPERATION): :SCREEN-MANAGE
   Rest arg (ARGS): ((((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 1. 1087. 748.)))

(:METHOD TV:SHEET :COMBINED :SCREEN-MANAGE):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): TV:SHEET
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

TV:SCREEN-MANAGE-DEQUEUE-ENTRY:  (P.C. = 117)
   Arg 0 (ENTRY): ((#<ZMAIL-FRAME Main Zmail Window 5040715 exposed> 0. 0.) 1. 1. 1087. 748.)
   --Defaulted args:--
   Arg 1 (UNCOND): NIL

TV:SCREEN-MANAGE-DEQUEUE:  (P.C. = 10)

TV:SCREEN-MANAGE-DELAYING-SCREEN-MANAGEMENT-INTERNAL:  (P.C. = 6)

(:METHOD ZWEI:ZWEI-WITH-TYPEOUT :COMBINED :DEACTIVATE):  (P.C. = 102)
   Arg 0 (SELF): #<ZMAIL-OVERLYING-WINDOW Zmail Overlying Window 2 5041634 deactivated>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI-WITH-TYPEOUT -- 3. IV's, 15. FL's 107335347>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-VIEW-FILE:  (P.C. = 103)
   Arg 0 (PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<JCMA>MAIL.TXT.1">
   --Defaulted args:--
   Arg 1 (MESSAGE-IF-NOT-FOUND): "No such file"

ZWEI:VIEW-MAIL-INTERNAL:  (P.C. = 53)
   Arg 0 (FUNCTION): #<DTP-COMPILED-FUNCTION ZWEI:ZMAIL-VIEW-FILE 64532127>

ZWEI:COM-ZMAIL-VIEW-MAIL:  (P.C. = 7)

ZWEI:COM-ZMAIL-EXTENDED-COMMAND:  (P.C. = 41)

ZWEI:COMMAND-EXECUTE:  (P.C. = 55)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-EXTENDED-COMMAND
   Arg 1 (CHAR): 600.
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0 (*CURRENT-COMMAND*-initialization): ZWEI:COM-ZMAIL-EXTENDED-COMMAND

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Arg 2 (OPERATION): :PROCESS-COMMAND-CHAR
   Arg 3 (CH): 600.

(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0.) 0.):  (P.C. = 7)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Rest arg (.DAEMON-CALLER-ARGS.): (:PROCESS-COMMAND-CHAR 600.)

(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN -- 10. IV's, 1. FL's 107210277>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0.) 0.) 11420336>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 600.

(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0.):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Rest arg (.DAEMON-CALLER-ARGS.): (:PROCESS-COMMAND-CHAR 600.)

(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0.) 11420324>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 600.

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 11)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 146)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 47)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 68. IV's, 20. FL's 102443326>
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 52)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 5040715 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 53)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
15-Nov-84 09:17:09-EST,1359;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 15 Nov 84 09:16-EST
Received: from SCRC-PEACE by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 126779; Wed 14-Nov-84 14:26:04-EST
Date: Wednesday, 14 November 1984, 14:23-EST
From: Charles Hornig <Hornig at SCRC-STONY-BROOK>
Subject: Better Handling For Sending Mail Needed
To: JCMA at MIT-OZ, BUG-zmail at MIT-OZ
In-Reply-To: The message of 13 Nov 84 11:02-EST from JCMA at MIT-OZ
Message-ID: <841114142312.8.HORNIG@PEACE.SCRC.Symbolics.COM>

    Date: Tuesday, 13 November 1984, 11:02-EST
    From: JCMA@MIT-OZ

    In Symbolics 3600 System 242.356, Hardcopy 20.10,
    Experimental RELATUS 131.96, FEP 22, on Lisp Machine Jim Morrison:

    Why doesn't this know to check if the host is up, before going off and losing?
    If it is going to be stupid and blow out instead of finding a host that is up,
    why is there no proceed handler which offers to try another host?

    >>Error: ML (at Chaos address 3114) did not respond to a MAIL request.
    While in the function CHAOS:CHECK-CONNECTION-STATE  CHAOS:WAIT-FOR-CONNECT  CHAOS:CONNECT

It had already given up on all of the mailers it knew about and was
trying to deliver the mail directly to the destination.  In the next
release, you will be warned when this happens and you will also get
useful proceed option.
16-Nov-84 01:05:24-EST,1178;000000000001
Received: from MIT-MC by MIT-OZ via Chaosnet; 16 Nov 84 01:05-EST
Date: Friday, 16 November 1984, 01:03-EST
From: Gavan Duffy <GAVAN at MIT-OZ>
Subject: Random timezone on header
To: BUG-ZMAIL at MIT-OZ
Cc: GAVAN at MIT-OZ

I received mail with the following header.

    Received: from MIT-MC by MIT-OZ via Chaosnet; 15 Nov 84 19:30-EST
    Received: from ucbjade.CC.Berkeley.ARPA (ucbjade.ARPA) by UCB-VAX.ARPA (4.24/4.39)
    	id AA07138; Thu, 15 Nov 84 14:43:36 pst
    Received: from suvm.BITNET
    	by ucbjade.CC.Berkeley.ARPA (4.18/4.27.7)
    	id AA24891; Thu, 15 Nov 84 14:42:46 pst
    Message-Id: <8411152242.AA24891@ucbjade.CC.Berkeley.ARPA>
    Date: Thu, Nov 15, 84 16:08:14 LCL
    From: writer%suvm.BITNET@Berkeley
    To: GAVAN@MIT-MC.ARPA
    Subject: NOTE

Understandable, the lispm doesn't grok the timezone (LCL).  I suppose it means
LoCaL time.  Of course, who knows where suvm.BITNET is, anyway?  Well, I
happen to know that it's in Syracuse NY.  Couldn't ZMAIL just assume random
timezones to be the local timezone (maybe with some marking to warn the
unsuspecting reader), or could this cause other problems I'm not aware of?
21-Nov-84 04:57:39-EST,5053;000000000001
Received: from MIT-MC by MIT-OZ via Chaosnet; 21 Nov 84 04:57-EST
Date: Wednesday, 21 November 1984, 04:59-EST
From: Howard D. Trachtman <Hdt at MIT-MC>
To: BUG-zmail at MIT-OZ

In Experimental System 99.11, CADR 4.0, Experimental ZMail 54.2,
MIT-Specific 23.0, microcode 320, GC@2, on Lisp Machine Eighteen:

I had done a G and a S after I saw I had new mail for gmsgs.
I'm not quite sure how to explain...

>>ERROR: Unknown IF-DOES-NOT-EXIST option for MC: SIPB; HDT >
Backtrace from the debugger:

FS:FILE-PROCESS-ERROR (P.C. = 90)

 Arg 0 (CONDITION-NAME): NIL
 Arg 1 (ERROR-STRING): "Unknown IF-DOES-NOT-EXIST option for MC: SIPB; HDT >"
 Arg 2 (PATHNAME-OR-STREAM): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
 Arg 3 (PROCEEDABLE): NIL
 Arg 4 (NOERROR): NIL
 Rest arg (MAKE-CONDITION-ARGS): (:OPEN)
Local 1 (WHO-FOR): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
Local 2 (CONDITION): #FS:FILE-OPERATION-FAILURE :PROPERTY-LIST (:PATHNAME #FS:ITS-PATHNAME "MC: SIPB; HDT >" :OPERATION :OPEN) :CONDITION-NAMES (FS:FILE-OPERATION-FAILURE FS:FILE-ERROR ERROR CONDITION ...) :FORMAT-STRING "~A" :FORMAT-ARGS ("Unknown IF-DOES-NOT-EXIST option for MC: SIPB; HDT >") :PATHNAME #FS:ITS-PATHNAME "MC: SIPB; HDT >" :OPERATION :OPEN


FS:QFILE-PROCESS-ERROR-NEW (P.C. = 130)

 Arg 0 (STRING): "O1000 ERROR UUO F Unknown IF-DOES-NOT-EXIST option"
 Arg 1 (PATHNAME-OR-STREAM): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
 Arg 2 (PROCEEDABLE): NIL
 Arg 3 (NOERROR): NIL
 Rest arg (MAKE-CONDITION-ARGS): (:OPEN)
Local 1 (S-P): 17
Local 2 (ERROR-CODE): "UUO"
Local 3 (ERROR-SEVERITY): "F"
Local 4 (ERROR-STRING): "Unknown IF-DOES-NOT-EXIST option"
Local 5 (WHO-FOR): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
Local 6 (DEFAULT-CONS-AREA): 32


FS:OPEN-CHAOS (P.C. = 802)

 Arg 0 (ACCESS): #<FS:QFILE-ACCESS Chaos FILE access to MIT-MC 16627554>
 Arg 1 (FILE): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
 Arg 2 (PATHNAME): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
 Rest arg (OPTIONS): (:DIRECTION :OUTPUT :IF-EXISTS :SUPERSEDE)
Local 1 (DIRECTION): :OUTPUT
Local 2 (CHARACTERS): T
Local 3 (ERROR): T
Local 4: (NIL)
Local 5: (NIL)
Local 6: :SUPERSEDE
Local 7: (NIL)
Local 8 (TEMPORARY): NIL
Local 9 (DELETED): NIL
Local 10 (RAW): NIL
Local 11 (SUPER-IMAGE): NIL
Local 12 (BYTE-SIZE): :DEFAULT
Local 13 (PRESERVE-DATES): NIL
Local 14 (INHIBIT-LINKS): NIL
Local 15 (SUBMIT): NIL
Local 16 (ESTIMATED-LENGTH): NIL
Local 17 (ELEMENT-TYPE-P): NIL
Local 18 (ACCESS-ERROR): NIL
Local 19 (ELEMENT-TYPE): STRING-CHAR
Local 20 (IF-EXISTS): :SUPERSEDE
Local 21 (IF-DOES-NOT-EXIST): :CREATE
Local 22 (HOST-UNIT): #<FS:QFILE-HOST-UNIT for Chaos FILE access to MIT-MC 16627557>
Local 23 (DATA-CONN): (#<CHAOS Connection 20427330> "I0999" "O1000" 1921357 ...)
Local 24 (PKT): #<CHAOS packet :STRING "STATUS" :STATUS NIL 26307537>
Local 25 (SUCCESS): NIL
Local 26 (STRING): "O1000 ERROR UUO F Unknown IF-DOES-NOT-EXIST option"
Local 27 (NOT-ABORTED): T
Local 28 (PHONY-CHARACTERS): NIL
Local 29 (SIGN-EXTEND-BYTES): NIL
Local 30 (IF-EXISTS-P): T
Local 31 (.SELECTQ.ITEM.): :NEWEST
Local 32 (ERROR-OBJECT): (#<CHAOS Connection 20427330> "I0999" "O1000" 1921357 ...)
Local 33: ((FS:FILE-NOT-FOUND SI:CONDITION-CASE-THROW FS:G3666) (ZWEI:UNKNOWN-SPECIAL-COMMAND ZWEI:ZMAIL-COMMAND-LOOP-UNKNOWN-SPECIAL-COMMAND))
Local 34: (FS:FILE-NOT-FOUND SI:CONDITION-CASE-THROW FS:G3666)
Local 35: (FS:FILE-ALREADY-EXISTS SI:CONDITION-CASE-THROW FS:G3673)
Local 36: ((FS:FILE-ALREADY-EXISTS SI:CONDITION-CASE-THROW FS:G3673) (ZWEI:UNKNOWN-SPECIAL-COMMAND ZWEI:ZMAIL-COMMAND-LOOP-UNKNOWN-SPECIAL-COMMAND))
Local 37 (PROPERTIES): NIL
Local 38 (ERROR-OBJECT): NIL
Local 39 (IGNORE): NIL


(:METHOD FS:QFILE-ACCESS :OPEN) (P.C. = 26)
  (SELF is #<FS:QFILE-ACCESS Chaos FILE access to MIT-MC 16627554>)

 Arg 0 (.OPERATION.): :OPEN
 Arg 1 (FILE): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
 Arg 2 (PATHNAME): #FS:ITS-PATHNAME "MC: SIPB; HDT >"
 Rest arg (OPTIONS): (:DIRECTION :OUTPUT :IF-EXISTS :SUPERSEDE)


(:METHOD FS:FILE-HOST-MIXIN :ACCESS-OPERATION) (P.C. = 25)
  (SELF is #FS:ITS-HOST "MIT-MC")

 Arg 0 (.OPERATION.): :ACCESS-OPERATION
 Arg 1 (OP): :OPEN
 Rest arg (ARGS): (#FS:ITS-PATHNAME "MC: SIPB; HDT >" #FS:ITS-PATHNAME "MC: SIPB; HDT >" :DIRECTION :OUTPUT ...)


Remainder of stack:

(:METHOD FS:HOST-PATHNAME :OPEN) (P.C. = 31)
OPEN (P.C. = 155)
ZWEI:ZMAIL-BUFFER-SAVE-SETUP (P.C. = 38)
ZWEI:SAVE-ZMAIL-BUFFER (P.C. = 83)
ZWEI:ZMAIL-SAVE-ALL (P.C. = 48)
ZWEI:COM-ZMAIL-SAVE (P.C. = 53)
ZWEI:COMMAND-EXECUTE (P.C. = 92)
ZWEI:ZMAIL-COMMAND-EXECUTE (P.C. = 23)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR) (P.C. = 32)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP) (P.C. = 177)
(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) 0) (P.C. = 40)
FUNCALL (P.C. = 21)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :AROUND :COMMAND-LOOP) (P.C. = 47)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) (P.C. = 39)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL (P.C. = 79)
SI:PROCESS-TOP-LEVEL (P.C. = 115)
29-Nov-84 15:15:36-EST,5164;000000000001
Received: from MIT-GSTAAD by MIT-OZ via Chaosnet; 29 Nov 84 15:15-EST
Date: Thursday, 29 November 1984, 15:09-EST
From: Richard E. Zippel <RZ at MIT-MC>
Subject: Problems with reading foreign files.
To: BUG-ZMail at MIT-OZ
Cc: RZ at MIT-MC, Alan at MIT-MC

In Symbolics 3600 System 242.356, Hardcopy 20.10, FEP 24, on GSTAAD:

I was trying to read in a Unix file that contain a bunch of messages,
which I wanted to merge into by existing Babyl files.  I Clicked on [Get
Inbox] which offered to [Read file] and [Examine File].  The following
backtrace comes from using [Read file] but a similar response occured
when using [Examine file].

I just aborted the error, and it appears the file was correctly read in!

This is the response you sent to an earlier report of this problem.
Frankly, I don't understand your response.

    Received: from SCRC-YUKON by MIT-OZ via Chaosnet; 29 Sep 84 20:25-EDT
    Received: from SCRC-HUDSON by SCRC-YUKON via CHAOS with CHAOS-MAIL id 63925; Fri 28-Sep-84 01:23:35-EDT
    Date: Friday, 28 September 1984, 01:23-EDT
    From: Robert W. Kerns <RWK at SCRC-YUKON>
    Subject: Bug in Zmail, Examine file
    To: Richard E. Zippel <RZ at MIT-MC>
    cc: BUG-LISPM at MIT-OZ
    In-Reply-To: The message of 24 Sep 84 19:47-EDT from Richard E. Zippel <RZ at MIT-MC>
    Message-ID: <840928012345.9.RWK@HUDSON.SCRC.Symbolics>
    
	Date: Monday, 24 September 1984, 19:47-EDT
	From: Richard E. Zippel <RZ at MIT-MC>
    
	In Symbolics 3600 Release 5.2, FEP 18, on Lisp Machine Aspen:
    
	I have had this problem twice while ``Examine File''ing a mail file.
	This particular set of problems was started by examining
	aspen:>RZ>Mail.text, I have had similar problems with Unix mailboxes.
	I'd localize this for you better if our syshost was up.
    
    This backtrace shows you were trying to do a [Get inbox] on the
    file you were examining!  First of all, that's completely counter
    to the concept of Examining a file, i.e. it's not a READ-ONLY
    operation.  Secondly, the file you were examining was itself your
    inbox file.  You should select your mbox file (unix) or your BABYL
    file (Lispm, ITS, TOPS-20, or unix), and give the [Get inbox]
    command on that buffer.  (This is done automatically for you if
    you just type G or [Get inbox] at a completely fresh Zmail).
    
    Why don't you tell us what you were trying to do, and we'll tell
    you how to do it?
    
	>>Error: The symbol NIL has an invalid function definition
	While in the function NIL  (:METHOD ZWEI:RMAIL-BUFFER :GET-INBOX)  ZWEI:GET-INBOX-FOR-BUFFER
    
	NIL:
	   Arg 0: :NEW-CANONICAL-TYPE
	   Arg 1: :ZMAIL-TEMP
    
	(:METHOD ZWEI:RMAIL-BUFFER :GET-INBOX):  (P.C. = 33)
	   Arg 0 (SELF): #<RMAIL-BUFFER "ASPEN:>RZ>mail.text" 6741345>
	   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:RMAIL-BUFFER -- 3. IV's, 5. FL's 46355572>
	   Arg 2 (OPERATION): :GET-INBOX
	   Arg 3 (NEW-PATHNAME): NIL
	   Arg 4 (DELETE-P): NIL
    


-----------------------------------------------------------------------


>>Error: The symbol NIL has an invalid function definition
While in the function NIL  (:METHOD ZWEI:UNIX-BUFFER-MIXIN :GET-INBOX)  ZWEI:GET-INBOX-FOR-BUFFER

NIL:
   Arg 0: :ZMAIL-TEMP-FILE-TYPE

(:METHOD ZWEI:UNIX-BUFFER-MIXIN :GET-INBOX):  (P.C. = 27)
   Arg 0 (SELF): #<UNIX-MAIL-BUFFER "VX: //usr//rz//Notes//Franz.comments" 27140545>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:UNIX-BUFFER-MIXIN -- 2. IV's, 0. FL's 70575204>
   Arg 2 (OPERATION): :GET-INBOX
   Arg 3 (NEW-PATHNAME): NIL
   Arg 4 (DELETE-P): NIL

ZWEI:GET-INBOX-FOR-BUFFER:  (P.C. = 57)
   Arg 0 (BUFFER): #<UNIX-MAIL-BUFFER "VX: //usr//rz//Notes//Franz.comments" 27140545>
   Arg 1 (FROM-PATHNAME): NIL
   Arg 2 (DELETE-P): NIL
   Arg 3 (TELL-BACKGROUND-P): NIL

ZWEI:COM-GET-INBOX-INTERNAL:  (P.C. = 253)
   Arg 0 (FIRST-TIME-P): NIL
   --Defaulted args:--
   Arg 1 (FOR-BUFFER): #<UNIX-MAIL-BUFFER "VX: //usr//rz//Notes//Franz.comments" 27140545>

ZWEI:COM-GET-NEW-MAIL-FROM-INBOX:  (P.C. = 7)

ZWEI:COMMAND-EXECUTE:  (P.C. = 55)
   Arg 0 (COMMAND): ZWEI:COM-GET-NEW-MAIL-FROM-INBOX
   Arg 1 (CHAR): (:MENU ("Get inbox" . ZWEI:COM-GET-NEW-MAIL-FROM-INBOX) 4 #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 5 2600741 exposed>)
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0 (*CURRENT-COMMAND*-initialization): ZWEI:COM-GET-NEW-MAIL-FROM-INBOX

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0):  (P.C. = 10)
   Arg 0 (**DEFSELECT-OP**): :MENU
   Arg 1 (ITEM): ("Get inbox" . ZWEI:COM-GET-NEW-MAIL-FROM-INBOX)
   Arg 2 (CH): 4
   Arg 3 (WINDOW): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 5 2600741 exposed>

Rest of stack:
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 141)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 47)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 52)
SI:PROCESS-TOP-LEVEL:  (P.C. = 53)
30-Nov-84 21:55:34-EST,527;000000000001
Received: from MIT-MC by MIT-OZ via Chaosnet; 30 Nov 84 21:55-EST
Date: Friday, 30 November 1984, 21:54-EST
From: Gavan Duffy <GAVAN at MIT-OZ>
To: BUG-ZMAIL at MIT-OZ

In Symbolics 3600 System 242.356, Hardcopy 20.10,
Experimental RELATUS 131.126, FEP 22, on Lisp Machine Jim Morrison:

In ZMAIL, experimental configuration, after clicking on view, the mail was
viewed and the binding stack overflowed.  Completely wedged out (except the
clock was running).  Only way out was a warm boot from the cold load stream.
16-Dec-84 15:37:22-EST,673;000000000001
Received: from SANCHO-PANZA by MIT-OZ via Chaosnet; 16 Dec 84 15:37-EST
Date: Sunday, 16 December 1984, 15:35-EST
From: Christopher Eliot <CRE at SANCHO-PANZA>
Subject: Can't Expunge and save ... while inmput is in progress.
To: BUG-ZMAIL at MIT-OZ
Cc: cre at SANCHO-PANZA

In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Sancho Panza:

TWIMC,
	This bothers me quite a bit.  I think that I should be able to type "S" at Zmail to 
save my mail, then select another program and do something else while zmail is writing the mail
file.  However, Zmail hangs when it is not selected thus forcing me to sit and watch it doing I/O.
17-Dec-84 12:53:04-EST,1104;000000000001
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 17 Dec 84 12:48-EST
Received: from SCRC-THAMES by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 144394; Mon 17-Dec-84 10:41:44-EST
Date: Monday, 17 December 1984, 10:40-EST
From: Scott McKay <SWM at SCRC-QUABBIN>
Subject: Can't Expunge and save ... while inmput is in progress.
To: CRE at SANCHO-PANZA, BUG-ZMAIL at MIT-OZ
In-Reply-To: The message of 16 Dec 84 15:35-EST from Christopher Eliot <CRE at SANCHO-PANZA>
Message-ID: <841217104025.3.SWM@THAMES.SCRC.Symbolics.COM>

    Date: Sunday, 16 December 1984, 15:35-EST
    From: Christopher Eliot <CRE at SANCHO-PANZA>

    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Sancho Panza:

    TWIMC,
	    This bothers me quite a bit.  I think that I should be able to type "S" at Zmail to 
    save my mail, then select another program and do something else while zmail is writing the mail
    file.  However, Zmail hangs when it is not selected thus forcing me to sit and watch it doing I/O.

This works fine in Rel6.  I do it all the time.
17-Dec-84 12:59:18-EST,1360;000000000001
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 17 Dec 84 12:59-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 144495; Mon 17-Dec-84 12:41:49-EST
Date: Monday, 17 December 1984, 12:45-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: Can't Expunge and save ... while inmput is in progress.
To: CRE at SANCHO-PANZA
cc: BUG-ZMAIL at MIT-OZ
In-Reply-To: The message of 16 Dec 84 15:35-EST from Christopher Eliot <CRE at SANCHO-PANZA>
Message-ID: <841217124559.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Sunday, 16 December 1984, 15:35-EST
    From: Christopher Eliot <CRE at SANCHO-PANZA>

    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Sancho Panza:

    TWIMC,
	    This bothers me quite a bit.  I think that I should be able to type "S" at Zmail to 
    save my mail, then select another program and do something else while zmail is writing the mail
    file.  However, Zmail hangs when it is not selected thus forcing me to sit and watch it doing I/O.

What are you trying to do?  If you want it to save just as soon as input
is complete, ALWAYS, then just set it to do background saves (the
question "Automatically save buffer after reading inbox" in the Profile
CVV menu).  These will happen automatically whether Zmail is selected or
not.
20-Dec-84 15:59:17-EST,2434;000000000001
Received: from MIT-TELLURIDE by MIT-OZ via Chaosnet; 20 Dec 84 15:59-EST
Date: Thursday, 20 December 1984, 15:55-EST
From:  <CRE at SANCHO-PANZA>
Subject: Can't Expunge and save ... while inmput is in progress.
To: DODDS at SCRC-TENEX, CRE at SANCHO-PANZA
Cc: BUG-ZMAIL at MIT-OZ, cre at SANCHO-PANZA
In-reply-to: <841217124559.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Received: from SCRC-STONY-BROOK by SANCHO-PANZA via CHAOS with CHAOS-MAIL; Mon 17-Dec-84 22:59:29-EST
    Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 144495; Mon 17-Dec-84 12:41:49-EST
    Date: Monday, 17 December 1984, 12:45-EST
    From: Doug Dodds <DODDS at SCRC-TENEX>
    Subject: Can't Expunge and save ... while inmput is in progress.
    To: CRE at SANCHO-PANZA
    cc: BUG-ZMAIL at MIT-OZ
    In-Reply-To: The message of 16 Dec 84 15:35-EST from Christopher Eliot <CRE at SANCHO-PANZA>
    Message-ID: <841217124559.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

	Date: Sunday, 16 December 1984, 15:35-EST
	From: Christopher Eliot <CRE at SANCHO-PANZA>

	In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Sancho Panza:

	TWIMC,
		This bothers me quite a bit.  I think that I should be able to type "S" at Zmail to 
	save my mail, then select another program and do something else while zmail is writing the mail
	file.  However, Zmail hangs when it is not selected thus forcing me to sit and watch it doing I/O.

    What are you trying to do?  If you want it to save just as soon as input
    is complete, ALWAYS, then just set it to do background saves (the
    question "Automatically save buffer after reading inbox" in the Profile
    CVV menu).  These will happen automatically whether Zmail is selected or
    not.

I definitely don't want it to always save when input is complete, but I
always want to be able to explicitly tell it to save my mail Currently
it discards an "S" command if input is in progress.  I would even be
willing to switch to another window and do something else while it is
reading my mail file, but the mailer stops reading it when de-selected.
The net result is that the mailer locks down the console for the time it
takes to read my mail file when it should not have to.  Instead it could
(a) save the "S" command until it can be processed or (b) read the mail
file in at low priority even when de-selected or both.
20-Dec-84 22:31:03-EST,3433;000000000001
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 20 Dec 84 22:27-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 147537; Thu 20-Dec-84 22:25:06-EST
Date: Thursday, 20 December 1984, 22:23-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: Can't Expunge and save ... while inmput is in progress.
To: CRE at SANCHO-PANZA
cc: BUG-ZMAIL at MIT-OZ
In-Reply-To: The message of 20 Dec 84 15:55-EST from CRE at SANCHO-PANZA
Message-ID: <841220222349.0.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thursday, 20 December 1984, 15:55-EST
    From:  <CRE at SANCHO-PANZA>

	Date: Monday, 17 December 1984, 12:45-EST
	From: Doug Dodds <DODDS at SCRC-TENEX>

	    Date: Sunday, 16 December 1984, 15:35-EST
	    From: Christopher Eliot <CRE at SANCHO-PANZA>

	    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Sancho Panza:

	    TWIMC,
		    This bothers me quite a bit.  I think that I should be able to type "S" at Zmail to 
	    save my mail, then select another program and do something else while zmail is writing the mail
	    file.  However, Zmail hangs when it is not selected thus forcing me to sit and watch it doing I/O.

	What are you trying to do?  If you want it to save just as soon as input
	is complete, ALWAYS, then just set it to do background saves (the
	question "Automatically save buffer after reading inbox" in the Profile
	CVV menu).  These will happen automatically whether Zmail is selected or
	not.

    I definitely don't want it to always save when input is complete, but I
    always want to be able to explicitly tell it to save my mail Currently
    it discards an "S" command if input is in progress.  I would even be
    willing to switch to another window and do something else while it is
    reading my mail file, but the mailer 
Nit-pick: this is Zmail, not the mailer.  It's a mail reader/creator.
The Mailer is a separate system.
					 stops reading it when de-selected.
    The net result is that the mailer locks down the console for the time it
    takes to read my mail file when it should not have to.  Instead it could
    (a) save the "S" command until it can be processed or (b) read the mail
    file in at low priority even when de-selected or both.

Ah, now I see what the problem is, and it's still true in the
development system.  (First, the S has to be discarded, in the current
state of things, to prevent horrible things from happening if it were to
try to do a save before input is finished.  There are windows in the
foreground-background interaction that are not well understood.)  

But you can have the (b) behavior, as most people do.  Do either or both
of the following:

  (setq zwei:*hang-background-process-when-deexposed* nil)

in your init file will do it; and you can toggle this variable with the
Zmail command m-X Enable Background Process When Deexposed.  With the
variable set to nil, the mailbox and inbox will be read in the
background at reduced priority, even when Zmail is deexposed.

What amazes me is that the default setting of that variable is still T.
This dates from before reduced priority and other improvements were
installed in Zmail.  I guess it wasn't noticed because almost everybody
has by now setq'd that variable in their init files.  Sorry you had to
find this out the hard way.

Fixed in Release 6.
 3-Jan-85 19:12:25-EST,702;000000000001
Received: from MIT-GSTAAD by MIT-OZ via Chaosnet; 3 Jan 85 19:12-EST
Date: Thursday, 3 January 1985, 19:13-EST
From: Richard E. Zippel <RZ at MIT-MC>
Subject: Moving of messages
To: BUG-ZMAIL at MIT-OZ

In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10,
Experimental Schema 60.0, FEP 24, on GSTAAD:

I occaisionally move message to other mail files with the mouse and
sometimes move the wrong message.  It's nice that the ZMAIL tells you,
in the echo area, when it has finished moving the message.  It sure
would be nicer if it told you which message got moved.  E.g.,

Moved message #113 to file vx:/usr/...

Instead of 

Moved message to  file vx:/usr/...

Or what ever.
 7-Jan-85 10:42:09-EST,1295;000000000001
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 7 Jan 85 10:42-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 153797; Mon 7-Jan-85 10:42:29-EST
Date: Monday, 7 January 1985, 10:41-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: Moving of messages
To: RZ at MIT-MC
cc: BUG-ZMAIL at MIT-OZ
In-Reply-To: The message of 3 Jan 85 19:13-EST from Richard E. Zippel <RZ at MIT-MC>
Message-ID: <850107104110.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thursday, 3 January 1985, 19:13-EST
    From: Richard E. Zippel <RZ at MIT-MC>

    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10,
    Experimental Schema 60.0, FEP 24, on GSTAAD:

    I occaisionally move message to other mail files with the mouse and
    sometimes move the wrong message.  It's nice that the ZMAIL tells you,
    in the echo area, when it has finished moving the message.  It sure
    would be nicer if it told you which message got moved.  E.g.,

    Moved message #113 to file vx:/usr/...

    Instead of 

    Moved message to  file vx:/usr/...

    Or what ever.

Good suggestion.  It is a bandaid, pending more thorough user-interface
work, but this has been added to the development system, and should be
in the upcoming release.
13-Jan-85 05:25:49-EST,496;000000000001
Received: from MIT-MC by MIT-OZ via Chaosnet; 13 Jan 85 05:25-EST
Date: Sunday, 13 January 1985, 05:26-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: sugested simple improvements
To: BUG-ZMAIL at MIT-OZ

In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 22, on Lisp Machine Sid Vicious:

How about the babyl "\" command?

How about completion in the "l" command (a la Babyl).  By the way, if
you type l and then <help>, you get useless mouse documentation.

13-Jan-85 20:02:03-EST,1494;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 13 Jan 85 20:01-EST
Date: 13 January 1985 20:00-EST
From: Howard D. Trachtman <HDT @ MIT-MC>
Subject:  Just a hunch...
To: Bug-ZMail @ MIT-OZ
cc: Hdt @ MIT-OZ

	Um, I haven't done this yet, but I'm wondering if there is a way
to do this so that I don't get clobbered.  I have a particular INBOX
which primarily gets archives.  I want to undigestify each messge
if possible "regardless" when it comes in.  I can right the required 
filters, etc. myself; but I am concerned about the "speed" if for example.
I have 10 messages in my old mail file, and 5 new digests.
If I am reading in the digest in sequential order, I would think that
digets #1 gets spewed into (say) messages 11-15; causing my last 4 messages
to get renumbered.  If there are a lot of new digests, this might be a
screw, in that it would seem to take forever.

Also, what is the "preferred or advertised" means for letting ZMAIL
convert my RMAIL file into a BABYL file format.  My biggest gripe with
ZMAIL right now is the lack of functionality provided by the I command
in Babyl.  For example, when MC was flakey, I managed to read in my 
BABYL and inbox, but couldn't right them out.  I had to kludge to
save them on EE when EE was up, and it took much more effort for
me to convince ZMail to write the file out to MC when MC is back.

I can't even resist a silly idea for USER-defined filters; a special form
like (WITHOUT-UPDATING-ZMAIL-DISPLAY...
13-Jan-85 22:52:40-EST,6604;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 13 Jan 85 22:52-EST
Date: Sunday, 13 January 1985, 22:51-EST
From: Howard D. Trachtman <Hdt at MIT-MC>
Subject: weird zmailness
To: BUG-zmail at MIT-OZ
CC: hdt at MIT-MC

In System 98.80, CADR 3.10, ZMail 53.19, MIT-Specific 22.5,
microcode 309, ZM MIT d, on Arthur Dent:

A couple of gratitious little bugs, read closely.

I typed (zmail "oz:mc:sipb;hdt rmail") from a lisp listener and walked away.
When I came back a long time later, the who line only showed 23% of the file read in,
and no lights indicating that more files were being read in.  The counter said 
53/??? messages read in.  Sure enough 10j jumped ok.   999J didn't do ANYTHING, not even
beep or typein-line something.   I then typed G or something, and I got stuck in
file lock.   I did control-meta-break to enter the debugger.  Perhaps a kind of
"emergency break" on the Other or somewhere on the zmail Menu would be helpful.
* This emergency break could also provide for certain options like:
   1)  Run the equivlent of salvage-zmail
   2) let you specify differnt file names in a better way
   3) say to reset the current zmail user

Then, certain relevent debugging info could be perserved, like which characters I 
actually typed.

The zmail Menu concept is also a problem when your mouse gets wedged.  Since the 
ZMail menu is relatively fixed, perhaps just some ZMail command that did something 
simple like say "pretend the mouse is moved over to the next menu choice to
the left/up/down/right/abort" via a keystroke.
not a good idea.

Anyway, I never typed anything wierd at the machine; yet it still has read
only 23% or my rmail file.

Backtrace from the debugger:

PROCESS-WAIT (P.C. = 44)

 Arg 0 (WHOSTATE): "Lock"
 Arg 1 (FUNCTION): #<DTP-FEF-POINTER (:INTERNAL PROCESS-LOCK 1) 2434275>
 Rest arg (ARGUMENTS): (#<ZMAIL-BACKGROUND-PROCESS Zmail background 36052100> #<DTP-LOCATIVE 41471224>)
Local 1 (STATE): 7


PROCESS-LOCK (P.C. = 123)

 Arg 0 (LOCATIVE-POINTER): #<DTP-LOCATIVE 41471224>
   --Defaulted args:--
 Arg 1 (LOCK-VALUE): #<PROCESS Main ZMail window 36052050>
 Arg 2 (WHOSTATE): "Lock"
 Arg 3 (TIMEOUT): NIL
Local 0 (LOCKER): #<ZMAIL-BACKGROUND-PROCESS Zmail background 36052100>


(:METHOD ZWEI:ZMAIL-DISK-BUFFER :READ-NEXT-MSG) (P.C. = 255)
  (SELF is #<RMAIL-FILE-BUFFER "HDT RMAIL SIPB; MC:" 41471205>)

 Arg 0 (OPERATION): :READ-NEXT-MSG
   --Defaulted args:--
 Arg 1 (NMSGS): 1
Local 0 (EOF): NIL
Local 1: #<DTP-LOCATIVE 41471224>
Local 2: NIL
Local 3 (START): NIL
Local 4 (LINE-WAITING-FLAG): NIL
Local 5 (TEST-FUNCTION): NIL
Local 6 (END-LINE): NIL
Local 7 (LINE): NIL
Local 8 (LENGTH): NIL
Local 9 (END-IDX): NIL
Local 10 (MSG-REAL-START-BP): NIL
Local 11 (STATE): NIL
Local 12 (I): NIL
Local 13 (MSG-REAL-INTERVAL): NIL
Local 14 (MSG-INTERVAL): NIL
Local 15: NIL
Local 16 (LINE): NIL
Local 17 (LAST): NIL
Local 18 (INFS): NIL
Local 19 (LAST-BP-0): NIL
Local 20 (LAST-BP-1): NIL


ZWEI:ZMAIL-SELECT-NEXT-MSG (P.C. = 114)

 Arg 0 (NO-DELETED): T
 Arg 1 (NO-ERROR-P): NIL
 Arg 2 (TIMES): 1
Local 0 (ARRAY): #<ART-Q-100 41471256>
Local 1 (N): 72
Local 2 (NMSGS): 72
Local 3 (NTIMES): 1
Local 4 (OK-IDX): NIL


ZWEI:COM-ZMAIL-NEXT-OR-PREVIOUS-INTERNAL (P.C. = 147)

 Arg 0 (KEY): :NEXT-UNDELETED
Local 0 (UNDELETED-KEYWORDS): (:FIRST-UNDELETED :NEXT-UNDELETED :LAST-UNDELETED :PREVIOUS-UNDELETED)
Local 1 (FIRST-KEYWORDS): (:FIRST :FIRST-UNSEEN :FIRST-UNDELETED)
Local 2 (LAST-KEYWORDS): (:LAST :LAST-UNSEEN :LAST-UNDELETED)
Local 3 (FORWARD-KEYWORDS): (:NEXT :NEXT-UNDELETED :FIRST :FIRST-UNDELETED ...)
Local 4 (UNSEEN-KEYWORDS): (:NEXT-UNSEEN :FIRST-UNSEEN :LAST-UNSEEN :PREVIOUS-UNSEEN)


ZWEI:COM-ZMAIL-NEXT (P.C. = 72)

Local 0 (MODE): :NEXT-UNDELETED


ZWEI:COMMAND-EXECUTE (P.C. = 115)

 Arg 0 (COMMAND): ZWEI:COM-ZMAIL-NEXT
 Arg 1 (CHAR): 156
   --Defaulted args:--
 Arg 2 (PREFIX-CHAR): NIL
 Arg 3 (HOOK-LIST): NIL
Local 0 (HOOK-SUCCESS): T
Local 1: NIL
Local 2 (HOOK): NIL


ZWEI:ZMAIL-COMMAND-EXECUTE (P.C. = 27)

 Arg 0 (*CURRENT-COMMAND*): ZWEI:COM-ZMAIL-NEXT


(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR) (P.C. = 40)
  (SELF is #<ZMAIL-FRAME Main ZMail window 3402410 exposed>)

 Arg 0 (OPERATION): :PROCESS-COMMAND-CHAR
 Arg 1 (CH): 156


(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP) (P.C. = 257)
  (SELF is #<ZMAIL-FRAME Main ZMail window 3402410 exposed>)

 Arg 0 (OPERATION): :COMMAND-LOOP
Local 0: ("Return to ZMAIL command loop.")
Local 1: ((SYSTEM:ABORT ERROR) ("Return to ZMAIL command loop.") T ("Return to ZMAIL command loop.") ...)
Local 2 (RESPONSE): (ZWEI:BACKGROUND ZWEI:MSGS-LOADED #<RMAIL-FILE-BUFFER "HDT RMAIL SIPB; MC:" 41471205> 63 ...)
Local 3 (DEGREE): 5


(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) 0) (P.C. = 44)

 Rest arg (.DAEMON-CALLER-ARGS.): (:COMMAND-LOOP)
Local 1 (.DAEMON-MAPPING-TABLE.): #<ART-16B-15 23636222>


FUNCALL (P.C. = 25)

 Arg 0 (FN): #<DTP-FEF-POINTER (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) 0) 30260335>
 Rest arg (ARGS): (:COMMAND-LOOP)


(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :AROUND :COMMAND-LOOP) (P.C. = 57)
  (SELF is #<ZMAIL-FRAME Main ZMail window 3402410 exposed>)

 Arg 0 (OPERATION): :COMMAND-LOOP
 Arg 1 (CONT): #<DTP-FEF-POINTER (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) 0) 30260335>
 Arg 2 (MT): #<ART-16B-15 23636222>
 Arg 3 (ARGS): (:COMMAND-LOOP)
   --Defaulted args:--
 Arg 4 (EDITOR-CLOSURE-1): NIL
 Rest arg (IGNORE): NIL
Local 1: (ZWEI:UNKNOWN-SPECIAL-COMMAND ZWEI:ZMAIL-COMMAND-LOOP-UNKNOWN-SPECIAL-COMMAND)
Local 2: ((ZWEI:UNKNOWN-SPECIAL-COMMAND ZWEI:ZMAIL-COMMAND-LOOP-UNKNOWN-SPECIAL-COMMAND))


(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) (P.C. = 43)
  (SELF is #<ZMAIL-FRAME Main ZMail window 3402410 exposed>)

 Rest arg (.DAEMON-CALLER-ARGS.): (:COMMAND-LOOP)
Local 1 (.DAEMON-MAPPING-TABLE.): #<ART-16B-15 23636222>


ZWEI:ZMAIL-PROCESS-TOP-LEVEL (P.C. = 115)

 Arg 0 (WINDOW): #<ZMAIL-FRAME Main ZMail window 3402410 exposed>


SI:PROCESS-TOP-LEVEL (P.C. = 246)

 Arg 0 (IGNORE): NIL
Local 0: ("Reset and arrest process ~A." "Main ZMail window")
Local 1: (CONDITION ("Reset and arrest process ~A." "Main ZMail window") T ("Reset and arrest process ~A." "Main ZMail window") ...)
Local 2: ("Restart process ~A." "Main ZMail window")
Local 3: ((SYSTEM:ABORT CONDITION) ("Restart process ~A." "Main ZMail window") T ("Restart process ~A." "Main ZMail window") ...)
Local 4 (IGNORE): NIL
13-Jan-85 23:55:36-EST,5305;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 13 Jan 85 23:55-EST
Date: Sunday, 13 January 1985, 23:54-EST
From: Howard D. Trachtman <Hdt at MIT-MC>
To: BUG-Zmail at MIT-OZ
CC: Hdt at MC

In System 98.80, CADR 3.10, ZMail 53.19, MIT-Specific 22.5,
microcode 309, ZM MIT d, on Arthur Dent:


I did (chaos:reset)
      (zwei:reset-zmail-user)
      (zmail)

Sometime after my last message, I believe I did a system-control-M

In zmail I did get new mail (clicked) and specified mc:sipb;hdt rmail.

Went into Lock state again, then process KBD SYS got an error.   Here it is.

>>TRAP 17443 (TRANS-TRAP)
The variable ZWEI:*PROFILE-EDITOR-WINDOW* is unbound.
Backtrace from the debugger:

(:METHOD ZWEI:ZMAIL-PROFILE-FRAME :AFTER :INIT) (P.C. = 61)
  (SELF is #<ZMAIL-PROFILE-FRAME Zmail Profile Frame 2 3435514 deactivated>)

 Arg 0 (OPERATION): :INIT
 Arg 1 (IGNORE): #<DTP-LOCATIVE 3460532>


(:INTERNAL (:METHOD ZWEI:ZMAIL-PROFILE-FRAME :COMBINED :INIT) 0) (P.C. = 155)

 Rest arg (.DAEMON-CALLER-ARGS.): (:INIT #<DTP-LOCATIVE 3460532>)
Local 1 (.DAEMON-MAPPING-TABLE.): #<ART-16B-6 23632535>
Local 2 (.VAL1.): #<ZMAIL-PROFILE-FRAME Zmail Profile Frame 2 3435514 deactivated>
Local 3 (.VAL2.): NIL
Local 4 (.VAL3.): NIL


(:METHOD TV:SHEET :INVERSE-AROUND :INIT) (P.C. = 140)
  (SELF is #<ZMAIL-PROFILE-FRAME Zmail Profile Frame 2 3435514 deactivated>)

 Arg 0 (OPERATION): :INIT
 Arg 1 (CONT): #<DTP-FEF-POINTER (:INTERNAL (:METHOD ZWEI:ZMAIL-PROFILE-FRAME :COMBINED :INIT) 0) 30257642>
 Arg 2 (MT): #<ART-16B-6 23632535>
 Arg 3 (ARGS): (:INIT #<DTP-LOCATIVE 3460532>)
 Arg 4 (INIT-PLIST): #<DTP-LOCATIVE 3460532>
Local 0 (.QUEUE-LEFT.): T
Local 1 (.OLD.OUTPUT.HOLD.): NIL
Local 2 (EXPOSE-P): NIL
Local 3: NIL
Local 4 (E): NIL


(:METHOD ZWEI:ZMAIL-PROFILE-FRAME :COMBINED :INIT) (P.C. = 43)
  (SELF is #<ZMAIL-PROFILE-FRAME Zmail Profile Frame 2 3435514 deactivated>)

 Rest arg (.DAEMON-CALLER-ARGS.): (:INIT #<DTP-LOCATIVE 3460532>)
Local 1 (.DAEMON-MAPPING-TABLE.): #<ART-16B-6 23632535>


INSTANTIATE-FLAVOR (P.C. = 523)

 Arg 0 (FLAVOR-NAME): ZWEI:ZMAIL-PROFILE-FRAME
 Arg 1 (INIT-PLIST): #<DTP-LOCATIVE 3460532>
 Arg 2 (SEND-INIT-MESSAGE-P): T
   --Defaulted args:--
 Arg 3 (RETURN-UNHANDLED-KEYWORDS-P): NIL
 Arg 4 (AREA-TO-CONS-INSTANCE-IN): 63
Local 0 (FL): #<FLAVOR ZWEI:ZMAIL-PROFILE-FRAME 23553334>
Local 1 (UNHANDLED-KEYWORDS): NIL
Local 2 (INSTANCE): #<ZMAIL-PROFILE-FRAME Zmail Profile Frame 2 3435514 deactivated>
Local 3 (VARS): (TV:SCREEN-ARRAY TV:LOCATIONS-PER-LINE TV:OLD-SCREEN-ARRAY TV:BIT-ARRAY ...)
Local 4 (NEW-PLIST): (:EDITOR-CLOSURE-VARIABLES (** ** ** ** ...) :BLINKER-P NIL ...)
Local 5 (TEM): NIL
Local 6 (MAP-RESULT): NIL
Local 7 (MAP-TEMP): #<DTP-LOCATIVE 3460534>
Local 8 (MAP-LOCAL-0): NIL
Local 9 (KEYWORD): NIL
Local 10 (MISSING-KEYWORDS): NIL
Local 11 (V): NIL
Local 12 (I): 73
Local 13 (VAR-KEYWORDS): (NIL NIL NIL :BIT-ARRAY ...)
Local 14 (REMAINING-KEYWORDS): (:ACTIVATE-P :AREA :ASYNCHRONOUS-CHARACTERS :BACKSPACE-NOT-OVERPRINTING-FLAG ...)
Local 15 (PL): NIL
Local 16 (INDEX): 53
Local 17: NIL
Local 18 (D): (53 NIL)


TV:MAKE-WINDOW (P.C. = 26)

 Arg 0 (FLAVOR-NAME): ZWEI:ZMAIL-PROFILE-FRAME
 Rest arg (OPTIONS): (:SUPERIOR #<ZMAIL-FRAME Zmail Frame 1 3431010 deactivated> :IO-BUFFER #<TV:IO-BUFFER 42276066: empty, State: NIL>)
Local 1 (PLIST): #<DTP-LOCATIVE 3460513>


(:METHOD TV:CONSTRAINT-FRAME-WITH-SHARED-IO-BUFFER :CREATE-PANE) (P.C. = 42)
  (SELF is #<ZMAIL-FRAME Zmail Frame 1 3431010 deactivated>)

 Arg 0 (OPERATION): :CREATE-PANE
 Arg 1 (IGNORE): ZWEI:PROFILE-WINDOW
 Arg 2 (FLAVOR): ZWEI:ZMAIL-PROFILE-FRAME
 Rest arg (OPTIONS): NIL


TV:CONSTRAINT-FRAME-WINDOWS (P.C. = 43)

 Arg 0 (DESCS): ((ZWEI:MODE-LINE-WINDOW ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE :HEIGHT 65 ...) (ZWEI:MSG-WINDOW ZWEI:ZMAIL-WINDOW :LABEL "Message" ...) (ZWEI:DRAFT-HEADER-WINDOW ZWEI:ZMAIL-WINDOW :LABEL "Headers") (ZWEI:DRAFT-TEXT-WINDOW ZWEI:ZMAIL-WINDOW :LABEL "Mail") ...)
Local 0 (PARSED): ((ZWEI:FILTER-WINDOW . #<ZMAIL-FILTER-FRAME Zmail Filter Frame 2 3433167 deactivated>) (ZWEI:SUMMARY-WINDOW . #<ZMAIL-SUMMARY-SCROLL-WINDOW Zmail Summary Scroll Window 2 3432665 deactivated>) (ZWEI:DRAFT-TEXT-WINDOW . #<ZMAIL-WINDOW Zmail Window 9 3432346 deactivated>) (ZWEI:DRAFT-HEADER-WINDOW . #<ZMAIL-WINDOW Zmail Window 8 3432027 deactivated>) ...)
Local 1: ((ZWEI:PROFILE-WINDOW ZWEI:ZMAIL-PROFILE-FRAME) (ZWEI:PROFILE-EDITOR-WINDOW ZWEI:ZMAIL-WINDOW :LABEL "Profile" ...) (ZWEI:COMMAND-MENU ZWEI:ZMAIL-MAIN-COMMAND-MENU-PANE :COLUMNS 5 ...) (ZWEI:NO-FILTER-COMMAND-MENU ZWEI:ZMAIL-MAIN-COMMAND-MENU-PANE :COLUMNS 6 ...) ...)
Local 2 (DESC): (ZWEI:PROFILE-WINDOW ZWEI:ZMAIL-PROFILE-FRAME)


TV:CONSTRAINT-FRAME-PROCESS-CONSTRAINTS (P.C. = 60)

 Rest arg (IGNORE): NIL
Local 1: NIL
Local 2 (CONSTR): NIL


Remainder of stack:

(:METHOD TV:BASIC-CONSTRAINT-FRAME :AFTER :INIT) (P.C. = 43)
(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :INIT) 0) (P.C. = 154)
(:METHOD TV:SHEET :INVERSE-AROUND :INIT) (P.C. = 140)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :INIT) (P.C. = 43)
INSTANTIATE-FLAVOR (P.C. = 523)
TV:MAKE-WINDOW (P.C. = 26)
TV:KBD-SYS-1 (P.C. = 565)
SI:PROCESS-RUN-FUNCTION-INTERNAL (P.C. = 100)
SI:PROCESS-TOP-LEVEL (P.C. = 246)
14-Jan-85 01:42:17-EST,1433;000000000000
Mail-From: ZZZ.RLK created at 14-Jan-85 01:42:07
Date: Mon, 14 Jan 1985  01:42 EST
Message-ID: <ZZZ.RLK.12079406577.BABYL@MIT-OZ>
From: "Robert L. Krawitz" <ZZZ.RLK@MIT-OZ>
To:   bug-zmail@MIT-OZ
cc:   rlk@MIT-OZ
Subject: feature-zmail doesn't exist, so...

It's impossible to do anything on zmail without a mouse -- i. e. it's
weaker than babyl, even.

There's no i command, to read in a new file, and there's no 1g to get
mail from any mail file.  These are useful commands, particularly in
conjunction with multiple babyl files.

Also the business of saving mail in things like
-temporary-file-.number causes problems often, like when things don't
save well, such as blown quotas and the like.

Also when the buffer gets totally full (whostate is buffer full) it
tends to do very nasty things, like nothing at all.  And often the
mouse won't do anything except move around, and even the system key
doesn't work.  Which generally means that in this state I can't send a
bug report that means anything.  All these seem to occur violently in
whatever zmail runs in 98.80.  Don't say use 99; the EE machines can't
because they don't have enough control memory, so we have to use 98.

The buffer full tends to occur when I have 2 or 3 huge mail files
loaded at once.  This occurs because I crash them together to form a
giant mail file that can be disposed of gracefully in a useful
fashion.

Robert^Z
14-Jan-85 09:21:06-EST,1769;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 14 Jan 85 09:20-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 158419; Mon 14-Jan-85 09:24:20-EST
Date: Monday, 14 January 1985, 09:20-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: sugested simple improvements
To: Gumby at MIT-MC
cc: BUG-ZMAIL at MIT-OZ
In-Reply-To: The message of 13 Jan 85 05:26-EST from David Vinayak Wallace <Gumby at MIT-MC>
Message-ID: <850114092043.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Sunday, 13 January 1985, 05:26-EST
    From: David Vinayak Wallace <Gumby at MIT-MC>

    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 22, on Lisp Machine Sid Vicious:

    How about the babyl "\" command?
I'm an old Hermes hacker, never learned Babyl.  What does the "\"
command do?

    How about completion in the "l" command (a la Babyl).  By the way, if
    you type l and then <help>, you get useless mouse documentation.

These two things go together.  I presume what you would like would be
being able to type a few chars and <complete> to recognize an existing
keyword, or type a new one and have it accepted.  That would be good,
and if that were done, then <help> could easily show a list of the
recognizable possibilities, as in other type-one-of-a-set contexts.

Most of this is already there in another form, of course, in the mouse
interface.  Just click right on Keywords, and you get a menu of existing
keywords, plus the "New" choice.  But the suggestion is good.

We will be revamping the interface for Zmail and other user systems for
Release 7 to have a uniform Command Processor input style.  This type of
improvement will be incorporated in that, if not in earlier tweaks.
14-Jan-85 11:27:49-EST,357;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 14 Jan 85 11:27-EST
Date: Monday, 14 January 1985, 11:26-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: ZMAIL keyboard commands
To: Robert L. Krawitz <ZZZ.RLK at MIT-OZ>
Cc: bug-zmail at MIT-OZ
In-reply-to: <ZZZ.RLK.12079406577.BABYL@MIT-OZ>

My init file has keyboard commands like babyl.
14-Jan-85 11:40:33-EST,1931;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 14 Jan 85 11:40-EST
Date: Monday, 14 January 1985, 11:39-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: your message w/Subject "sugested simple improvements" (i.e. this is a meta-message)
To: Doug Dodds <DODDS at SCRC-TENEX>
Cc: BUG-ZMAIL at MIT-OZ
In-reply-to: <850114092043.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

You have a problem with your mailer; I got your reply twice, but with
slightly different headers (so that Delete Duplicate Messages wouldn't
realise it).

However, the message-id's are identical.  Which leads me to a suggestion
(hence my sending this to bug-zmail):  Delete Duplicate Messages should
examine message-id's and use that.  Now I'm asking for things, how about
giving it three modes: examine message-id only (fast), textual
examination only (current behavior), and both?

david

ps: to help you trace your problem, here are the headers of the two messages:

Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 14 Jan 85 09:20-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 158419; Mon 14-Jan-85 09:24:20-EST
Date: Monday, 14 January 1985, 09:20-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: sugested simple improvements
To: Gumby at MIT-MC
cc: BUG-ZMAIL at MIT-OZ
In-Reply-To: The message of 13 Jan 85 05:26-EST from David Vinayak Wallace <Gumby at MIT-MC>
Message-ID: <850114092043.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 158420; Mon 14-Jan-85 09:24:24-EST
Date: Mon, 14 Jan 85 09:20 EST
From: Doug Dodds <DODDS@SCRC-QUABBIN.ARPA>
Subject: sugested simple improvements
To: Gumby@MIT-MC.ARPA
cc: BUG-ZMAIL%MIT-OZ@MIT-MC.ARPA
In-Reply-To: The message of 13 Jan 85 05:26-EST from David Vinayak Wallace <Gumby at MIT-MC>
Message-ID: <850114092043.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>
14-Jan-85 15:41:45-EST,356;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 14 Jan 85 15:35-EST
Date: Monday, 14 January 1985, 15:29-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: you don't get the -- more above -- messages when composing mail
To: BUG-ZMAIL at MIT-OZ

In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 24, on Lisp Machine John Lennon:

14-Jan-85 17:14:11-EST,2173;000000000000
Received: from MIT-ARTHUR by MIT-OZ via Chaosnet; 14 Jan 85 17:05-EST
Date: Monday, 14 January 1985, 17:04-EST
From: Robert L. Krawitz <ZZZ.RLK at MIT-OZ>
To: BUG-zmail at MIT-OZ

In System 98.80, CADR 3.10, ZMail 53.19, MIT-Specific 22.5,
microcode 309, ZM MIT d, on Arthur Dent:


Insert your description of the circumstances here:

I was sending a message to hdt.  If I can I'll forward the thing.
>>ERROR: Cannot convert NIL into a character.
Backtrace from the debugger:

CHARACTER (P.C. = 63)

 Arg 0 (X): NIL


FORMAT:FORMAT-CTL-CHARACTER (P.C. = 155)

 Arg 0 (ARG): NIL
 Arg 1 (IGNORE): NIL
Local 0 (CHNAME): NIL
Local 1 (BITS): NIL
Local 2 (STR): NIL


FORMAT:FORMAT-CTL-OP (P.C. = 63)

 Arg 0 (OP): FORMAT:C
 Arg 1 (ARGS): (NIL)
 Arg 2 (PARAMS): NIL
Local 0 (TEM): FORMAT:FORMAT-CTL-CHARACTER


FORMAT:FORMAT-CTL-STRING (P.C. = 136)

 Arg 0 (ARGS): (NIL)
 Arg 1 (CTL-STRING): "Distribution list terminated by /"~C/" rather that /";/"."
Local 0 (FORMAT-PARAMS): #<ART-Q-LIST-12 36062652>
Local 1 (TEM): FORMAT:C


FORMAT (P.C. = 177)

 Arg 0 (STREAM): FORMAT:FORMAT-STRING-STREAM
 Arg 1 (CTL-STRING): "Distribution list terminated by /"~C/" rather that /";/"."
 Rest arg (ARGS): (NIL)
Local 1: NIL


Remainder of stack:

(:METHOD CONDITION :REPORT) (P.C. = 35)
(:METHOD FERROR :COMBINED :REPORT) (P.C. = 113)
(:METHOD CONDITION :REPORT-STRING) (P.C. = 61)
ZWEI:PARSE-ADDRESSES-INTERVAL (P.C. = 133)
ZWEI:PARSE-ONE-HEADER (P.C. = 170)
ZWEI:PARSE-HEADERS-INTERVAL (P.C. = 147)
ZWEI:GET-SEND-HEADERS (P.C. = 102)
ZWEI:COM-SEND-MESSAGE (P.C. = 44)
ZWEI:COM-MAIL-END (P.C. = 27)
ZWEI:COMMAND-EXECUTE (P.C. = 115)
...
ZWEI:ZMAIL-COMMAND-EXECUTE (P.C. = 27)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR) (P.C. = 40)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP) (P.C. = 257)
(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) 0) (P.C. = 44)
FUNCALL (P.C. = 25)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :AROUND :COMMAND-LOOP) (P.C. = 57)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP) (P.C. = 43)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL (P.C. = 115)
SI:PROCESS-TOP-LEVEL (P.C. = 152)
14-Jan-85 17:14:55-EST,592;000000000000
Received: from MIT-ARTHUR by MIT-OZ via Chaosnet; 14 Jan 85 17:09-EST
Date: Monday, 14 January 1985, 17:07-EST
From: Robert L. Krawitz <ZZZ.RLK at MIT-OZ>
Subject: I still left
To: S.HDT at MIT-EECS, bug-zmail at MIT-OZ
In-reply-to: The message of 14 Jan 1985 06:25-EST from S.HDT at MIT-EECS
Message-ID: <[MIT-ARTHUR].1/14/85 17:07:41.ZZZ.RLK>

I rebooted Ford.  That didn't look too terribly weird.  When the machine
runs out of vm about all you can really do is boot it.

We warmbooted Ford and left it for you to look at.  Jsol sent you a
hello at 16:47 from mc.

Robert^Z
29-Jan-85 14:42:25-EST,687;000000000001
Received: from MIT-FORD by MIT-OZ via Chaosnet; 29 Jan 85 14:42-EST
Date: Tuesday, 29 January 1985, 14:42-EST
From: Robert L. Krawitz <ZZZ.RLK at MIT-OZ>
Subject: problems with parsing uucp (bangist) addresses
To: bug-zmail at MIT-OZ
Message-ID: <[MIT-FORD].1/29/85 14:42:30.ZZZ.RLK>

It seems that my filter named lossage (which is supposed to filter all
bandykin mail) doesn't do the right thing when mail is sent to bandykin
(or one of its many aliases) from a uucp site that has a ! in it.

For that matter, my filters to grab prog-d mail and info-cpm mail lose
under similar circumstances.  Well, actually my info-cpm filter loses
under all circumstances.

Robert^Z
29-Jan-85 17:04:46-EST,521;000000000001
Received: from MIT-MC by MIT-OZ via Chaosnet; 29 Jan 85 16:41-EST
Date: Tue, 29 Jan 85 16:32 EST
From: David Vinayak Wallace <Gumby@MC>
Subject: problems with parsing uucp (bangist) addresses
To: "Robert L. Krawitz" <ZZZ.RLK%MIT-OZ@MC>
Cc: bug-zmail%MIT-OZ@MC, Gumby@MC
In-reply-to: <[MIT-FORD].1/29/85 14:42:30.ZZZ.RLK>

In Brand S (at least) you can use  and  to get subset matching.  You
should have included your info-cpm filter if you want help with it.

Why don't you just take yourself off Bandykin?
 6-Feb-85 18:22:16-EST,442;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 6 Feb 85 18:20-EST
Date: Wednesday, 6 February 1985, 18:18-EST
From: David Chapman <Zvona at MIT-OZ>
Subject: default default for o command
To: Bug-Zmail at MIT-OZ

In Symbolics 3600 Zmail in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Jimi Hendrix:

Zmail thinks my default XMAIL file is on PIG:, even though it knows that
my mail file and babyl file and stuff are on OZ:.
 7-Feb-85 18:14:45-EST,1058;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 7 Feb 85 18:14-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 174347; Thu 7-Feb-85 17:18:51-EST
Date: Thursday, 7 February 1985, 17:15-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: default default for o command
To: Zvona at MIT-OZ
cc: Bug-Zmail at MIT-OZ
In-Reply-To: The message of 6 Feb 85 18:18-EST from David Chapman <Zvona at MIT-OZ>
Message-ID: <850207171552.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Wednesday, 6 February 1985, 18:18-EST
    From: David Chapman <Zvona at MIT-OZ>

    In Symbolics 3600 Zmail in System 242.356, Hardcopy 20.10, FEP 18, on Lisp Machine Jimi Hendrix:

    Zmail thinks my default XMAIL file is on PIG:, even though it knows that
    my mail file and babyl file and stuff are on OZ:.

The initial default for [Move(L)] or O is taken from the profile.  It's
in the profile CVV menu under the poorly worded prompt "Default file for
moving to a new file:".  Probably you have an old setting there.
 7-Feb-85 19:47:58-EST,338;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 7 Feb 85 19:47-EST
Date: Thursday, 7 February 1985, 19:39-EST
From: David Chapman <Zvona at MIT-OZ>
Subject: default default for o command
To: DODDS at SCRC-TENEX
Cc: Bug-Zmail at MIT-OZ
In-reply-to: <850207171552.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

Uh-uh.  I have no zmail init.
 7-Feb-85 22:45:29-EST,1100;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 7 Feb 85 22:45-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 174686; Thu 7-Feb-85 22:37:30-EST
Date: Thursday, 7 February 1985, 22:34-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: default default for o command
To: Zvona at MIT-OZ
cc: Bug-Zmail at MIT-OZ
In-Reply-To: The message of 7 Feb 85 19:39-EST from David Chapman <Zvona at MIT-OZ>
Message-ID: <850207223428.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thursday, 7 February 1985, 19:39-EST
    From: David Chapman <Zvona at MIT-OZ>

    Uh-uh.  I have no zmail init.

If there is no setting of *DEFAULT-MOVE-MAIL-FILE-NAME*, the initial
default move destination comes from

  (FS:MERGE-PATHNAMES USER-ID (SEND (FS:USER-HOMEDIR) ':NEW-CANONICAL-TYPE ':XMAIL))

which puts the pathname on your login host, not your mail host.

The way to override the default, of course, is to set the
*DEFAULT-MOVE-MAIL-FILE-NAME* to the pathname of your choice in your
Lispm-init, or set it up via the Zmail profile in a Zmail-init.
21-Feb-85 18:12:40-EST,523;000000000000
Received: from MIT-LENNON by MIT-OZ via Chaosnet; 21 Feb 85 18:12-EST
Date: Thursday, 21 February 1985, 18:07-EST
From: David Vinayak Wallace <Gumby at MC>
Subject: can't parse dates +xxx
To: BUG-ZMAIL at OZ

In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 24, on Lisp Machine John Lennon:

ZMAIL Can't parse messages with dates of the format "20 Feb 85 19:42 +0100"

Also, it should perhaps parse as much as it can; this sorts to the
beginning of the beffer because it has a null date.

david
21-Feb-85 22:08:46-EST,443;000000000000
Received: from MIT-LENNON by MIT-OZ via Chaosnet; 21 Feb 85 22:08-EST
Date: Thursday, 21 February 1985, 22:03-EST
From: David Vinayak Wallace <Gumby at MC>
Subject: Why is zmail sending my mail via OZ?
To: BUG-ZMAIL at OZ

In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 24, on Lisp Machine John Lennon:

Even if the mail is for MC?  My FS:USER-LOGIN-MACHINE is MC.  Even if
it's arpa mail?

This is bogus.

david
22-Feb-85 15:08:24-EST,1152;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 22 Feb 85 15:08-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 183214; Fri 22-Feb-85 13:56:10-EST
Date: Friday, 22 February 1985, 13:53-EST
From: Doug Dodds <DODDS at SCRC-TENEX>
Subject: can't parse dates +xxx
To: Gumby at MIT-MC
cc: BUG-ZMAIL at OZ
In-Reply-To: The message of 21 Feb 85 18:07-EST from David Vinayak Wallace <Gumby at MIT-MC>
Message-ID: <850222135335.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thursday, 21 February 1985, 18:07-EST
    From: David Vinayak Wallace <Gumby at MC>

    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 24, on Lisp Machine John Lennon:

    ZMAIL Can't parse messages with dates of the format "20 Feb 85 19:42 +0100"

Yes, a bad loss, as more machines are being installed outside of North
America.  This is very high on my queue to fix.

    Also, it should perhaps parse as much as it can; this sorts to the
    beginning of the beffer because it has a null date.

Well, I think the right fix is just to parse any date that a person
could parse (without guesswork).
24-Feb-85 20:19:37-EST,2508;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 24 Feb 85 20:19-EST
Received: from SCRC-MOBILE by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 184211; Sun 24-Feb-85 20:14:00-EST
Date: Sunday, 24 February 1985, 20:12-EST
From: David E. Goldfarb <DEG at SCRC-QUABBIN>
Subject: can't parse dates +xxx
To: DODDS at SCRC-TENEX, Gumby at MIT-MC
cc: BUG-ZMAIL at MIT-OZ, DEG at SCRC-QUABBIN
In-Reply-To: <850222135335.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>
Message-ID: <850224201224.0.DEG@MOBILE.SCRC.Symbolics.COM>

    Date: Friday, 22 February 1985, 13:53-EST
    From: Doug Dodds <DODDS at SCRC-TENEX>
	Date: Thursday, 21 February 1985, 18:07-EST
	From: David Vinayak Wallace <Gumby at MC>
	In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 24, on Lisp Machine John Lennon:

	ZMAIL Can't parse messages with dates of the format "20 Feb 85 19:42 +0100"

    Yes, a bad loss, as more machines are being installed outside of North
    America.  This is very high on my queue to fix.

This particular problem can be fixed (I think.. I know that it parses this
case correctly and that none of the test cases fail.  I can't 100% guarantee
that it does not break some other legal date) by adding the following
patterns to the time parser just after the other time-zone clauses (search
for "(christmas)" and put it just before that clause) in
SYS:IO1;TIMPAR.LISP.

(defun set-time-zone-from-number (number)
  (if (not (null *abs-time-zone*))
      (barf "Time zone specified twice."))
  (setq *abs-time-zone* (// number 100.)))

(defpattern main (- (fixp 4)) main
	    (time-zone)
  (set-time-zone-from-number (- (car time-zone))))

(defpattern main (+ (fixp 4)) main
	    (time-zone)
  (set-time-zone-from-number (car time-zone)))

Doug: I don't think that this should go in the sources yet since e.g., it
doesn't do the right thing for the case of "20 Feb 85 19:42 -0130" which
might be a perfectly good timespec at the Upper Slobovodia Computer Center
or some such.

Gumby:  If you want to put this in a private file, you have to patch all of
TIMPAR from the (START-PATTERNS) to the (FINISH-PATTERNS).

	Also, it should perhaps parse as much as it can; this sorts to the
	beginning of the beffer because it has a null date.

    Well, I think the right fix is just to parse any date that a person
    could parse (without guesswork).

Both of these worthwhile goals will require a complete rewrite of the
current time parser.  Someday...
25-Feb-85 08:26:19-EST,1385;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 25 Feb 85 08:26-EST
Received: from SCRC-PEACE by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 184305; Mon 25-Feb-85 08:30:19-EST
Date: Mon, 25 Feb 85 08:29 EST
From: Charles Hornig <Hornig at SCRC-STONY-BROOK>
Subject: Why is zmail sending my mail via OZ?
To: David Vinayak Wallace <Gumby at MIT-MC>, BUG-ZMAIL at OZ
In-Reply-To: The message of 21 Feb 85 22:03-EST from David Vinayak Wallace <Gumby at MIT-MC>
Message-ID: <850225082909.3.HORNIG@PEACE.SCRC.Symbolics.COM>

    Date: Thursday, 21 February 1985, 22:03-EST
    From: David Vinayak Wallace <Gumby at MC>

    In Symbolics 3600 ZMAIL in System 242.356, Hardcopy 20.10, FEP 24, on Lisp Machine John Lennon:

    Even if the mail is for MC?  My FS:USER-LOGIN-MACHINE is MC.  Even if
    it's arpa mail?

    This is bogus.

By default, Zmail always send mail to a store-and-forward mail server
at your site for later delivery.  The only store-and-forward mailers at
your local site (AI) are OZ and HTVAX.  MC is part of the MIT site.

You can override Zmail's defaults by setting ZWEI:*MAIL-NETWORK-HOST*.
If you set it to your local hosts's object (in NET:*LOCAL-HOST*) your
machine will always try to send mail directory to its destination.  If
you set it to some other host object, you machine will always use that
host as a mail server.
16-Mar-85 12:35:13-EST,1033;000000000000
Mail-From: ZZZ.RLK created at 16-Mar-85 12:35:08
Date: Sat, 16 Mar 1985  12:35 EST
Message-ID: <ZZZ.RLK.12095516239.BABYL@MIT-OZ>
Sender: ZZZ.RLK@MIT-OZ
From: "Robert L. Krawitz" <RLK@MIT-OZ>
To:   bug-zmail@MIT-OZ
Subject: [GZ: [estrin at mit-comet: bad address]]

Date: Saturday, 16 March 1985  05:59-EST
From: Gail Zacharias <GZ>
To:   Robert L. Krawitz <RLK>
Re:   [estrin at mit-comet: bad address]

    Received: from MIT-ARTHUR by MIT-OZ via Chaosnet; 15 Mar 85 17:14-EST
    Date: Friday, 15 March 1985, 17:14-EST
    From: Robert L. Krawitz <RLK at MIT-OZ>   <==============
    Subject: [estrin at mit-comet: bad address]
|   To: bug-mail at MIT-OZ, bug-hosts at MIT-OZ
|   Message-ID: <[MIT-ARTHUR].3/15/85 17:14:05.RLK>
V
Btw, this is an illegal header... The " at " syntax is not legal, and
more importantly it's no longer supported by MM (as of a few days ago),
so a lot of people wouldn't be able to reply to this message (you'd be
surprised at how many people on OZ use MM rather than Babyl).
21-Mar-85 12:20:41-EST,952;000000000000
Mail-From: GZ created at 21-Mar-85 12:20:25
Date: Thu, 21 Mar 1985  12:20 EST
Message-ID: <GZ.12096824278.BABYL@MIT-OZ>
From: Gail Zacharias <GZ@MIT-OZ>
To:   bug-zmail@MIT-OZ
Subject: [Moon: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]]

    Received: by MIT-OZ via Chaosnet; 20 Mar 85 22:52-EST
    Received: from SCRC-EUPHRATES by SCRC-VALLECITO via CHAOS with CHAOS-MAIL id 3862; Wed 20-Mar-85 22:50:28-EST
    Date: Wednesday, 20 March 1985, 22:51-EST
    From: David A. Moon <Moon at SCRC-STONY-BROOK>
    Subject: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]
    To: Robert L. Krawitz <RLK at OZ>
    cc: bug-mail at OZ, bug-lispm at OZ
    In-Reply-To: <ZZZ.RLK.12096643002.BABYL@MIT-OZ>
    Message-ID: <850320225143.3.MOON@EUPHRATES.SCRC.Symbolics.COM>

The " at " syntax is obsolete and illegal.  Please do something.  MM no
longer supports it, making it impossible for MM users to reply to these
messages.
25-Mar-85 18:42:56-EST,1502;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 25 Mar 85 18:42-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 203173; Mon 25-Mar-85 17:19:38-EST
Date: Mon, 25 Mar 85 17:20 EST
From: Doug Dodds <DODDS@SCRC-TENEX>
Subject: [Moon: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]]
To: GZ@OZ
cc: bug-zmail@OZ, Bug-Tracking-Replies@SCRC-TENEX
In-Reply-To: <GZ.12096824278.BABYL@MIT-OZ>
Disposition: COMPLETED
Category: zmail
Message-ID: <850325172034.7.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

Synopsis:  This has been done in the development system.  It is a strong
candidate for inclusion in Release 6.1.

  -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

    Date: Thu, 21 Mar 1985  12:20 EST
    From: Gail Zacharias <GZ@MIT-OZ>

	Received: by MIT-OZ via Chaosnet; 20 Mar 85 22:52-EST
	Received: from SCRC-EUPHRATES by SCRC-VALLECITO via CHAOS with CHAOS-MAIL id 3862; Wed 20-Mar-85 22:50:28-EST
	Date: Wednesday, 20 March 1985, 22:51-EST
	From: David A. Moon <Moon at SCRC-STONY-BROOK>
	Subject: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]
	To: Robert L. Krawitz <RLK at OZ>
	cc: bug-mail at OZ, bug-lispm at OZ
	In-Reply-To: <ZZZ.RLK.12096643002.BABYL@MIT-OZ>
	Message-ID: <850320225143.3.MOON@EUPHRATES.SCRC.Symbolics.COM>

    The " at " syntax is obsolete and illegal.  Please do something.  MM no
    longer supports it, making it impossible for MM users to reply to these
    messages.
25-Mar-85 18:43:09-EST,1502;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 25 Mar 85 18:43-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 203177; Mon 25-Mar-85 17:21:45-EST
Date: Mon, 25 Mar 85 17:22 EST
From: Doug Dodds <DODDS@SCRC-TENEX>
Subject: [Moon: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]]
To: GZ@OZ
cc: bug-zmail@OZ, Bug-Tracking-Replies@SCRC-TENEX
In-Reply-To: <GZ.12096824278.BABYL@MIT-OZ>
Disposition: COMPLETED
Category: zmail
Message-ID: <850325172233.8.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

Synopsis:  This has been done in the development system.  It is a strong
candidate for inclusion in Release 6.1.

  -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

    Date: Thu, 21 Mar 1985  12:20 EST
    From: Gail Zacharias <GZ@MIT-OZ>

	Received: by MIT-OZ via Chaosnet; 20 Mar 85 22:52-EST
	Received: from SCRC-EUPHRATES by SCRC-VALLECITO via CHAOS with CHAOS-MAIL id 3862; Wed 20-Mar-85 22:50:28-EST
	Date: Wednesday, 20 March 1985, 22:51-EST
	From: David A. Moon <Moon at SCRC-STONY-BROOK>
	Subject: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]
	To: Robert L. Krawitz <RLK at OZ>
	cc: bug-mail at OZ, bug-lispm at OZ
	In-Reply-To: <ZZZ.RLK.12096643002.BABYL@MIT-OZ>
	Message-ID: <850320225143.3.MOON@EUPHRATES.SCRC.Symbolics.COM>

    The " at " syntax is obsolete and illegal.  Please do something.  MM no
    longer supports it, making it impossible for MM users to reply to these
    messages.
 1-Apr-85 23:21:42-EST,2922;000000000000
Received: from MIT-APIARY-7 by MIT-OZ via Chaosnet; 1 Apr 85 23:21-EST
Date: Monday, 1 April 1985, 23:20-EST
From: Henry Lieberman <Henry at OZ>
Subject: Blowout while replying to a message
To: BUG-Zmail at OZ
Message-ID: <850401232048.2.HENRY@APIARY-7.MIT>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.5,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-7:

>>Error: The variable ZWEI:SAVED-MODE-LIST is not an instance variable of #<ZMAIL-INTERVAL "Mail" 13070220>
While in the function SET-IN-INSTANCE  ZWEI:MAKE-BUFFER-CURRENT  ZWEI:DO-IT-SELECT-BUFFER

SET-IN-INSTANCE:  (P.C. = 66)
   Arg 0 (INSTANCE): #<ZMAIL-INTERVAL "Mail" 13070220>
   Arg 1 (PTR): ZWEI:SAVED-MODE-LIST
   Local 1 (PTR): #<DTP-LOCATIVE 36412253>
   Arg 2 (VAL): ((#<AUTO-FILL-MODE 121220416> ((SETF ZWEI:*POST-COMMAND-HOOK* **))) (#<WORD-ABBREV-MODE 121220404> ((SEND ** ** **) (SEND ** ** **) (SEND ** ** **) (SEND ** ** **) (SETF ZWEI:*COMMAND-HOOK* **) (PROGN ** **))) (#<AUTO-SAVE-MODE 30233505> ((SETF ZWEI:*POST-COMMAND-HOOK* **))) (#<TEXT-MODE 121220315> ((PROGN ** **) (ZWEI:SET-CHAR-SYNTAX 1 ** 46) (ZWEI:SET-CHAR-SYNTAX 1 ** 39) (ZWEI:SET-CHAR-SYNTAX 1 ** 95))))
   Local 3 (N): NIL

ZWEI:MAKE-BUFFER-CURRENT:  (P.C. = 11)
   Arg 0 (BUFFER): #<NON-FILE-BUFFER "History" 10540050>

ZWEI:DO-IT-SELECT-BUFFER:  (P.C. = 3)  (from HENRYS-INIT: HENRY; ZTOP)
   Arg 0 (SELECTED-BUFFER): #<NON-FILE-BUFFER "History" 10540050>

ZWEI:DO-IT-SELECT-WINDOW-BUFFER:  (P.C. = 14)  (from HENRYS-INIT: HENRY; ZTOP)
   Arg 0 (BUFFER): #<NON-FILE-BUFFER "History" 10540050>

ZWEI:DO-IT-SELECT-HISTORY:  (P.C. = 3)  (from HENRYS-INIT: HENRY; ZTOP)

ZWEI:DO-IT-SWITCH-TO-HISTORY:  (P.C. = 5)  (from HENRYS-INIT: HENRY; ZTOP)
   Arg 0 (DO-IT-BUFFER): #<ZMAIL-INTERVAL "Mail" 13070220>

ZWEI:DO-IT:  (P.C. = 45)  (from HENRYS-INIT: HENRY; ZTOP)
   Arg 0 (REPRINT-FORM?): T

ZWEI:COM-DO-IT-REPRINTING:  (P.C. = 7)  (from HENRYS-INIT: HENRY; ZTOP)

Rest of stack:
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:PROCESS-COMMAND-CHAR:  (P.C. = 14)
(:METHOD ZWEI:EDITOR :EDIT):  (P.C. = 233)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :EDIT):  (P.C. = 70)
ZWEI:ZMAIL-MAIL:  (P.C. = 105)
ZWEI:CONTINUE-DRAFT-MSG:  (P.C. = 21)
ZWEI:COMPOSE-VIA-DRAFT-MSG:  (P.C. = 5)
ZWEI:FUNCALL-TEMPLATE-EXPANSION:  (P.C. = 47)
ZWEI:COMPOSE-FROM-TEMPLATE:  (P.C. = 20)
ZWEI:NORMAL-REPLY-INTERNAL:  (P.C. = 132)
ZWEI:NORMAL-REPLY:  (P.C. = 5)
ZWEI:COM-ZMAIL-REPLY:  (P.C. = 20)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
 2-Apr-85 17:51:06-EST,5026;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 2 Apr 85 17:50-EST
Received: from SANCHO-PANZA by MIT-MC via Chaosnet; 2 APR 85  17:50:17 EST
Date: Tuesday, 2 April 1985, 17:49-EST
From: Christopher Eliot <CRE at SANCHO-PANZA>
Subject: Bug
To: BUG-Zmail at OZ
Message-ID: <850402174913.3.CRE@SANCHO-PANZA.MIT>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, microcode TMC5-MIC 319,
FEP 18, on Lisp Machine Sancho Panza:

I typed "G" eventually followed by "S".

>>Error: Preparing to save buffer SANCHO:>CRE>babyl.text,
         but associated inbox SANCHO:>cre>mail.text is not awaiting save.
         Buffer status = :SAVING-REQUIRED, inbox status = :LOADING-NEW-MAIL.
While in the function ZWEI:MAIL-BUFFER-SAVE-SETUP  ZWEI:SAVE-BUFFER-INTERNAL  ZWEI:SAVE-MAIL-BUFFER

ZWEI:MAIL-BUFFER-SAVE-SETUP:  (P.C. = 35)
   Arg 0 (BUFFER): #<BABYL-BUFFER "SANCHO:>CRE>babyl.text" 12231154>
   Arg 1 (CHECK-ONLY): NIL
   Arg 2 (NO-OUTPUT): T
   Local 3: NIL
   Local 4 (OTHER): #<ITS-INBOX-BUFFER "SANCHO:>cre>mail.text" 10074022>
   Local 5 (OTHER-STATUS): :LOADING-NEW-MAIL
   Local 6 (STATUS): :SAVING-REQUIRED

ZWEI:SAVE-BUFFER-INTERNAL:  (P.C. = 32)
   Arg 0 (BUFFER): #<BABYL-BUFFER "SANCHO:>CRE>babyl.text" 12231154>
   Arg 1 (FOR-FINISH): NIL

ZWEI:SAVE-MAIL-BUFFER:  (P.C. = 111)
   Arg 0 (BUFFER): #<BABYL-BUFFER "SANCHO:>CRE>babyl.text" 12231154>
   --Defaulted args:--
   Arg 1 (FOR-FINISH): NIL

ZWEI:ZMAIL-SAVE-ALL:  (P.C. = 46)

ZWEI:COM-ZMAIL-SAVE:  (P.C. = 16)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-SAVE
   Arg 1 (CHAR): 115
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-SAVE

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-COMMAND-CHAR
   Arg 3 (CH): 115

(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (115)

(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN -- 6. IV's, 0. FL's 142611503>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0) 47674121>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 115

(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0):  (P.C. = 13)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (115)

(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 47674106>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 115

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (115)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 143)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
 4-Apr-85 10:07:03-EST,1262;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 4 Apr 85 10:06-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 208779; Thu 4-Apr-85 10:04:19-EST
Date: Thu, 4 Apr 85 10:05 EST
From: Doug Dodds <DODDS@SCRC-TENEX>
Subject: Bug
To: CRE@SANCHO-PANZA
cc: BUG-Zmail@OZ
In-Reply-To: <850402174913.3.CRE@SANCHO-PANZA.MIT>
Message-ID: <850404100537.9.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Tuesday, 2 April 1985, 17:49-EST
    From: Christopher Eliot <CRE at SANCHO-PANZA>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, microcode TMC5-MIC 319,
    FEP 18, on Lisp Machine Sancho Panza:

    I typed "G" eventually followed by "S".

    >>Error: Preparing to save buffer SANCHO:>CRE>babyl.text,
	     but associated inbox SANCHO:>cre>mail.text is not awaiting save.
	     Buffer status = :SAVING-REQUIRED, inbox status = :LOADING-NEW-MAIL.
    While in the function ZWEI:MAIL-BUFFER-SAVE-SETUP  ZWEI:SAVE-BUFFER-INTERNAL  ZWEI:SAVE-MAIL-BUFFER

Known problem, sigh.  There is a window that allows conflicting commands
to start operation when they shouldn't be allowed to, because the
background is still getting and inserting an inbox.  This is high on the
bug list.  Thanks for the report.
 5-Apr-85 15:47:53-EST,1146;000000000000
Received: from MIT-ARTHUR by MIT-OZ via Chaosnet; 5 Apr 85 15:47-EST
Date: Friday, 5 April 1985, 15:46-EST
From: Robert L. Krawitz <RLK at MIT-OZ>
Subject: LUSE!!!!!!
To: BUG-ZMAIL at MIT-OZ
Message-ID: <[MIT-ARTHUR].4/05/85 15:46:21.RLK>

In ZMAIL in System 98.80, CADR 3.10, ZMail 53.19, MIT-Specific 22.5,
microcode 309, ZM MIT d, on Arthur Dent:

There are a whole lot of features that are documented in the manual and
existed back in whatever zmail existed in sys97 that are missing.  I've
finally decided to flame.

1)  Hyper-foo commands which are supposed to frob addresses like
control-foo does to characters and meta-foo does with words.

2)  Pruning headers doesn't work.  I have the option turned on in my
profile to automagically do it a la babyl, and C-X Y doesn't prune
headers in yanked mail to boot (very cold, of course).

And if suggestions are solicited (what?  They're not?  Oh well...).

1g in babyl gets new mail from any arbitrary mail file.  None such in
Zmail -- have to read the file in and merge it manually.

I in babyl reads in a new mail file...useful if the mouse is broken.

Robert^Z
 5-Apr-85 16:55:50-EST,1359;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 5 Apr 85 16:48-EST
Received: from SCRC-PEACE by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 209868; Fri 5-Apr-85 16:24:36-EST
Date: Fri, 5 Apr 85 16:26 EST
From: Charles Hornig <Hornig@STONY-BROOK.SCRC.Symbolics.COM>
Subject: [Moon: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]]
To: Gail Zacharias <GZ@OZ.MIT.EDU>, bug-zmail@OZ.MIT.EDU
In-Reply-To: <GZ.12096824278.BABYL@MIT-OZ>
Message-ID: <850405162601.4.HORNIG@PEACE.SCRC.Symbolics.COM>

    Date: Thu, 21 Mar 1985  12:20 EST
    From: Gail Zacharias <GZ@MIT-OZ>

	Received: by MIT-OZ via Chaosnet; 20 Mar 85 22:52-EST
	Received: from SCRC-EUPHRATES by SCRC-VALLECITO via CHAOS with CHAOS-MAIL id 3862; Wed 20-Mar-85 22:50:28-EST
	Date: Wednesday, 20 March 1985, 22:51-EST
	From: David A. Moon <Moon at SCRC-STONY-BROOK>
	Subject: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]
	To: Robert L. Krawitz <RLK at OZ>
	cc: bug-mail at OZ, bug-lispm at OZ
	In-Reply-To: <ZZZ.RLK.12096643002.BABYL@MIT-OZ>
	Message-ID: <850320225143.3.MOON@EUPHRATES.SCRC.Symbolics.COM>

    The " at " syntax is obsolete and illegal.  Please do something.  MM no
    longer supports it, making it impossible for MM users to reply to these
    messages.

Is this format of header acceptable?  This is what we would like to move
to.
 6-Apr-85 01:29:04-EST,2350;000000000000
Received: from MIT-APIARY-4 by MIT-OZ via Chaosnet; 6 Apr 85 01:29-EST
Date: Saturday, 6 April 1985, 01:28-EST
From: David M. J. Saslav <saz at OZ>
Subject: filter DATE before
To: BUG-zmail at OZ
Message-ID: <850406012826.3.SAZ@APIARY-4.MIT.EDU>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-4:

I was trying to filter all messages before a certain date --
I clicked on a message to indicate that its date was the
one I wished to use as cutoff and got the following error.

dave

>>Trap: The first argument given to the SYS:LDB-INTERNAL instruction, ZWEI:MSG, was not a number.
While in the function CHAR-CODE  TIME:LEXICALLY-ANALYZE  TIME:PARSE-UNIVERSAL-TIME

CHAR-CODE:  (P.C. = 2)
   Arg 0 (CHAR): ZWEI:MSG

TIME:LEXICALLY-ANALYZE:  (P.C. = 12)
   Arg 0 (STRING): #<MSG 1000644>
   Arg 1 (START): 0
   Arg 2 (END): 10

TIME:PARSE-UNIVERSAL-TIME:  (P.C. = 156)
   Arg 0: #<MSG 1000644>
   --Defaulted args:--
   Arg 1 (START): 0
   Arg 2 (END): 10
   Arg 3 (FUTUREP): T
   Arg 4 (BASE-TIME): NIL
   Arg 5 (MUST-HAVE-TIME): NIL
   Arg 6 (DATE-MUST-HAVE-YEAR): NIL
   Arg 7 (TIME-MUST-HAVE-SECOND): NIL
   Arg 8 (DAY-MUST-BE-VALID): T

ZWEI:GET-FILTER-FUNCTION-1:  (P.C. = 441)
   Arg 0 (UNIVERSE): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 16304464>
   Arg 1 (NAME): "OZ:PS:<SAZ>SAZ.BABYL"
   Arg 2 (NEAR-MODE): (:RECTANGLE 79 609 130 625)

ZWEI:GET-FILTER-FUNCTION:  (P.C. = 14)
   Arg 0 (NEAR-MODE): (:RECTANGLE 79 609 130 625)

ZWEI:COM-ZMAIL-SURVEY:  (P.C. = 22)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-SURVEY
   Arg 1 (CHAR): (:MENU ("Survey" . ZWEI:COM-ZMAIL-SURVEY) 4 #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-SURVEY

Rest of stack:
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
 6-Apr-85 01:51:52-EST,3998;000000000000
Received: from MIT-APIARY-4 by MIT-OZ via Chaosnet; 6 Apr 85 01:51-EST
Date: Saturday, 6 April 1985, 01:51-EST
From: David M. J. Saslav <saz at OZ>
Subject: Right click on Keywords
To: BUG-ZMAIL at OZ
Message-ID: <850406015107.4.SAZ@APIARY-4.MIT.EDU>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-4:

I clicked right on keywords with one pending notification
after coming from profile and setting my own brand new
personal list of keywords to be k1,k2,k3,k4,k5,k6.
The current message I hade previously keyworded "foo"
and did not include this in my keyword list.  From looking
at the stack my guess is that having numbers in keywords
causes this breakage.  But users should be told about this, if
true.  

While I'm here, I might as well inform you all that
when you create a sequence and attempt to get all messages
after a certain date (side issue:  Is there ANY WAY to do the
same thing only BEFORE a certain date?  I can't figure it out.)
and if one types only Month Day at the ext. command window
when prompted, zmail defaults to Month the Dayth, 1986 --
and naturally finds no mail dated since then.

>>Error: The object (FUNCTION STRING-LESSP) is not a valid function
While in the function SI:DIGEST-LAMBDA  SI:APPLY-LAMBDA  SYS:CALL-FUNNY-FUNCTION

SI:DIGEST-LAMBDA:  (P.C. = 1517)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Arg 1 (ENV): NIL
   Arg 2 (NAME): NIL
   Arg 3 (INTERNAL): NIL
   Local 4 (MAP-RESULT): NIL
   Local 5 (THIS-FUNCTION): (FUNCTION STRING-LESSP)
   Local 6 (TYPE): NIL
   Local 7 (BODY): (STRING-LESSP)
   Local 8 (DEBUG-INFO): SYS:INVALID-FUNCTION
   Local 9 (LAMBDA-LIST): :FUNCTION
   Local 10 (ORIGINAL-LAMBDA-LIST): (FUNCTION STRING-LESSP)
   Local 11 (LAMBDA-INFO): #<DTP-LOCATIVE 43640420>
   Local 12 (ARGS-INFO): #<DTP-LOCATIVE 43640427>
   Local 13 (N-REQUIRED): #<DTP-ODD-PC 2170770>
   Local 14 (N-OPTIONAL): 3
   Local 15 (N-AUX): #<DTP-COMPILED-FUNCTION ERROR 6777403>
   Local 16 (BINDINGS): SYS:INVALID-FUNCTION
   Local 17 (SPECIAL): (:FUNCTION (FUNCTION STRING-LESSP))
   Local 18 (ITEM): #<INVALID-FUNCTION 22700024>
   Local 19 (DECLARATIONS): #<INVALID-FUNCTION 22700024>
   Local 20 (SPECIALS): :SIGNAL
   Local 21 (BODY): #<DTP-LOCATIVE 43640440>
   Local 22 (DOCUMENTATION): #<DTP-LOCATIVE 43640442>
   Local 23 (ADDITIONAL-INFO): #<DTP-ODD-PC 6777431>

SI:APPLY-LAMBDA:  (P.C. = 11)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Arg 1 (ARGUMENTS): ("k1" "foo")

SYS:CALL-FUNNY-FUNCTION:  (P.C. = 102)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Rest arg (ARGS): ("k1" "foo")

(FUNCTION STRING-LESSP):
   Arg 0: "k1"
   Arg 1: "foo"

(:INTERNAL SORTCAR 0):  (P.C. = 7)
   Arg 0 (X): ("k1" . :K1)
   Arg 1 (Y): ("foo" . :FOO)

SI:SORT-SHORT-LIST:  (P.C. = 20)
   Arg 0 (L): (("foo" . :FOO) ("k1" . :K1) ("k2" . :K2) ("k3" . :K3) ("k4" . :K4) ("k5" . :K5) ("k6" . :K6))
   Arg 1 (LPRED): #<DTP-COMPILED-FUNCTION (:INTERNAL SORTCAR 0) 2256443>

SORT:  (P.C. = 17)
   Arg 0 (X): (("foo" . :FOO) ("k1" . :K1) ("k2" . :K2) ("k3" . :K3) ("k4" . :K4) ("k5" . :K5) ("k6" . :K6))
   Arg 1: #<DTP-COMPILED-FUNCTION (:INTERNAL SORTCAR 0) 2256443>

SORTCAR:  (P.C. = 6)
   Arg 0 (X): (("foo" . :FOO) ("k1" . :K1) ("k2" . :K2) ("k3" . :K3) ("k4" . :K4) ("k5" . :K5) ("k6" . :K6))
   Arg 1: (FUNCTION STRING-LESSP)

Rest of stack:
ZWEI:CHOOSE-KEYWORDS:  (P.C. = 16)
ZWEI:ZMAIL-KEYWORDS-MSG:  (P.C. = 34)
ZWEI:COM-ZMAIL-KEYWORDS:  (P.C. = 13)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
 6-Apr-85 04:34:49-EST,933;000000000000
Received: from MIT-APIARY-5 by MIT-OZ via Chaosnet; 6 Apr 85 04:34-EST
Date: Saturday, 6 April 1985, 04:33-EST
From: David M. J. Saslav <saz at OZ>
Subject: profile code
To: BUG-zmail at OZ
cc: jgb at OZ
Message-ID: <850406043334.1.SAZ@APIARY-5.MIT.EDU>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-5:

after about three hours of expert debugging and grovelling in
source code, we found the following line in the code generated
when I created a new profile from the user variables menu:

(LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(QUOTE (FUNCTION STRING-LESSP)))

this is clearly what made [Map Over / Keywords (R)]
bomb out the way it did.

Someone has been sleeping on the job!  The form

(LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(FUNCTION STRING-LESSP))

did the right thing when we incorporated it into my init file.

saz and jgb
 6-Apr-85 08:53:00-EST,5603;000000000000
Received: from MIT-APIARY-4 by MIT-OZ via Chaosnet; 6 Apr 85 08:52-EST
Date: Saturday, 6 April 1985, 08:52-EST
From: David M. J. Saslav <saz at OZ>
Subject: more bugs
To: BUG-zmail at OZ
Message-ID: <850406085227.1.SAZ@APIARY-4.MIT.EDU>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-4:

modified both profile menu items "fraction of the frame taken up by summary..."
to decimal flonums < 1 --both times I got the msgs "Binding *nopoint to t --
used to be nil" and the following error immediately afterward.

I just figured out that what the automatic codewriter is doing in profile mode --
it is inserting quotes before strings.  I took out all superfluous quotes and
everything is working ok.

>>Error: Can't print #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706> readably
While in the function PRINT-NOT-READABLE  PRINT-RANDOM-OBJECT  PRINT-OBJECT

PRINT-NOT-READABLE:  (P.C. = 16)
   Arg 0 (OBJECT): #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>
   Local 1: T

PRINT-RANDOM-OBJECT:  (P.C. = 6)
   Arg 0 (EXP): #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>
   Arg 1 (STREAM): #:TERMINAL-IO-SYN-STREAM
   Arg 2 (IGNORE): NIL
   Arg 3 (I-PRINDEPTH): 0
   Arg 4 (WHICH-OPERATIONS): (:TYO :STRING-OUT :LINE-OUT :LISTEN :TYI :TYI-NO-HANG :ANY-TYI :ANY-TYI-NO-HANG :POINT :DRAW-POINT ...)

PRINT-OBJECT:  (P.C. = 476)
   Arg 0 (EXP): #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>
   Arg 1 (I-PRINDEPTH): 0
   Arg 2 (SLASHIFY-P): T
   Arg 3 (STREAM): #:TERMINAL-IO-SYN-STREAM
   --Defaulted args:--
   Arg 4 (WHICH-OPERATIONS): (:TYO :STRING-OUT :LINE-OUT :LISTEN :TYI :TYI-NO-HANG :ANY-TYI :ANY-TYI-NO-HANG :POINT :DRAW-POINT ...)

PRIN1:  (P.C. = 10)
   Arg 0 (EXP): #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>
   Arg 1 (STREAM): #:TERMINAL-IO-SYN-STREAM

FORMAT:FORMAT-CTL-ASCII:  (P.C. = 52)
   Arg 0 (ARG): #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>
   Arg 1 (PARAMS): NIL
   Arg 2 (PRIN1P): T

(:PROPERTY FORMAT:S FORMAT:CTL-ONE-ARG):  (P.C. = 5)
   Arg 0 (ARG): #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>
   Arg 1 (PARAMS): NIL

FORMAT:FORMAT-CTL-OP:  (P.C. = 21)
   Arg 0 (OP): FORMAT:S
   Arg 1 (ARGS): (#<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>)
   Arg 2 (PARAMS): NIL

FORMAT:FORMAT-CTL-STRING:  (P.C. = 101)
   Arg 0 (ARGS): (PRIN1 NIL #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>)
   Local 0 (ARGS): (#<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>)
   Arg 1: "  Binding ~S to ~S (old value was ~S)~%"

FORMAT:  (P.C. = 66)
   Arg 0 (STREAM): #:TERMINAL-IO-SYN-STREAM
   Arg 1: "  Binding ~S to ~S (old value was ~S)~%"
   Rest arg (ARGS): (PRIN1 NIL #<DTP-COMPILED-FUNCTION GRIND-TOP-LEVEL 14310706>)

PRINT-ANY-BINDING-WARNINGS:  (P.C. = 46)

DBG:DEBUGGER-TOP-LEVEL:  (P.C. = 264)
   Arg 0: #<FERROR 41224120>
   Arg 1: #<DTP-LOCATIVE 43640657>
   Arg 2: NIL
   Arg 3 (SPECIAL-COMMANDS): NIL

DBG:ENTER-DEBUGGER:  (P.C. = 16)
   Arg 0 (ERROR): #<FERROR 41224120>
   --Defaulted args:--
   Arg 1 (REASON): NIL
   Arg 2 (SPECIAL-COMMANDS): NIL

DBG:DEBUGGER-HANDLER-HANDLE-CONDITION:  (P.C. = 7)
   Arg 0 (IGNORE): :HANDLE-CONDITION
   Arg 1 (COND): #<FERROR 41224120>
   Arg 2 (IGNORE): #<DTP-LOCATIVE 57100001>

DBG:DEBUGGER-HANDLER:  (P.C. = 12)
   Arg 0 (OPERATION): :HANDLE-CONDITION
   Rest arg (SELECT-METHOD-ARGS): (#<FERROR 41224120> #<DTP-LOCATIVE 57100001>)

(:METHOD CONDITION :SIGNAL):  (P.C. = 114)
   Arg 0 (SELF): #<FERROR 41224120>
   Arg 1 (SELF-MAPPING-TABLE): CONDITION
   Arg 2 (OPERATION): :SIGNAL
   --Defaulted args:--
   Arg 3 (PROCEEDABLY): NIL

(:METHOD CONDITION :COMBINED :SIGNAL):  (P.C. = 17)
   Arg 0 (SELF): #<FERROR 41224120>
   Arg 1 (SELF-MAPPING-TABLE): CONDITION
   Arg 2 (.OPERATION.): :SIGNAL
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ERROR:  (P.C. = 55)
   Arg 0 (FLAVOR): FERROR
   Rest arg (INIT-OPTIONS): (:FORMAT-STRING "~S is not a type known to TYPEP" :FORMAT-ARGS (T))

FERROR:  (P.C. = 23)
   Arg 0 (FORMAT-STRING): "~S is not a type known to TYPEP"
   Rest arg (FORMAT-ARGS): (T)

TYPEP:  (P.C. = 165)
   Arg 0 (X): #<DTP-COMPILED-FUNCTION STRING-LESSP 2214747>
   Arg 1 (TYPE): T

TV:PRINTABLE-USER-OPTION:  (P.C. = 41)
   Arg 0 (OBJECT): #<DTP-COMPILED-FUNCTION STRING-LESSP 2214747>

WRITE-USER-OPTIONS:  (P.C. = 22)
   Arg 0 (ALIST): ((ZWEI:*KEYWORD-ALIST-SORT-PREDICATE* "Predicate for sorting keywords in keyword menu" :MENU-ALIST (("Alphabetic" :VALUE **) ("Reverse alphabetic" :VALUE **) ("None" :VALUE NIL :DOCUMENTATION "Don't sort the keywords."))) (ZWEI:*PRESERVE-MSG-REFERENCES-ACROSS-EXPUNGE* "Add header fields to other msgs when expunging msg" :BOOLEAN) (ZWEI:*DELETE-AFTER-MOVE-TO-BUFFER* "Delete message when moved into buffer" :BOOLEAN) (ZWEI:*QUERY-BEFORE-EXPUNGE* "Show headers and ask before expunging deleted messages" :BOOLEAN) (ZWEI:*FORWARDED-ADD-SUBJECT* "Forwarded messages are supplied with a subject" :BOOLEAN) (ZWEI:*ALWAYS-JUMP-AFTER-GET-NEW-MAIL-FROM-INBOX* "Move to first message even when no new mail in inbox" :BOOLEAN) (ZWEI:*ONE-WINDOW-AFTER-YANK* "Just show headers and text after yanking in message" :BOOLEAN) (ZWEI:*INHIBIT-BACKGROUND-SAVES* "Automatically save buffer after reading inbox" :INVERTED-BOOLEAN) (ZWEI:*COMPLETE-GET-INBOX-IN-BACKGROUND* "Read in inbox in the background" :BOOLEAN) (ZWEI:*INHIBIT-BACKGROUND-MAIL-CHECKS* "Periodically check for new mail in the background" :INVERTED-BOOLEAN) ...)
   Arg 1 (STREAM): #<INTERVAL-STREAM 41224106>

.
.
.
 9-Apr-85 09:34:53-EST,2745;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 9 Apr 85 09:34-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 211438; Tue 9-Apr-85 09:31:41-EST
Date: Tue, 9 Apr 85 09:31 EST
From: Doug Dodds <DODDS@SCRC-TENEX>
Subject: Right click on Keywords
To: saz@OZ
cc: BUG-ZMAIL@OZ
In-Reply-To: <850406015107.4.SAZ@APIARY-4.MIT.EDU>
Message-ID: <850409093130.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Saturday, 6 April 1985, 01:51-EST
    From: David M. J. Saslav <saz at OZ>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-4:

    I clicked right on keywords with one pending notification
    after coming from profile and setting my own brand new
    personal list of keywords to be k1,k2,k3,k4,k5,k6.
    The current message I hade previously keyworded "foo"
    and did not include this in my keyword list.  From looking
    at the stack my guess is that having numbers in keywords
    causes this breakage.  But users should be told about this, if
    true.  

The reason for this blowup is a mistake in recordiong profile
information that crept through.  It has to do with the sort predicate
used for ordering keywords (which you can set to NIL at the appropriate
profile CVV question).  A fix that will overcome this is the following
corrected function:

    (DEFUN CHOOSE-KEYWORDS (&OPTIONAL LABEL OLD-KEYWORDS &AUX NEW-KEYWORDS )
      (SEND *KEYWORD-WINDOW* ':SET-LABEL LABEL)
      (WHEN *KEYWORD-ALIST-SORT-PREDICATE*		; make it pretty
	(SETQ *KEYWORD-ALIST*
	      (SORTCAR *KEYWORD-ALIST*		;compensate for old spazz in predicate alist
		       (EVAL (EVAL *KEYWORD-ALIST-SORT-PREDICATE*))))
	(SETQ *KEYWORD-ALIST*
	      (SI:COLUMN-INVERT-LIST *KEYWORD-ALIST*
				     (CAR (SEND *KEYWORD-WINDOW* :GEOMETRY)))))
      (MULTIPLE-VALUE (*KEYWORD-ALIST* NEW-KEYWORDS)
	(SEND *KEYWORD-WINDOW* ':MULTIPLE-CHOOSE *KEYWORD-ALIST* OLD-KEYWORDS
	      (RECTANGLE-NEAR-COMMAND-MENU)))
      NEW-KEYWORDS)

    While I'm here, I might as well inform you all that
    when you create a sequence and attempt to get all messages
    after a certain date (side issue:  Is there ANY WAY to do the
    same thing only BEFORE a certain date?  I can't figure it out.)
    and if one types only Month Day at the ext. command window
    when prompted, zmail defaults to Month the Dayth, 1986 --
    and naturally finds no mail dated since then.

This is the general FUTURE-P problem.  Date parsing generally defaults
to the future in the vanilla case.  We are in the process of changing
various relevant places to default either to the past, or to the current
frame, as appropriate.
 9-Apr-85 10:17:46-EST,1079;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 9 Apr 85 10:17-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 211447; Tue 9-Apr-85 09:39:02-EST
Date: Tue, 9 Apr 85 09:38 EST
From: Doug Dodds <DODDS@SCRC-TENEX>
Subject: profile code
To: saz@OZ
cc: BUG-zmail@OZ, jgb@OZ
In-Reply-To: <850406043334.1.SAZ@APIARY-5.MIT.EDU>
Message-ID: <850409093850.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Saturday, 6 April 1985, 04:33-EST
    From: David M. J. Saslav <saz at OZ>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-5:

    after about three hours of expert debugging and grovelling in
    source code, we found the following line in the code generated
    when I created a new profile from the user variables menu:

    (LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(QUOTE (FUNCTION STRING-LESSP)))

    this is clearly what made [Map Over / Keywords (R)]
    bomb out the way it did.

See answer to previous bug report on this problem.
 9-Apr-85 18:33:02-EST,1453;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 9 Apr 85 18:32-EST
Date: Tuesday, 9 April 1985, 18:29-EST
From: Gavan Duffy <GAVAN at OZ>
Subject: Right click on Keywords
To: DODDS at SCRC-TENEX, saz at OZ
cc: BUG-ZMAIL at OZ
In-Reply-To: <850409093130.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>
Message-ID: <850409182930.4.GAVAN@MORRISON.MIT>

    Date: Tue, 9 Apr 85 09:31 EST
    From: Doug Dodds <DODDS@SCRC-TENEX>

    The reason for this blowup is a mistake in recordiong profile
    information that crept through.  It has to do with the sort predicate
    used for ordering keywords (which you can set to NIL at the appropriate
    profile CVV question).  A fix that will overcome this is the following
    corrected function:

	(DEFUN CHOOSE-KEYWORDS (&OPTIONAL LABEL OLD-KEYWORDS &AUX NEW-KEYWORDS )
	  (SEND *KEYWORD-WINDOW* ':SET-LABEL LABEL)
	  (WHEN *KEYWORD-ALIST-SORT-PREDICATE*		; make it pretty
	    (SETQ *KEYWORD-ALIST*
		  (SORTCAR *KEYWORD-ALIST*		;compensate for old spazz in predicate alist
			   (EVAL (EVAL *KEYWORD-ALIST-SORT-PREDICATE*))))
	    (SETQ *KEYWORD-ALIST*
		  (SI:COLUMN-INVERT-LIST *KEYWORD-ALIST*
					 (CAR (SEND *KEYWORD-WINDOW* :GEOMETRY)))))
	  (MULTIPLE-VALUE (*KEYWORD-ALIST* NEW-KEYWORDS)
	    (SEND *KEYWORD-WINDOW* ':MULTIPLE-CHOOSE *KEYWORD-ALIST* OLD-KEYWORDS
		  (RECTANGLE-NEAR-COMMAND-MENU)))
	  NEW-KEYWORDS)

Can't use this until SI:COLUMN-INVERT-LIST is defined.
12-Apr-85 01:09:50-EST,1290;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 12 Apr 85 01:09-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 212913; Thu 11-Apr-85 09:33:41-EST
Date: Thu, 11 Apr 85 09:33 EST
From: Doug Dodds <DODDS@SCRC-TENEX>
Subject: Right click on Keywords
To: GAVAN@OZ
cc: saz@OZ, BUG-ZMAIL@OZ
In-Reply-To: <850409182930.4.GAVAN@MORRISON.MIT>
Message-ID: <850411093345.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Tuesday, 9 April 1985, 18:29-EST
    From: Gavan Duffy <GAVAN at OZ>

    Can't use this until SI:COLUMN-INVERT-LIST is defined.

Sorry, my mistake for getting mixed up between development and released
versions.  SI:COLUMN-INVERT-LIST will probably be in 6.1.  Meanwhile,
here is a corrected version of the released functions:

    
    (DEFUN CHOOSE-KEYWORDS (&OPTIONAL LABEL OLD-KEYWORDS &AUX NEW-KEYWORDS )
      (SEND *KEYWORD-WINDOW* ':SET-LABEL LABEL)
      (WHEN *KEYWORD-ALIST-SORT-PREDICATE*		; make it pretty
	(SETQ *KEYWORD-ALIST* (SORTCAR *KEYWORD-ALIST*
				       (EVAL (EVAL *KEYWORD-ALIST-SORT-PREDICATE*)))))
      (MULTIPLE-VALUE (*KEYWORD-ALIST* NEW-KEYWORDS)
	(SEND *KEYWORD-WINDOW* ':MULTIPLE-CHOOSE *KEYWORD-ALIST* OLD-KEYWORDS
	      (RECTANGLE-NEAR-COMMAND-MENU)))
      NEW-KEYWORDS)
15-Apr-85 05:44:25-EST,659;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 15 Apr 85 05:44-EST
Date: Monday, 15 April 1985, 05:43-EST
From: jcma@MIT-MC
Subject: Sending Mail in the background
To: bug-zmail@OZ
Message-ID: <850415054332.5.JCMA@MORRISON.MIT>

I hate to request yet another background zmail process, but it would certainly
be nice if zmail could send mail in the background.  That way I wouldn't have
to wait around for it to connect to random hosts on the internet.  I think
this becomes more relevant with the TCP code, although it is a pain when the
mit hosts are loaded.  If something goes wrong, it can always report back and
ask what should be done.
17-Apr-85 00:38:50-EST,596;000000000000
Received: from MIT-MOON by MIT-OZ via Chaosnet; 17 Apr 85 00:38-EST
Date: Wednesday, 17 April 1985, 00:36-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: WHOIS broken
To: BUG-ZMAIL at OZ
Message-ID: <850417003658.6.GUMBY@MOON.MIT>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 8.2,
microcode TMC5-MIC 319, on Lisp Machine Keith Moon:

(but differently this time).  The whois command seems to have stopped
taking its default from the sender of the current message.  It always
defaults now to GUMBY@MC, which, as you can imagine, isn't all that
interesting.
17-Apr-85 01:58:18-EST,3210;000000000000
Received: from SCRC-STONY-BROOK by MIT-OZ via Chaosnet; 17 Apr 85 01:58-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 215680; Tue 16-Apr-85 22:39:24-EST
Date: Tue, 16 Apr 85 22:39 EST
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: filter DATE before
To: saz@OZ.MIT
cc: BUG-zmail@OZ.MIT, Bug-Tracking-Replies@TENEX.SCRC.Symbolics.COM
In-Reply-To: <850406012826.3.SAZ@APIARY-4.MIT.EDU>
Disposition: COMPLETED
Category: zmail
Message-ID: <850416223916.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

Synopsis:  Sure enough; this looks like a test where a surrounding form
was accidentally deleted.  Now fixed in the development system.  This is
definitely Release 6.1 material.  Thanks for the report.

  -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

    Date: Saturday, 6 April 1985, 01:28-EST
    From: David M. J. Saslav <saz at OZ>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 7.8,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-4:

    I was trying to filter all messages before a certain date --
    I clicked on a message to indicate that its date was the
    one I wished to use as cutoff and got the following error.

    dave

    >>Trap: The first argument given to the SYS:LDB-INTERNAL instruction, ZWEI:MSG, was not a number.
    While in the function CHAR-CODE  TIME:LEXICALLY-ANALYZE  TIME:PARSE-UNIVERSAL-TIME

    CHAR-CODE:  (P.C. = 2)
       Arg 0 (CHAR): ZWEI:MSG

    TIME:LEXICALLY-ANALYZE:  (P.C. = 12)
       Arg 0 (STRING): #<MSG 1000644>
       Arg 1 (START): 0
       Arg 2 (END): 10

    TIME:PARSE-UNIVERSAL-TIME:  (P.C. = 156)
       Arg 0: #<MSG 1000644>
       --Defaulted args:--
       Arg 1 (START): 0
       Arg 2 (END): 10
       Arg 3 (FUTUREP): T
       Arg 4 (BASE-TIME): NIL
       Arg 5 (MUST-HAVE-TIME): NIL
       Arg 6 (DATE-MUST-HAVE-YEAR): NIL
       Arg 7 (TIME-MUST-HAVE-SECOND): NIL
       Arg 8 (DAY-MUST-BE-VALID): T

    ZWEI:GET-FILTER-FUNCTION-1:  (P.C. = 441)
       Arg 0 (UNIVERSE): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 16304464>
       Arg 1 (NAME): "OZ:PS:<SAZ>SAZ.BABYL"
       Arg 2 (NEAR-MODE): (:RECTANGLE 79 609 130 625)

    ZWEI:GET-FILTER-FUNCTION:  (P.C. = 14)
       Arg 0 (NEAR-MODE): (:RECTANGLE 79 609 130 625)

    ZWEI:COM-ZMAIL-SURVEY:  (P.C. = 22)

    ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
       Arg 0 (COMMAND): ZWEI:COM-ZMAIL-SURVEY
       Arg 1 (CHAR): (:MENU ("Survey" . ZWEI:COM-ZMAIL-SURVEY) 4 #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)
       --Defaulted args:--
       Arg 2 (PREFIX-CHAR): NIL
       Arg 3 (HOOK-LIST): NIL

    ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
       Arg 0: ZWEI:COM-ZMAIL-SURVEY

    Rest of stack:
    (:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
    ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
    (:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
    (:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
    (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
    ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
    SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
17-Apr-85 10:33:16-EST,2088;000000000000
Received: from 24620 by MIT-OZ via Chaosnet; 17 Apr 85 10:33-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 216021; Wed 17-Apr-85 10:22:49-EST
Date: Wed, 17 Apr 85 10:22 EST
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Sending Mail in the background
To: jcma@MC.MIT
cc: bug-zmail@OZ.MIT
In-Reply-To: <850415054332.5.JCMA@MORRISON.MIT>
Message-ID: <850417102257.0.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Monday, 15 April 1985, 05:43-EST
    From: jcma@MIT-MC

    I hate to request yet another background zmail process, but it would certainly
    be nice if zmail could send mail in the background.  That way I wouldn't have
    to wait around for it to connect to random hosts on the internet.  I think
    this becomes more relevant with the TCP code, although it is a pain when the
    mit hosts are loaded.  If something goes wrong, it can always report back and
    ask what should be done.

My immediate reaction to this is that I fully sympathize with the
motivation, but feel it would be asking for a lot of trouble.  The
thought of a another whole bunch of zmail operations that need to be
interlocked between processes makes me break out in hives.  The
necessary protocols for dealing with errors (necessitating interrupting
the next thing that the user is on to) would be confusing and
complicated.  

And the user's own operations would be desynchronized from
Zmail, in what is likely to be a highly interactive area.  For example,
you compose a reply to a message and send it, then want to delete
the original message.  Presently, you delete it immediately and go on to
the next message.  But if the message isn't really sent yet, you have to
go on -- without deleting?  Deleting on speculation?  If the send is
unsuccessful, should Zmail undelete the replied-to message and jerk you
back to it?

I'm not saying the idea is without merit, but I doubt it is worth the
effort and risk required.  I think the network sending process should
instead be made as efficient as possible.
18-Apr-85 01:10:18-EST,1506;000000000000
Received: from MIT-MOON by MIT-OZ via Chaosnet; 18 Apr 85 01:10-EST
Date: Thursday, 18 April 1985, 01:09-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: Why did Delete Duplicate Messages not catch this pair?
To: BUG-ZMAIL at OZ
Message-ID: <850418010948.2.GUMBY@MOON.MIT>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 8.2,
microcode TMC5-MIC 319, on Lisp Machine Keith Moon:

Received: from MIT-OZ by MIT-MC via Chaosnet; 17 APR 85  18:15:12 EST
Received: from 24610 by MIT-OZ via Chaosnet; 17 Apr 85 18:12-EST
Received: from SCRC-NEPONSET by SCRC-QUABBIN via CHAOS with CHAOS-MAIL id 154445; Wed 17-Apr-85 13:03:34-EST
Date: Wednesday, 17 April 1985, 13:03-EST
From: David C. Plummer in disguise <DCP at SCRC-QUABBIN>
Subject: :SEND-IF-HANDLES ought to work with case methods
To: David Vinayak Wallace <Gumby at MIT-MC>, BUG-LISPM at OZ
In-Reply-To: <850415082409.1.GUMBY@JIMI.MIT>
Message-ID: <850417130338.6.NFEP@NEPONSET.SCRC.Symbolics.COM>


Received: from SCRC-QUABBIN by MIT-MC via Chaosnet; 17 APR 85  18:16:18 EST
Received: from SCRC-NEPONSET by SCRC-QUABBIN via CHAOS with CHAOS-MAIL id 154446; Wed 17-Apr-85 13:03:42-EST
Date: Wed, 17 Apr 85 13:03 EST
From: David C. Plummer in disguise <DCP@SCRC-QUABBIN.ARPA>
Subject: :SEND-IF-HANDLES ought to work with case methods
To: David Vinayak Wallace <Gumby@MIT-MC.ARPA>, BUG-LISPM@OZ.MIT
In-Reply-To: <850415082409.1.GUMBY@JIMI.MIT>
Message-ID: <850417130338.6.NFEP@NEPONSET.SCRC.Symbolics.COM>
18-Apr-85 05:09:43-EST,1146;000000000000
Mail-From: GZ created at 18-Apr-85 05:09:39
Date: Thu, 18 Apr 1985  05:09 EST
Message-ID: <GZ.12104085895.BABYL@MIT-OZ>
From: Gail Zacharias <GZ@MIT-OZ>
To:   Charles Hornig <Hornig@SCRC-STONY-BROOK.ARPA>
Cc:   bug-zmail@MIT-OZ
Subject: Domains
In-reply-to: Msg of Fri 5 Apr 85 16:26 EST from Charles Hornig <Hornig@STONY-BROOK.SCRC.Symbolics.COM>

    Date: Fri, 5 Apr 85 16:26 EST
    From: Charles Hornig <Hornig@STONY-BROOK.SCRC.Symbolics.COM>
    Subject: [Moon: [COMSAT: Msg of Wednesday, 20 March 1985 17:36-EST]]
    To: Gail Zacharias <GZ@OZ.MIT.EDU>, bug-zmail@OZ.MIT.EDU
    In-Reply-To: <GZ.12096824278.BABYL@MIT-OZ>
    Message-ID: <850405162601.4.HORNIG@PEACE.SCRC.Symbolics.COM>

    Is this format of header acceptable?  This is what we would like to move to

MMAILR can't handle domains yet, which basically means that no TOPS-20 host
can.  If you want to be able to communicate with the rest of the world, I'd
hold off on these headers just yet.  In fact, I connected to SCRC-TENEX and
SCRC-VIXEN and tried sending mail to Hornig@STONY-BROOK.SCRC.Symbolics.COM
and both rejected the host name as invalid.
18-Apr-85 10:33:39-EST,1372;000000000000
Received: from 24620 by MIT-OZ via Chaosnet; 18 Apr 85 10:33-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 216812; Thu 18-Apr-85 10:08:13-EST
Date: Thu, 18 Apr 85 10:08 EST
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: WHOIS broken
To: Gumby@MC.MIT
cc: BUG-ZMAIL@OZ.MIT
In-Reply-To: <850417003658.6.GUMBY@MOON.MIT>
Message-ID: <850418100825.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Wednesday, 17 April 1985, 00:36-EST
    From: David Vinayak Wallace <Gumby at MIT-MC>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 8.2,
    microcode TMC5-MIC 319, on Lisp Machine Keith Moon:

    (but differently this time).  The whois command seems to have stopped
    taking its default from the sender of the current message.  It always
    defaults now to GUMBY@MC, which, as you can imagine, isn't all that
    interesting.

Gee, it might be, to somebody else.  I just did Whois, with your message
current, and the default was Gumby@MC.  In any case, Whois does indeed
still take its default from the From: header of the current message, in
both 6.0 and the development system.  Or did you really mean the
Sender:?  OK, I changed the development system to use the Sender: if
there is no From:.

Let me know more details if it really seems to fail to pick up the
From: header.
18-Apr-85 11:28:24-EST,667;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 18 Apr 85 11:28-EST
Date: Thu,18 Apr 85 11:28:55 EST
From: David Vinayak Wallace <GUMBY@MIT-MC>
Subject:  WHOIS broken
To: DODDS@SCRC-TENEX
cc: BUG-ZMAIL@MIT-OZ
In-reply-to: Msg of Thu 18 Apr 85 10:08 EST from Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>
Message-ID: <[MIT-MC].459585.850418.GUMBY>

This turns out to be cretinosity in the AISITE system.  Those responsible
were subjected to gouts of napalm this morning when I figured out what had
happened (Read BUG-AISITE if you're curious).

Sorry.  I know it wasn't something I did so I assumed it had to be
something you (symbolics) did...

david
18-Apr-85 13:20:08-EST,2163;000000000000
Received: from 24620 by MIT-OZ via Chaosnet; 18 Apr 85 13:18-EST
Received: from SCRC-ANNISQUAM by SCRC-STONY-BROOK via CHAOS with CHAOS-MAIL id 216911; Thu 18-Apr-85 11:48:57-EST
Date: Thu, 18 Apr 85 11:49 EST
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Why did Delete Duplicate Messages not catch this pair?
To: Gumby@MC.MIT
cc: BUG-ZMAIL@OZ.MIT
In-Reply-To: <850418010948.2.GUMBY@MOON.MIT>
Message-ID: <850418114911.3.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thursday, 18 April 1985, 01:09-EST
    From: David Vinayak Wallace <Gumby at MIT-MC>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 8.2,
    microcode TMC5-MIC 319, on Lisp Machine Keith Moon:

    Received: from MIT-OZ by MIT-MC via Chaosnet; 17 APR 85  18:15:12 EST
    Received: from 24610 by MIT-OZ via Chaosnet; 17 Apr 85 18:12-EST
    Received: from SCRC-NEPONSET by SCRC-QUABBIN via CHAOS with CHAOS-MAIL id 154445; Wed 17-Apr-85 13:03:34-EST
    Date: Wednesday, 17 April 1985, 13:03-EST
    From: David C. Plummer in disguise <DCP at SCRC-QUABBIN>
    Subject: :SEND-IF-HANDLES ought to work with case methods
    To: David Vinayak Wallace <Gumby at MIT-MC>, BUG-LISPM at OZ
    In-Reply-To: <850415082409.1.GUMBY@JIMI.MIT>
    Message-ID: <850417130338.6.NFEP@NEPONSET.SCRC.Symbolics.COM>


    Received: from SCRC-QUABBIN by MIT-MC via Chaosnet; 17 APR 85  18:16:18 EST
    Received: from SCRC-NEPONSET by SCRC-QUABBIN via CHAOS with CHAOS-MAIL id 154446; Wed 17-Apr-85 13:03:42-EST
    Date: Wed, 17 Apr 85 13:03 EST
    From: David C. Plummer in disguise <DCP@SCRC-QUABBIN.ARPA>
    Subject: :SEND-IF-HANDLES ought to work with case methods
    To: David Vinayak Wallace <Gumby@MIT-MC.ARPA>, BUG-LISPM@OZ.MIT
    In-Reply-To: <850415082409.1.GUMBY@JIMI.MIT>
    Message-ID: <850417130338.6.NFEP@NEPONSET.SCRC.Symbolics.COM>

This was due to a bug that has since been fixed in the development
system.  It was triggered by the Date: headers not being identical.  The
duplicate deleter was failing to notice that the messages had equal
Message-ID: headers, which is sufficient by itself.  Thanks for the
report.
19-Apr-85 12:42:37-EST,10180;000000000000
Received: from MIT-APIARY-5 by MIT-OZ via Chaosnet; 19 Apr 85 12:42-EST
Date: Friday, 19 April 1985, 12:41-EST
From: Randy Parker <PARKER at OZ>
Subject: undigestify
To: BUG-ZMAIL at OZ
cc: PARKER at OZ
Message-ID: <850419124151.1.PARKER@APIARY-5.MIT>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 8.2,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-5:

I attempted an Undigestify on the digest message below and
it failed with a
   "This messge [sic] doesn't look like a Soft-Eng%MIT-XX digest."

In BABYL on OZ, it undigestifies just fine as is.

The problem seems to be in the To: field of the digest.
When I edit it to read

   To: Soft-Eng@MIT-XX.ARPA

instead of

   To: Soft-Eng%MIT-XX@MIT-XX.ARPA

the undigestifying wins.

RP

----**** XMAIL file of message inserted beneath this line ****----
Babyl Options:
Version:5
Append:1

0,,
*** EOOH ***
Received: from MIT-MC by MIT-OZ via Chaosnet; 19 Apr 85 09:34-EST
Received: from MIT-XX by MIT-MC via Chaosnet; 19 APR 85  09:34:39 EST
Date: Fri 19 Apr 85 09:30:55-EST
From: Moderator (Mark S. Day) <MDAY@MIT-XX.ARPA.#Internet>
Subject: Soft-Eng Digest V1 #11
Sender: MDAY%MIT-XX@MIT-XX.ARPA
To: Soft-Eng%MIT-XX@MIT-XX.ARPA
Reply-To: Soft-Eng@MIT-XX.ARPA


Soft-Eng Digest             Fri, 19 Apr 85       Volume 1 : Issue  11 

Today's Topics:
                         Bibliography request
                      Korean Air Lines 007 again
             Non-English Programming Languages: Followup
          System Software Screws and Programmer Productivity
----------------------------------------------------------------------

Date: Thu, 18 Apr 85 09:06 EST
From: D E Stevenson <dsteven%clemson.csnet@csnet-relay.arpa>
Subject: Bibliography request

I am trying to build a bibliography on the following subjects:
(1) denotational semantics, (2) axiomatic semantics, and
(3) verification techniques.   Any one know of other bibliographies
on these subjects?  I would certainly appreciate pointers.

D. E. "Steve" Stevenson
Department of Computer Science,
Clemson University, Clemson SC, 29631
(803) 656-3444

------------------------------

Date: 11 Apr 1985 1956-PST
From: Peter G. Neumann <Neumann@SRI-CSL.ARPA>
Subject: Korean Air Lines 007 again

Update on the Korean Airlines 007 Disaster

The latest issue of the New York Review has a superbly well-reasoned article by
Murray Sayle on the KE007.  It is well worth the price of the issue.  (Sayle's
writings have been widely circulated in Europe, but not very widely here.)

The most plausible theory as to what happened is that the pilot (or copilot)
simply had the autopilot switched to HDG (heading) at a course of 246 degrees
(the setting for the first leg), past the first intended course correction over
Bethel, rather than switching to the next position, INS (Inertial Navigation
System) -- which would have been the correct course.   There are many details
to be considered along the way to that conclusion, and I do not want to try to
summarize them here.  The last paragraph is worth replicating, however.
  
  But the deepest lesson of all is one we should all draw -- how easily an
  all-too-human mistake, abetted by a conspiracy of circumstances, can defeat
  all of the supposedly infallible safeguards which keep the superpowers 
  balanced on their nuclear knife-edge, and how easily our whole world,
  and not just one wretchedly unlucky airliner could be shot down.

I recommend this article highly.  Peter
-------

------------------------------

Date: Thu, 18 Apr 85 14:39:12 CST
From: mooremj@EGLIN-VAX
Subject: Non-English Programming Languages: Followup

One week ago I posted a request for information about computer languages based 
on native languages other than English.  The response has been tremendous, and
here is a summary of the information provided: 

I have divided the responses into four categories:

  I. Languages based on a ``universal'' language:
   
     APL, which is based on the language of mathematics and uses no native 
     language, was cited by a number of respondents.

 II. Languages based on non-English native languages (as opposed to
     translations of common English-based languages):

     ARABIC: <name not furnished> -- IBM developed an Arabic-based language
             for the Middle Eastern market in the 1960s.  It did not catch on. 

     FRENCH: LSE (Language Scientifique d'Enseignement) -- a teaching language
             used to introduce computer science in French schools

     GERMAN: Telefunken/AEG TR440 assembler language.  The TR440's operating
             system was also in German.

     MALAY: <name not furnished> -- a data management language is currently 
            under development at the National University of Malaysia.

     RUSSIAN: LYaPAS [Ya represents the Cyrillic character that looks 
              like a reflected R] -- a fairly low-level language, described
              as ``a cross between assembler language and APL''

III. Languages which are translations of common English-based languages
     such as FORTRAN, COBOL, and Pascal.  These are produced by simply
     substituting the local equivalents for the language keywords; where
     the language has a strong sentence structure (e.g., COBOL), English
     sentence syntax is generally retained.  [This gives new meaning to
     the term ``dialect''.]

     ARABIC: BASIC (Khawarizmi 1), COBOL

     DANISH: some exist, but precisely which ones was not specified

     FRENCH: BASIC, COBOL, FORTRAN, Pascal (including LM and PIXAL), PL/I
 
     GERMAN: ALGOL, BASIC, COBOL, FORTRAN

     HUNGARIAN: Prolog

     JAPANESE: COBOL, LOGO

     MALAY: BASIC

     PORTUGUESE [Brazil]: ALGOL, LOGO (with Portuguese syntax!)

     RUSSIAN: IBM assembler (the op codes are the same, but the mnemonics
              have been trasnslated into Russian), unspecified "others"

     SPANISH: FORTRAN

     It has also been reported that LISP has been translated into several
     (unspecified) languages.

 IV. The English-based languages are in common use in many non-English speaking
     countries.  These include most of Western Europe and the Middle East, 
     China, and Brazil.

The above information is certainly not exhaustive, and may not be absolutely
accurate; several respondents warned me that it had been many years since
their exposure to the above and that their memories may not have been 100%
correct.  Thank you all for the information and the many interesting anecdotes
you provided.  If anyone should come up with new information on this subject,
I will be delighted to receive it. 

                   Martin J. Moore (MOOREMJ@EGLIN-VAX.ARPA)
                   RCA Service Company
                   P.O. Box 1446
                   Eglin AFB, Florida  32542

------------------------------

Date: Fri,12 Apr 85 14:05:23 EST
From: John G. Aspinall <JGA@MIT-MC>
Subject: System Software Screws and Programmer Productivity

Many of us, I'm sure, have our little working-style idiosyncrasies.  Little
habits that don't hurt anyone, and in some sense increase our productivity, at
least by making the job more pleasant.  Here's an anecdote about one of mine
and how a humble harmless habit collided head-on with a System Standard.

[Scene 1 : Enter the harmless habit.]
 When I write Fortran (please, I know, but that's a much bigger fight) I use
form-feed characters (Ctrl-L, hereafter <FF>) to delimit subroutines.  My
editor has several commands for dealing with "pages", so such a habit makes it
easy to move around the file, routine by routine.

[Scene 2 : Trouble on the horizon.]
 I write programs on a large, government-funded system with two brands of
supercomputers (Cray and CDC) and also several smaller systems (TOPS-10, VMS).
Such files with <FF> in them compiled fine on the CDC machine, on the DEC
machines, on everything except the Cray.  (I should point out that this
compiler is maintained by the system folks at this place, and implements their
own brand of Fortran, it is not the as-sold-by-Cray compiler.)  On the Cray, I
get a error message saying "Illegal character in statement number field."  No
problem, I thought, I'll ask them to fix the compiler so it ignores <FF>.
Nobody will mind, I thought, because this is an upward compatible change.  I
sent the folks a message explaining the whole thing.  Note that I did NOT ask
that anyone drop what they were doing and fix this immediately; simply that
they consider this change for the next scheduled release of the compiler.

[Scene 3 : Kaboom!]
	  Dear Lowly User,  (paraphrased)
	  Your proposed change would violate Fortran Standard XXX
	 where it says "....", and besides, if you want pretty
	 looking listings with each routine starting on a new page,
	 use the following utility....
 Well, I considered pointing out that no working programs would break because
of this change, that all the other compilers on their system already behaved
that way, that I didn't see any effort to alter all the other compilers to
follow Fortran Standard XXX, and that finally I never mentioned listings at
all - I was talking about an editor.  But I didn't.  You can't fight City
Hall, and all that.

[Scene 4 : Apres le Deluge... more rain.]
 Well I made one more stab at the problem.  If, I thought, the compiler thinks
<FF> is illegal in the statement number field, I'll make it a comment.  (For
those of you who have escaped the purgatory of Fortran syntax; it suffers from
"card-image hangover" -- a "c" in column one denotes a comment.)  So in went
my latest efforts with "C<FF>" as a page delimiter.  Back comes the error --
"Illegal character in statement number field."  So I look a the listing, and
what do I see?  "<FF>C" where I had put "C<FF>".  The *#%@& compiler had
INTERCHANGED THE CHARACTERS IN ORDER TO CREATE AN ILLEGAL STATEMENT!

 I give up.

------------------------------

End of Soft-Eng Digest
******************************
-------

21-Apr-85 22:21:15-EST,1106;000000000000
Received: from MIT-LENNON by MIT-OZ via Chaosnet; 21 Apr 85 22:21-EST
Date: Sunday, 21 April 1985, 22:21-EST
From: David Vinayak Wallace <Gumby at MIT-MC>
Subject: sys:meter-function-exit (-entry too) undefined
To: Bug-Zmail at OZ
Message-ID: <850421222109.1.GUMBY@LENNON.MIT>

In Symbolics 3600 Zmail in Release 6.0, IP-TCP 29.0, AISite 8.4,
microcode TMC5-MIC 319, on Lisp Machine John Lennon:

I was innocently attempting to reply to a message in ZMAIL when I was
thrown into the cold load with this error.  It was in the middle of the
:set-configuration message, but I couldn't figure out why; it seemed
(from the disassembled code) to be frobbing the list
tv:screen-manager-queue or something if it was non-nil, but when I
looked at that variable it was nil.

I tried to send a bug report but c-m threw me into the same error.  I
could not even abort to top level; the same thing happened.  I tried
defining sys:meter-function-exit to be an alias for #'false and #'true,
but those made zmail loop infinately.

This was all from memory, but I couldn't do anything else.

david
24-Apr-85 05:49:36-EST,3732;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 24 Apr 85 05:49-EST
Date: Wednesday, 24 April 1985, 05:46-EST
From: Gavan Duffy <GAVAN at OZ>
Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
To: BUG-ZMAIL at OZ
cc: BUG-HTVAX at OZ, BUG-MARTY at OZ, CJL at OZ, GZ at OZ
In-Reply-To: <GZ.12105646399.BABYL@MIT-OZ>
Message-ID: <850424054645.1.GAVAN@MORRISON.MIT>

ZMAIL is losing big, apparently.  Here's the bottom line from GZ,
yanked from below:

  ``As long as you keep using software that's sending out headers
  with all these bogus 'domains' (or perhaps until an MIT domain is actually
  created), people everywhere are going to have problems replying to you.''  

Who's in charge over there, anyway?

    Date: Wed, 24 Apr 1985  04:01 EST
    From: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>
    To:   Gavan Duffy <GAVAN%MIT-OZ@MIT-MC.ARPA>
    Cc:   BUG-HTVAX%MIT-OZ@MIT-MC.ARPA, BUG-MARTY%MIT-OZ@MIT-MC.ARPA,
	  CJL%MIT-OZ@MIT-MC.ARPA
    Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
    In-reply-to: Msg of 24 Apr 1985 02:29-EST from Gavan Duffy <GAVAN at OZ>

	Date: Wednesday, 24 April 1985, 02:29-EST
	From: Gavan Duffy <GAVAN at OZ>

	Since when is OZ unknown?  Since when is MC unknown?  Since HTVAX got into
	the mail loop, that's when!  I thought HTVAX was taken out of the loop
	so that problems like this wouldn't arise anymore.

	Maybe the problem is that HTVAX can't handle domains?  Anyway, here's
	the forwarded mail.

	Date: Tue 23 Apr 85 23:18:19-EST
	From: Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>
	Subject: Returned mail: Host unknown
	Message-Id: <8504240425.AA03948@MIT-HTVAX.ARPA>
	To: David M. J. Saslav <SAZ%MIT-OZ@MIT-MC.ARPA>

	   ----- Transcript of session follows -----
	550 GAVAN%OZ.MIT... Host unknown

	   ----- Unsent message follows -----
	Received: from MIT-MC by MIT-HTVAX (4.12/4.7) with CHAOS 
	    id AA03941; Tue, 23 Apr 85 23:21:04 est
	Message-Id: <8504240421.AA03941@MIT-HTVAX.ARPA>
	Received: from MIT-OZ by MIT-MC via Chaosnet; 23 APR 85  23:16:25 EST
	Date: Tue 23 Apr 85 23:18:19-EST
	From: David M. J. Saslav <SAZ%MIT-OZ@MIT-MC.ARPA>
	Subject: no need to apolgize -- i'm a twit
	To: GAVAN%OZ.MIT@MIT-HTVAX.ARPA
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	In-Reply-To: Message from "Gavan Duffy <GAVAN%OZ.MIT@MIT-HTVAX.ARPA>" of Tue 23 Apr 85 23:13:31-EST

    This message was addressed to GAVAN%OZ.MIT@MIT-HTVAX.ARPA. It has nothing
    to do with whether HTVAX is or is not 'in the mail loop', the message was
    explicitly routed to HTVAX by the sender and the mail system cannot presume
    to change the requested routing.

    In fact, the message would have gotten rejected whether it went thru HT,
    MC, AI, XX or direct thru OZ itself.  It's true that none of these hosts
    handle domains yet, but even if they did, "OZ.MIT" would still be an
    illegal host name.  There is not now, and there will never be, a top level
    MIT domain.  Furthermore at this time there is no MIT subdomain of any
    top-level domain, so this isn't even a valid abbreviation for any real host
    name.

    Judging by the in-reply-to field, your original message had this as your
    address.  As long as you keep using software that's sending out headers
    with all these bogus 'domains' (or perhaps until an MIT domain is actually
    created), people everywhere are going to have problems replying to you.

OK, then, I believe you.  It's a Symbolics bug.  I'll send it to them.  Thanks.
I still don't know how HTVAX got in there.  Chris?
25-Apr-85 09:17:49-EST,37734;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 25 Apr 85 09:17-EST
Received: from YUKON.SCRC.Symbolics.COM by MIT-MC.ARPA; 25 APR 85 09:15:41 EST
Received: from HUDSON.SCRC.Symbolics.COM by YUKON.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 121885; Thu 25-Apr-85 09:13:35-EST
Date: Thu, 25 Apr 85 09:13 EST
From: Charles Hornig <Hornig@STONY-BROOK.SCRC.Symbolics.COM>
Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
To: Gavan Duffy <GAVAN%OZ@MIT-MC.ARPA>, BUG-ZMAIL%OZ@MIT-MC.ARPA
cc: BUG-HTVAX%OZ@MIT-MC.ARPA, BUG-MARTY%OZ@MIT-MC.ARPA,
    CJL%OZ@MIT-MC.ARPA, GZ%OZ@MIT-MC.ARPA
In-Reply-To: <850424054645.1.GAVAN@MORRISON.MIT>
Message-ID: <850425091357.5.HORNIG@HUDSON.SCRC.Symbolics.COM>

    Date: Wednesday, 24 April 1985, 05:46-EST
    From: Gavan Duffy <GAVAN at OZ>

    ZMAIL is losing big, apparently.  Here's the bottom line from GZ,
    yanked from below:

      ``As long as you keep using software that's sending out headers
      with all these bogus 'domains' (or perhaps until an MIT domain is actually
      created), people everywhere are going to have problems replying to you.''  

    Who's in charge over there, anyway?

OK, here's the whole story.

The ".MIT"'s are coming from the INTERNET-DOMAIN-NAME property of the
MIT namespace.  If you don't intend to use domains, you should get rid
of this attribute.  When you do, wou will fond that this is not
sufficient, due to a bug.  The patch given below will fix this bug.

It also fixes a few others.

After all of this, you will now get headers like
"GAVAN%MIT-OZ@MIT-HTVAX.ARPA".  This is intentional.  After all, people
outside of MIT couldn't reply to them if they just said GAVAN@OZ.  It is
using HTVAX because it is an Internet store-and-forward mail server in
the same site as the LispM sending the mail.

I hope you can get your mailers to accept domain names soon.

;;; - - - START OF PATCH - - -

;;; -*- Mode: LISP; Syntax: Zetalisp; Package: USER; Base: 10; Patch-file: T -*-
;;; Patch file for System version 271.34
;;; Reason: Namespace searching macros for use by new ZMail code.
;;; Written by File-Server, 4/23/85 10:43:32
;;; while running on Riverside from FEP0:>rel6-server-mmpt-ns-fixed.load.1
;;; with Release 6.0, System 271.33, Zmail 107.2, LMFS 57.2, Tape 41.1, Basic Sage 15.9, Documentation Database 3.2, Common Lisp 4.2, Experimental Writer Tools 12.23, SCRC 5.5, Print 38.0, Mailer 43.3, IP-TCP 29.3, File Server stuff 1.5, microcode TMC5-MIC 319, Automatic server bug reporter, Namespace Server, MMPT fix.



; From file namespace-defs.lisp >rel-6>sys>network Q: (30)
#10R NETWORK-INTERNALS::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "NETWORK-INTERNALS")))

(defmacro searching-site-namespaces ((&optional (site 'net:*local-site*)) &body body)
  `(let ((*namespace-search-list* (send (send ,site :local-namespace) :search-rules)))
     ,@body))

(defmacro searching-one-namespace ((namespace) &body body)
  `(stack-let ((*namespace-search-list* `(,,namespace)))
     ,@body))

(defmacro searching-one-site ((&optional (site 'net:*local-site*)) &body body)
  `(stack-let ((*namespace-search-list* `(,(send ,site :local-namespace))))
     ,@body))

(defmacro searching-one-network ((network) &body body)
  `(let ((*namespace-search-list* (send ,network :search-rules)))
     ,@body))
)

;;; -*- Mode: LISP; Syntax: Zetalisp; Package: USER; Base: 10; Patch-file: T -*-
;;; Patch file for System version 271.40
;;; Reason: Internet domain name change neede dby ZMail changes.
;;; Written by File-Server, 4/25/85 08:41:09
;;; while running on Stony Brook from FEP0:>system-271-35-server.load.1
;;; with Release 6.0, System 271.35, Zmail 107.4, LMFS 57.2, Tape 41.1, Basic Sage 15.9, Documentation Database 3.3, Common Lisp 4.2, Experimental Writer Tools 12.23, SCRC 5.6, Print 38.0, Mailer 43.3, IP-TCP 29.3, File Server stuff 1.5, microcode TMC5-MIC 319, Automatic server bug reporter, Namespace Server, MMPT fix.


(defmethod (neti:namespace :internet-domain-name) ()
  (send self :get :internet-domain-name))

;;; -*- Mode: LISP; Syntax: Zetalisp; Package: ZWEI; Base: 10; Patch-file: T -*-
;;; Patch file for Zmail version 107.3
;;; Reason: Function (:METHOD NET:HOST :MAIL-NAME):  Don't use made-up domain name.
;;; Function MAILER:ARPANET-MAIL-GATEWAY-HOST:  Search correct sites for gateway.
;;; Function (:METHOD NET:HOST :DEFAULT-MAIL-NAMING-CONVENTION):  Always use Internet domain names in headers.
;;; Function ZWEI:PRINT-DATE-HEADER:  Always use RFC 822 format.
;;; Function ZWEI:STRING-FROM-HEADER:  Always use @'s.
;;; Allow ZMail user to try hosts believed to be unavailable.
;;; Function MAILER:SMTP-SERVER:  Better management of paths.
;;; Function (:METHOD MAILER:SMTP-USER :INIT):  Don't use :ARPANET kludges.
;;; Function (:METHOD MAILER:SMTP-USER :START-MESSAGE):  More path management.
;;; Function MAILER:ADD-HOST-TO-ROUTE:  COmmon routine.
;;; Written by File-Server, 4/23/85 10:44:02
;;; while running on Riverside from FEP0:>rel6-server-mmpt-ns-fixed.load.1
;;; with Release 6.0, System 271.33, Zmail 107.2, LMFS 57.2, Tape 41.1, Basic Sage 15.9, Documentation Database 3.2, Common Lisp 4.2, Experimental Writer Tools 12.23, SCRC 5.5, Print 38.0, Mailer 43.3, IP-TCP 29.3, File Server stuff 1.5, microcode TMC5-MIC 319, Automatic server bug reporter, Namespace Server, MMPT fix.



; From file mail-access-paths.lisp >rel-6>sys>zmail Q: (95)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

;;; NAMING-CONVENTION is one of :INTERNET, :LOCALNET, or :ARPANET.
;;;  :INTERNET means the whole internet with hierarchical domains.
;;;  :LOCALNET means a local network which probably doesn't understand domains.
;;;  :ARPANET means the current turd that only understands the .ARPA domain, doesn't
;;;   allow path routing, etc.
;;;  :DEFAULT means choose one that is parsable.
;;; %-ROUTING-KLUDGE is only used with :ARPANET and means return host@MIT-MC.ARPA if there
;;;  is a suitable MC on the local network.
(defmethod (host :mail-name) (&key (naming-convention :default)
				   (%-routing-kludge nil))
  (block result
    (when (eq naming-convention :default)
      (setq naming-convention (send self :default-mail-naming-convention)))
    (when (and (eq naming-convention :internet)
	       (send self :uninterned-p))	;Try arpanet addr first, will revert if none.
      (setq naming-convention :arpanet))
    (when (eq naming-convention :arpanet)
      (let ((arpanet-namespace (find-arpanet-namespace)))
	(when arpanet-namespace
	  (let ((name (send self :primary-name-in-namespace arpanet-namespace)))
	    (when name
	      (return-from result (string-append (send name :string) ".ARPA"))))))
      (when %-routing-kludge
	(let ((gateway (arpanet-mail-gateway-host self)))
	  (when gateway
	    (return-from result
	      (if (all-mail-addresses-forward-between-hosts-p self gateway)
		  (send gateway :mail-name :naming-convention :arpanet)
		  (values
		    (string-append
		      (send self :mail-name :naming-convention
			    (neti:searching-one-site ((send gateway :site))
			      ;; Does this host have a name known to the
			      ;; gateway (unqualified return mail will work)?
			      (send self :default-mail-naming-convention)))
		      #/@
		      (send gateway :mail-name :naming-convention :arpanet))
		    t)))))
	;; This is pretty pathetic.
	(let ((gateway (domain-mail-host '("ARPA"))))
	  (when (and gateway (not (eq gateway self)))
	    (multiple-value-bind (name double-%)
		(send gateway :mail-name :naming-convention :arpanet :%-routing-kludge t)
	      (return-from result
		(values
		  (string-append (send self :mail-name :naming-convention :internet)
				 (if double-% #/% #/@) name)
		  t))))))
      (let ((arpanet-network (find-arpanet-network)))
	(when arpanet-network
	  (loop for (network address) in (send self :address)
		doing (when (eq network arpanet-network)
			(return-from result
			  (format nil "[~A]" address))))))
      ;; If we don't have a way of getting an arpanet name, tough luck; skip it and use an
      ;; unregistered domain.
      (setq naming-convention :internet))
    (let ((primary-name (send self :primary-name)))
      (unless (stringp primary-name)
	(when (eq naming-convention :internet)
	  (let ((domain-name (send (send primary-name :namespace) :internet-domain-name)))
	    (when domain-name
	      (return-from result
		(format nil "~A.~A" (send primary-name :string) domain-name)))
	    (setf naming-convention :localnet)))
	(when (eq naming-convention :localnet)
	  ;; Best is a nickname <site>- the rest of which is the primary
	  ;; name.  Next is a nickname <site>- the rest of which is also
	  ;; a nickname.  Then anything <site>-.
	  (let ((site (send self :site)))
	    (unless (null site)
	      (let ((site-name (send site :name))
		    (site-namespace (send site :local-namespace))
		    (second-best nil))
		(dolist (name (send self :names))
		  (let* ((str (send name :string))
			 (idx (string-search-char #/- str)))
		    (when (eq (send name :namespace) site-namespace)
		      (when (and idx (string-equal site-name str 0 0 nil idx))
			(unless second-best (setq second-best name))
			(when (string-equal (send primary-name :string) str 0 (1+ idx))
			  (return-from result (send name :string)))))))
		(when second-best
		  (return-from result (send second-best :string)))))))
	(return-from result (send primary-name :string)))
      primary-name)))

)


; From file mail-access-paths.lisp >rel-6>sys>zmail Q: (95)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

(defun arpanet-mail-gateway-host (host)
  (block found
    (let ((arpanet-namespace (find-arpanet-namespace)))
      (when arpanet-namespace
	(neti:searching-one-namespace (arpanet-namespace)
	  (flet ((search-site (site)
		   (loop for (network) in (send host :address) doing
		     (with-stack-list (address network :*)
		       (with-stack-list (address address)
			 (dolist (system-type '(:lispm :its :tops-20))
			   (dolist (gwhost (find-objects-from-property-list
					     :host :site site :system-type system-type
					     :address address
					     :service '((:store-and-forward-mail :* :*))))
			     (when (loop for name in (send gwhost :names)
					 thereis (eq (send name :namespace)
						     arpanet-namespace))
			       (return-from found gwhost)))))))))
	    (let ((site (send host :site)))
	      (if (null site)
		  (search-site net:*local-site*)
		  (search-site site)
		  (let ((other-sites (send site :user-get :other-sites-in-mail-area)))
		    (when other-sites
		      (let ((other-sites (let ((readtable si:standard-readtable))
					   (read-from-string other-sites))))
			(dolist (s other-sites)
			  (search-site (net:find-object-named :site (string s)))))))))))))))

)


; From file mail-access-paths.lisp >rel-6>sys>zmail Q: (96)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

;;; Choose a naming convention for a host.
;;;  REMOTE-P means as if being parsed by the remote host (use domains unless on local
;;;   network, apply .ARPA kludge); otherwise, as if being parsed by local host (see if
;;;   in namespace search rules).
;;; - - - NOT AT MIT YET - - -
#+ignore
(defmethod (host :default-mail-naming-convention) (&optional remote-p)
  remote-p
  :internet)

)


; From file headers.lisp >rel-6>sys>zmail Q: (90)
#8R ZWEI::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "ZWEI")))

(DEFUN PRINT-DATE-HEADER (STREAM DATE NAME EXPANSION IGNORE)
  (IF (LISTP DATE)
      (DOLIST (DATE DATE)
	(PRINT-DATE-HEADER STREAM DATE NAME EXPANSION NIL))
      (MULTIPLE-VALUE-BIND (NIL MINUTES HOURS DAY MONTH YEAR
			    DAY-OF-THE-WEEK DAYLIGHT-SAVINGS-P)
	  (TIME:DECODE-UNIVERSAL-TIME DATE)
	(SELECTQ (GET (LOCF EXPANSION) ':DATE-FORMAT)
	  (:ENGLISH
	   (FORMAT STREAM "~A: ~\DATE\~%" NAME DATE))
	  (OTHERWISE
	   (FORMAT STREAM "~A: ~A, ~D ~A ~D ~2,'0D:~2,'0D ~A~%"
		   NAME (TIME:DAY-OF-THE-WEEK-STRING DAY-OF-THE-WEEK :SHORT)
		   DAY (TIME:MONTH-STRING MONTH :SHORT) YEAR
		   HOURS MINUTES
		   (TIME:TIMEZONE-STRING TIME:*TIMEZONE* DAYLIGHT-SAVINGS-P)))))))

)


; From file headers.lisp >rel-6>sys>zmail Q: (90)
#8R ZWEI::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "ZWEI")))

;;; NAMING-CONVENTION is one of :INTERNET, :LOCALNET, or :ARPANET.
;;;  :INTERNET means the whole internet with hierarchical domains.
;;;  :LOCALNET means a local network which probably doesn't understand domains.
;;;  :ARPANET means the current turd that only understands the .ARPA domain, doesn't
;;;   allow path routing, etc.
;;; :DEFAULT means pick it so as to make it parsable.  Note that :LOCALNET is not always
;;; re-parsable.
(DEFUN STRING-FROM-HEADER (HEADER FORMAT &OPTIONAL (NAMING-CONVENTION ':DEFAULT)
					 &AUX (PLIST (LOCF HEADER)) TEM)
  (COND ((AND (EQ FORMAT ':USE-ORIGINAL)
	      (SETQ TEM (GET PLIST ':INTERVAL)))
	 (STRING-INTERVAL (FIRST TEM) (SECOND TEM) T))
	((SETQ TEM (GETL PLIST '(:INFERIORS)))
	 (LOOP WITH STR = (MAKE-EMPTY-STRING 20.)
	       WITH (SUP-START SUP-END) = (CADR (GETL PLIST '(:INTERVAL :ORIGINAL-INTERVAL)))
	       FOR START FIRST SUP-START THEN (SECOND INF-INT)
	       FOR INF IN (CADR TEM)
	       AS INF-INT = (CADR (GETL (LOCF INF) '(:INTERVAL :ORIGINAL-INTERVAL)))
	       DO (SETQ STR (STRING-NCONC STR (STRING-INTERVAL START (FIRST INF-INT))))
		  (LET ((SUBHEAD (STRING-FROM-HEADER INF FORMAT NAMING-CONVENTION)))
		    (WHEN SUBHEAD
		      (SETQ STR (STRING-NCONC STR SUBHEAD))))
	       FINALLY (RETURN (STRING-NCONC STR (STRING-INTERVAL START SUP-END)))))
	(T
	 (LET ((USER (GET PLIST ':USER))
	       (STRING (GET PLIST ':NAME)))
	   (UNLESS (AND (NULL USER) (NULL STRING))
	     (LET ((HOST (GET PLIST ':HOST)))
	       (WHEN (NOT (NULL USER))
		 (SETF `(,STRING ,HOST) (SEND USER ':MAIL-ADDRESS))
		 (SETQ HOST `(:OBJECT ,HOST)))
	       (SETQ STRING (RFC822-QUOTE-IF-NECESSARY STRING))
	       (WHEN (AND (EQ FORMAT ':LOCAL-DEFAULT-HOST)
			  (GET PLIST ':HOST-DEFAULTED))
		 (SETQ HOST NIL))
	       (SELECTQ (CAR HOST)
		 (:OBJECT
		  (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
		    (SETQ NAMING-CONVENTION (SEND (SECOND HOST)
						  ':DEFAULT-MAIL-NAMING-CONVENTION)))
		  (UNLESS (AND (EQ FORMAT ':ONLY-PERSONAL)
			       (SUMMARY-SUPPRESS-HOST-P (SECOND HOST)))
		    ;; Use the "standard" name for this host.
		    (MULTIPLE-VALUE-BIND (HOST-NAME %-KLUDGE)
			(SEND (SECOND HOST) :MAIL-NAME :NAMING-CONVENTION NAMING-CONVENTION
			      :%-ROUTING-KLUDGE T)
		      (SETQ STRING (STRING-APPEND STRING (IF %-KLUDGE #/% #/@) HOST-NAME)))))
		 (:DOMAIN
		  (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
		    (SETQ NAMING-CONVENTION ':INTERNET))
		  (SETQ STRING (STRING-APPEND STRING #/@))
		  (LOOP FOR FIRST-P FIRST T THEN NIL
			FOR STR IN (CDR HOST)
			UNLESS FIRST-P DO (SETQ STRING (STRING-APPEND STRING #/.))
			DO (SETQ STRING (STRING-APPEND STRING STR))))
		 (OTHERWISE
		  (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
		    (SETQ NAMING-CONVENTION ':LOCALNET))
		  (DOLIST (HOST (CDR HOST))
		    (SETQ STRING (STRING-APPEND STRING #/@ HOST))))))
	     (SELECTQ FORMAT
	       ((:USE-ORIGINAL :INCLUDE-PERSONAL :ONLY-PERSONAL)
		(LET ((PERSONAL-NAME (IF USER
					 (SEND USER ':PERSONAL-NAME-FIRST-NAME-FIRST)
					 (GET PLIST ':PERSONAL-NAME)))
		      (ROUTE-SPEC (GET PLIST ':ROUTE)))
		  (WHEN (OR PERSONAL-NAME ROUTE-SPEC)
		    (WHEN ROUTE-SPEC
		      (SETQ STRING (STRING-APPEND
				     (ROUTE-SPEC-STRING ROUTE-SPEC NAMING-CONVENTION)
				     STRING)))
		    (SETQ STRING (STRING-APPEND #/< STRING #/>))
		    (WHEN PERSONAL-NAME
		      (IF (EQ FORMAT ':ONLY-PERSONAL)
			  (SETQ STRING PERSONAL-NAME)
			  (SETQ PERSONAL-NAME (RFC822-QUOTE-IF-NECESSARY PERSONAL-NAME))
			  (SETQ STRING (STRING-APPEND PERSONAL-NAME #\SP STRING)))))))
	       ((:HOST :LOCAL-DEFAULT-HOST)
		;; For now, turn a route specification into multiple @'s when
		;; talking to the mail server.
		(LET ((ROUTE-SPEC (GET PLIST ':ROUTE)))
		  (WHEN ROUTE-SPEC
		    (IF (MEMQ NAMING-CONVENTION '(:INTERNET :ARPANET))
			(SETQ STRING (STRING-APPEND
				       (ROUTE-SPEC-STRING ROUTE-SPEC NAMING-CONVENTION)
				       STRING))
			(SETQ STRING (STRING-APPEND
				       STRING
				       (WITH-OUTPUT-TO-STRING (STREAM)
					 (LOOP FOR DOMAIN IN (REVERSE ROUTE-SPEC)
					       DO (SEND STREAM ':TYO #/@)
					       ;; Also only output the most specific
					       ;; part of the domain, since it tends
					       ;; to confuse existing mailers.
					       (SEND STREAM ':STRING-OUT
						     (STRING-FROM-HOST DOMAIN
								       NAMING-CONVENTION)))
					 ))))))))
	     STRING)))))

)


; From file mail.lisp >rel-6>sys>zmail Q: (618)
#8R ZWEI::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "ZWEI")))

(DEFUN NETWORK-SEND-IT-1 (SERVICES RECIPIENTS TEMPLATE-EXPANSION)
  (BLOCK NETWORK-SEND-IT-1
    (ERROR-RESTART (ERROR "Retry sending mail via any mail server.")
      (LET ((UNAVAILABLE-HOSTS NIL))
	(LOOP FOR (SERVICE . SVCS) ON SERVICES
	      FOR FIRST FIRST T THEN NIL
	      DO (CATCH-ERROR-RESTART-IF
		   (NOT (NULL SVCS))
		   ((ERROR) "Send mail via ~{~A~^ or ~}"
		    (MAPCAR #'NETI:SERVICE-ACCESS-PATH-HOST SVCS))
		   (CONDITION-CASE-IF (OR (NULL *MAIL-NETWORK-HOST*)
					  (NOT FIRST))
				      ()
		       (RETURN-FROM NETWORK-SEND-IT-1
			 (INVOKE-MAIL-SERVICE SERVICE RECIPIENTS TEMPLATE-EXPANSION T))
		     (NETI:HOST-BELIEVED-UNAVAILABLE
		       (PUSH SERVICE UNAVAILABLE-HOSTS))
		     ((MAILER:MAILER-TEMPORARY-ERROR SYS:CONNECTION-ERROR)))))
	(WHEN (AND UNAVAILABLE-HOSTS
		   (YES-OR-NO-P "Unable to contact any available store-and-forward mail server.
Attempt to use servers which are believed to be unavailable? "))
	  (LOOP FOR (SERVICE . SVCS) ON (NREVERSE UNAVAILABLE-HOSTS)
		DO (CATCH-ERROR-RESTART-IF
		     (NOT (NULL SVCS))
		     ((ERROR) "Send mail via ~{~A~^ or ~}"
		      (MAPCAR #'NETI:SERVICE-ACCESS-PATH-HOST SVCS))
		     (CONDITION-CASE ()
			 (RETURN-FROM NETWORK-SEND-IT-1
			   (INVOKE-MAIL-SERVICE SERVICE RECIPIENTS TEMPLATE-EXPANSION NIL))
		       ((MAILER:MAILER-TEMPORARY-ERROR SYS:CONNECTION-ERROR)))))))
      (IF (OR (NULL SERVICES)
	      (YES-OR-NO-P "Unable to contact any store-and-forward mail server.
Attempt to send mail directly to destination? "))
	  (RETURN-FROM NETWORK-SEND-IT-1
	    (NETWORK-SEND-IT-2 RECIPIENTS TEMPLATE-EXPANSION))
	  (BARF "No mail server responded.")))))

;; Here for the real hard work.
(DEFUN NETWORK-SEND-IT-2 (RECIPIENTS TEMPLATE-EXPANSION
			  &AUX RECIPIENT-HOST-PAIRS RECIPIENT-SERVICE-PAIRS)
  ;; First bucket the recipients among known hosts
  (LOOP FOR RECIPIENT IN RECIPIENTS
	FOR HOST = (RECIPIENT-HOST-OBJECT RECIPIENT)
	DO (PUSH RECIPIENT (GET (LOCF RECIPIENT-HOST-PAIRS) (OR HOST :UNKNOWN))))
  ;; Then for each host, find a path to STORE-AND-FORWARD-MAIL or MAIL-TO-USER there.
  ;; (We get STORE-AND-FORWARD-MAIL, if possible, so that we can forward through it.)
  (LOOP FOR LIST ON RECIPIENT-HOST-PAIRS BY 'CDDR
	AS (HOST RECIPIENTS) = LIST
	FOR SERVICE = NIL
	DO (UNLESS (EQ HOST :UNKNOWN)
	     ;; At the local site, save ourselves the trouble of looking
	     (UNLESS (EQ (SEND HOST ':SITE) NETI:*LOCAL-SITE*)
	       (SETQ SERVICE (CONDITION-CASE ()
				 (NETI:FIND-PATH-TO-SERVICE-ON-HOST
				   ':STORE-AND-FORWARD-MAIL HOST)
			       (NET:HOST-DOES-NOT-SUPPORT-SERVICE
				 NIL))))
	     (WHEN (NULL SERVICE)
	       (SETQ SERVICE (CONDITION-CASE ()
				 (NETI:FIND-PATH-TO-SERVICE-ON-HOST
				   ':MAIL-TO-USER HOST)
			       (NET:HOST-DOES-NOT-SUPPORT-SERVICE
				 NIL)))))
	(UNLESS (NULL SERVICE)
	  (PUTPROP (LOCF RECIPIENT-SERVICE-PAIRS) RECIPIENTS SERVICE)
	  ;; Mark host as done
	  (SETF (CAR LIST) NIL)))
  ;; Now if there are recipients left to be done, match them up with store-and-forward
  ;; service at their site if possible, otherwise store-and-forward from anyplace will
  ;; do.
  (LOOP WITH UNSPECIFIC-SERVICE = NIL
	FOR (HOST RECIPIENTS) ON RECIPIENT-HOST-PAIRS BY 'CDDR
	WHEN (NOT (NULL HOST))
	DO (LET ((SITE (AND (NEQ HOST ':UNKNOWN) (SEND HOST ':SITE))))
	     (LOOP FOR LIST ON RECIPIENT-SERVICE-PAIRS BY 'CDDR
		   AS (SERVICE) = LIST
		   WHEN (AND (EQ (NETI:SERVICE-ACCESS-PATH-SERVICE SERVICE)
				 ':STORE-AND-FORWARD-MAIL)
			     (EQ (SEND (NETI:SERVICE-ACCESS-PATH-HOST SERVICE)
				       ':SITE)
				 SITE))
		   DO (SETF (CADR LIST) (APPEND (CADR LIST) RECIPIENTS))
		   (RETURN NIL)
		   FINALLY (UNLESS (OR (NULL SITE)
				       (EQ SITE NETI:*LOCAL-SITE*))
			     (LET ((PATHS (WITH-STACK-LIST (THAT-SITE ':SITE SITE)
					    (NETI:FIND-PATHS-TO-SERVICE
					      ':STORE-AND-FORWARD-MAIL THAT-SITE))))
			       (UNLESS (NULL PATHS)
				 (LET ((SERVICE (NETI:MOST-DESIRABLE-SERVICE-ACCESS-PATH
						  PATHS)))
				   (SETF (GET (LOCF RECIPIENT-SERVICE-PAIRS) SERVICE)
					 RECIPIENTS))
				 (RETURN NIL))))
		   (WHEN (NULL UNSPECIFIC-SERVICE)
		     (SETQ UNSPECIFIC-SERVICE
			   (LOOP FOR SERVICE IN RECIPIENT-SERVICE-PAIRS BY 'CDDR
				 WHEN (EQ (NETI:SERVICE-ACCESS-PATH-SERVICE
					    SERVICE)
					  ':STORE-AND-FORWARD-MAIL)
				 RETURN SERVICE))
		     (WHEN (NULL UNSPECIFIC-SERVICE)
		       (LET ((PATHS (NET:FIND-PATHS-TO-SERVICE
				      ':STORE-AND-FORWARD-MAIL)))
			 (SETQ PATHS (DEL-IF
				       #'(LAMBDA (PATH)
					   (EQ (NETI:SERVICE-ACCESS-PATH-HOST
						 PATH)
					       NET:*LOCAL-HOST*))
				       PATHS))
			 (WHEN (NULL PATHS)
			   (FERROR
			     "Could not find a server anywhere to handle these recipients: ~{~A~^, ~}"
			     (LOOP FOR (HOST RECIPIENTS) ON RECIPIENT-HOST-PAIRS
				   WHEN HOST
				   APPEND (LOOP FOR RECIPIENT IN RECIPIENTS
						COLLECT (STRING-FROM-HEADER
							  RECIPIENT ':SHORT)))))
			 (SETQ UNSPECIFIC-SERVICE
			       (NETI:MOST-DESIRABLE-SERVICE-ACCESS-PATH
				 PATHS)))))
		   (SETF (GET (LOCF RECIPIENT-SERVICE-PAIRS) UNSPECIFIC-SERVICE)
			 (APPEND (GET (LOCF RECIPIENT-SERVICE-PAIRS)
				      UNSPECIFIC-SERVICE)
				 RECIPIENTS)))))
  ;; Now everyone is done, do the actual sending
  (AND (CDDR RECIPIENT-SERVICE-PAIRS)
       (PUTPROP (LOCF TEMPLATE-EXPANSION) T ':MULTIPLE-SENDINGS))
  (LOOP FOR (SERVICE RECIPIENTS) ON RECIPIENT-SERVICE-PAIRS BY 'CDDR
	DO (INVOKE-MAIL-SERVICE SERVICE RECIPIENTS TEMPLATE-EXPANSION NIL)))

(DEFUN INVOKE-MAIL-SERVICE (SERVICE-ACCESS-PATH RECIPIENTS TEMPLATE-EXPANSION
			    CACHED-UNAVAILABILITY)
  (MAILER:WITH-MAILER-WITH-CACHED-UNAVAILABILITY
    (MAILER (IF CACHED-UNAVAILABILITY (* 5 60. 60.) 0) SERVICE-ACCESS-PATH)
    (LET ((DRAFT-MSG (GET (LOCF TEMPLATE-EXPANSION) :DRAFT-MSG))
	  (SUCCESSFUL-RECIPIENTS))
      (SEND MAILER :START-MESSAGE `(:USER ,SI:*USER*))
      (LOOP FOR RECIPIENT IN RECIPIENTS
	    DO (CONDITION-CASE (ERROR)
		   (SEND MAILER :VERIFY-RECIPIENT RECIPIENT)
		 (MAILER:MAILER-ERROR
		   (SIGNAL 'ZWEI:SEND-IT-FAILS-FOR-RECIPIENT
			   :EXPLANATION "Error"
			   :HOST (NETI:SERVICE-ACCESS-PATH-HOST SERVICE-ACCESS-PATH)
			   :RECIPIENT RECIPIENT
			   :RECIPIENT-EXPLANATION (STRING-FROM-HEADER RECIPIENT :HOST)
			   :RESPONSE (FORMAT NIL "~A" ERROR)
			   :DRAFT-MSG DRAFT-MSG))
		 (:NO-ERROR (PUSH RECIPIENT SUCCESSFUL-RECIPIENTS))))
      ;;Yes, I know this conses too much.
      (WITH-INPUT-FROM-STRING (STREAM (WITH-OUTPUT-TO-STRING (STREAM)
					(OUTPUT-HEADERS-AND-TEXT
					  STREAM TEMPLATE-EXPANSION)))
	(SEND MAILER :RECEIVE-MESSAGE NIL STREAM))
      ;;Tell Zmail that we made it.
      (WHEN (AND DRAFT-MSG (NOT (NULL SUCCESSFUL-RECIPIENTS)))
	(SEND DRAFT-MSG :MESSAGE-SENT SUCCESSFUL-RECIPIENTS TEMPLATE-EXPANSION
	      #'ZWEI:MESSAGE-SENT-ADDRESS-RECIPIENT-PRINTER "via ~A"
	      (NETI:SERVICE-ACCESS-PATH-HOST SERVICE-ACCESS-PATH)))
      (SEND MAILER :FINISH-MESSAGE))))
)


; From file smtp.lisp >rel-6>sys>zmail Q: (130)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

;; The server itself

(defun smtp-server (stream network foreign-host)
  (condition-case-if (not neti:*server-debug-flag*) (error)
      (with-local-mailer (mailer)
	(let ((naming-convention (smtp-naming-convention foreign-host))
	      (network-search-rules (send network :search-rules)))
	  (smtp-reply stream 220 "~A SMTP service ready."
		      (smtp-unparse-host *local-host* naming-convention network-search-rules))
	  (loop with (xcn-in-progress recipients sender send-msg)
		;; foreign-host is the object the network system believes is at the other end
		;;  of the connection.  It might not be the same as the real host if there is
		;;  a byte-stream gateway in the way or there is some host-table skew.
		;; claimed-host is the host the other end claims to be in the HELO command.
		;;  It can be a host object, or a string if that host cannot be parsed.
		;; routing-host is always a host object.  If claimed-host is a host object,
		;;  that is used, otherwise it is foreign-host.  This is the host used by
		;;  the mailer for up-down maintenance and so on.
		with (claimed-host routing-host)
		with (cline eof spx cmd args)
		with mail-stream = (make-instance 'smtp-server-stream :stream stream)
		doing
		(multiple-value (cline eof) (send stream :line-in))
		(when eof (error 'sys:end-of-file :stream stream))
		(setq spx (or (string-search-char #\space cline) (string-length cline)))
		(setq cmd (substring cline 0 spx))	;separate command and arguments
		(setq args (string-left-trim '(#\space) (substring cline spx)))
		(condition-case-if (not neti:*server-debug-flag*) (e)
		    (selector cmd string-equal	;dispatch on command
		      
		      ("HELO"
		       (if (setq claimed-host (smtp-parse-host args network network-search-rules))
			   (setq routing-host claimed-host)
			   (setq routing-host foreign-host
				 claimed-host args))
		       #+ignore			;not necessary any more, the received line says it all.
		       (when (neq claimed-host foreign-host)
			 (smtp-report "Host ~A claims to be ~A." foreign-host claimed-host))
		       (smtp-reply stream 250 "~A"
				   (smtp-unparse-host *local-host* naming-convention
						      network-search-rules)))
		      
		      ("MAIL"
		       (cond ((not (null xcn-in-progress))
			      (smtp-reply stream 503 "Transaction already in progress."))
			     ((null claimed-host)
			      (smtp-reply stream 503 "Please give a HELO command first."))
			     ((stringp (setq sender (smtp-parse-path "FROM" args
								     network-search-rules t)))
			      (smtp-reply stream 501 "Bad reverse path: ~A." sender))
			     ((null mailer)
			      (smtp-reply stream 502 "No local mailer."))
			     (t
			      (when sender
				(setf sender (add-host-to-route routing-host sender)))
			      (send mailer :start-message sender)
			      (setq xcn-in-progress t)
			      (setq recipients nil)
			      (setq send-msg nil)
			      (smtp-ok stream))))
		      
		      ("SEND"
		       (cond ((not (null xcn-in-progress))
			      (smtp-reply stream 503 "Transaction already in progress."))
			     ((null claimed-host)
			      (smtp-reply stream 503 "Please give a HELO command first."))
			     ((stringp (setq sender (smtp-parse-path "FROM" args
								     network-search-rules t)))
			      (smtp-reply stream 501 "Bad reverse path: ~A." sender))
			     (t
			      (setq xcn-in-progress t)
			      (setq recipients nil)
			      (setq send-msg t)
			      (smtp-ok stream))))
		      
		      (("SOML" "SAML")
		       (smtp-reply stream 502 "SOML and SAML not implemented."))
		      
		      ("RCPT"
		       (let ((recip (smtp-parse-path "TO" args network-search-rules nil)))
			 (cond ((null xcn-in-progress)
				(smtp-reply stream 503 "No transaction in progress."))
			       ((stringp recip)
				(smtp-reply stream 501 "Bad forward path: ~A." recip))
			       (send-msg
				(let ((converse-reject (zwei:converse-reject-message-p recip)))
				  (if converse-reject
				      (smtp-reply stream 550 "~A" converse-reject)
				      (push recip recipients)
				      (smtp-ok stream))))
			       (t (send mailer :verify-recipient recip)
				  (push recip recipients)
				  (smtp-ok stream)))))
		      
		      ("DATA"
		       (cond ((null xcn-in-progress)
			      (smtp-reply stream 503 "No transaction in progress."))
			     ((null recipients)
			      (smtp-reply stream 503 "No recipients specified."))
			     (send-msg
			      (smtp-reply stream 354 "Message: (end with .)")
			      (zwei:converse-process-incoming-message
				:date (time:get-universal-time) :from sender
				:text (with-output-to-string (str)
					(stream-copy-until-eof mail-stream str)))
			      (setq xcn-in-progress nil)
			      (smtp-ok stream))
			     (t
			      (smtp-reply stream 354 "Message: (end with .)")
			      (send mailer :receive-message
				    (smtp-received-line network network-search-rules
							claimed-host foreign-host)
				    mail-stream)
			      (setq xcn-in-progress nil)
			      (smtp-ok stream)
			      (send mailer :finish-message))))
		      ("RSET"
		       (when mailer (send mailer :reset))
		       (setq xcn-in-progress nil)
		       (smtp-ok stream))
		      
		      ("VRFY"
		       (condition-case (user)
			   (neti:find-object-named :user args)
			 (object-not-found (smtp-reply stream 550 "~A" e))
			 (:no-error (smtp-reply stream 250
						(smtp-unparse-path `(:user ,user)
								   naming-convention
								   network-search-rules)))))
		      
		      ("EXPN"
		       (let ((recipients (send mailer :expand-recipient args)))
			 (if (symbolp recipients)
			     (smtp-reply stream 550 "No such mailbox.")
			     (smtp-reply stream 250 "~{~A~^~%~}"
					 (loop for recipient in recipients
					       collect (smtp-unparse-path recipient 
									  naming-convention
									  network-search-rules))
					 ))))
		      
		      ("HELP"
		       (smtp-reply stream 214 "LISP Machine SMTP server version of 1 June 1983.
Protocol is RFC 821.
Commands supported are HELO, MAIL, RCPT, DATA, RSET, HELP, NOOP, VRFY, EXPN, and QUIT."))
		      
		      ("NOOP"
		       (smtp-ok stream))
		      
		      ("QUIT"
		       (smtp-reply stream 221 "Goodbye.")
		       ;; Don't do a :close here, since the user is doing one too.  On networks
		       ;; like the chaosnet, both ends would hang up waiting for an ack of an
		       ;; eof.  Assume that the user side does the eof type close, we do an abort
		       ;; close (from :no-eof t above).
		       (send stream :finish)
		       (return))
		      
		      ("TURN"
		       (if (not (and (fboundp 'mailer:foreground-active)
				     (mailer:foreground-active)))
			   (smtp-reply stream 502 "There is no mailer running on this machine.")
			   (let ((user (make-instance 'smtp-user :host routing-host
						      :stream stream)))
			     (send user :became-user))))
		      
		      (otherwise
			(smtp-reply stream 500 "Unknown command ~A." cmd)))
		  
		  (mailer-error (smtp-reply stream
					    (if (typep e 'mailer-temporary-error) 450 550)
					    "~A" e))
		  (error (smtp-reply stream 451 "~A" e))))))
    (mailer-error
      (smtp-reply stream 421 "~A" error)
      (send stream :finish))
    ((sys:remote-network-error sys:end-of-file))
    ))

)


; From file smtp.lisp >rel-6>sys>zmail Q: (130)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

(defmethod (smtp-user :init) (ignore)
  (smtp-check-reply stream 220 timeout)
  (setq naming-convention (smtp-naming-convention host))
  (when (and (eq naming-convention :arpanet)
	     (not (string-equal smtp-command "MAIL")))
    (setf naming-convention :internet))
  (setq network-search-rules (if (send stream :operation-handled-p :network)
				 (send (send stream :network) :search-rules)
				 *namespace-search-list*))
  (smtp-check-reply stream 250 timeout "HELO ~A"
		    (smtp-unparse-host *local-host* naming-convention network-search-rules)))

)


; From file smtp.lisp >rel-6>sys>zmail Q: (130)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

(defmethod (smtp-user :start-message) (&rest ignore)
  (smtp-check-reply stream 250 timeout "~A From:<~A>" smtp-command
		    (smtp-unparse-path (add-host-to-route net:*local-host* return-path)
				       naming-convention network-search-rules)))

)


; From file smtp.lisp >rel-6>sys>zmail Q: (130)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

(defun add-host-to-route (host sender)
  (let ((route (get (locf sender) :route))
	(obj `(:object ,host)))
    (unless (equal obj
		   (if route
		       (first route)
		       (get (locf sender) :host)))		
      (setf sender (copytree sender))
      (setf (get (locf sender) :route) (list* obj route))))
  sender)

)

;;; -*- Mode: LISP; Syntax: Zetalisp; Package: ZWEI; Base: 10; Patch-file: T -*-
;;; Patch file for Zmail version 107.4
;;; Reason: Function (:METHOD MAILER:CHAOS-MAIL-USER :VERIFY-RECIPIENT):  Fix left out of previous patch.
;;; Written by File-Server, 4/23/85 11:46:06
;;; while running on Stony Brook from FEP0:>rel6-server-mmpt-ns-fixed.load.1
;;; with Release 6.0, System 271.34, Zmail 107.3, LMFS 57.2, Tape 41.1, Basic Sage 15.9, Documentation Database 3.2, Common Lisp 4.2, Experimental Writer Tools 12.23, SCRC 5.5, Print 38.0, Mailer 43.3, IP-TCP 29.3, File Server stuff 1.5, microcode TMC5-MIC 319, Automatic server bug reporter, Namespace Server, MMPT fix.



; From file chaos-mail.lisp >rel-6>sys>zmail Q: (70)
#10R MAILER::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "MAILER")))

(defmethod (chaos-mail-user :verify-recipient) (recipient)
  (let ((recipient-string (zwei:string-from-header recipient string-from-header-type :localnet)))
    (when (string-search-char #\cr recipient-string)
      (ferror "Chaos mail does not permit Return to appear in recipient names."))
    (neti:with-stream-timeout (stream :output timeout)
      (send stream :line-out recipient-string)
      (send stream :force-output)))
  (chaos-mail-user-check-reply))

)

;;; - - - END OF PATCH - - -

	Date: Wed, 24 Apr 1985  04:01 EST
	From: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>
	To:   Gavan Duffy <GAVAN%MIT-OZ@MIT-MC.ARPA>
	Cc:   BUG-HTVAX%MIT-OZ@MIT-MC.ARPA, BUG-MARTY%MIT-OZ@MIT-MC.ARPA,
	      CJL%MIT-OZ@MIT-MC.ARPA
	Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
	In-reply-to: Msg of 24 Apr 1985 02:29-EST from Gavan Duffy <GAVAN at OZ>

	    Date: Wednesday, 24 April 1985, 02:29-EST
	    From: Gavan Duffy <GAVAN at OZ>

	    Since when is OZ unknown?  Since when is MC unknown?  Since HTVAX got into
	    the mail loop, that's when!  I thought HTVAX was taken out of the loop
	    so that problems like this wouldn't arise anymore.

	    Maybe the problem is that HTVAX can't handle domains?  Anyway, here's
	    the forwarded mail.

	    Date: Tue 23 Apr 85 23:18:19-EST
	    From: Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>
	    Subject: Returned mail: Host unknown
	    Message-Id: <8504240425.AA03948@MIT-HTVAX.ARPA>
	    To: David M. J. Saslav <SAZ%MIT-OZ@MIT-MC.ARPA>

	       ----- Transcript of session follows -----
	    550 GAVAN%OZ.MIT... Host unknown

	       ----- Unsent message follows -----
	    Received: from MIT-MC by MIT-HTVAX (4.12/4.7) with CHAOS 
		id AA03941; Tue, 23 Apr 85 23:21:04 est
	    Message-Id: <8504240421.AA03941@MIT-HTVAX.ARPA>
	    Received: from MIT-OZ by MIT-MC via Chaosnet; 23 APR 85  23:16:25 EST
	    Date: Tue 23 Apr 85 23:18:19-EST
	    From: David M. J. Saslav <SAZ%MIT-OZ@MIT-MC.ARPA>
	    Subject: no need to apolgize -- i'm a twit
	    To: GAVAN%OZ.MIT@MIT-HTVAX.ARPA
	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	    In-Reply-To: Message from "Gavan Duffy <GAVAN%OZ.MIT@MIT-HTVAX.ARPA>" of Tue 23 Apr 85 23:13:31-EST

	This message was addressed to GAVAN%OZ.MIT@MIT-HTVAX.ARPA. It has nothing
	to do with whether HTVAX is or is not 'in the mail loop', the message was
	explicitly routed to HTVAX by the sender and the mail system cannot presume
	to change the requested routing.

	In fact, the message would have gotten rejected whether it went thru HT,
	MC, AI, XX or direct thru OZ itself.  It's true that none of these hosts
	handle domains yet, but even if they did, "OZ.MIT" would still be an
	illegal host name.  There is not now, and there will never be, a top level
	MIT domain.  Furthermore at this time there is no MIT subdomain of any
	top-level domain, so this isn't even a valid abbreviation for any real host
	name.

	Judging by the in-reply-to field, your original message had this as your
	address.  As long as you keep using software that's sending out headers
	with all these bogus 'domains' (or perhaps until an MIT domain is actually
	created), people everywhere are going to have problems replying to you.

    OK, then, I believe you.  It's a Symbolics bug.  I'll send it to them.  Thanks.
    I still don't know how HTVAX got in there.  Chris?


25-Apr-85 09:45:08-EST,1919;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 25 Apr 85 09:44-EST
Date: Thursday, 25 April 1985, 09:42-EST
From: Gavan Duffy <GAVAN at OZ>
Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
To: Hornig at STONY-BROOK.SCRC.Symbolics.COM, GAVAN at OZ,
    BUG-ZMAIL at OZ
cc: BUG-HTVAX at OZ, BUG-MARTY at OZ, CJL at OZ, GZ at OZ
In-Reply-To: <850425091357.5.HORNIG@HUDSON.SCRC.Symbolics.COM>
Message-ID: <850425094213.4.GAVAN@MORRISON.MIT>

    Date: Thu, 25 Apr 85 09:13 EST
    From: Charles Hornig <Hornig@STONY-BROOK.SCRC.Symbolics.COM>

	Date: Wednesday, 24 April 1985, 05:46-EST
	From: Gavan Duffy <GAVAN at OZ>

	ZMAIL is losing big, apparently.  Here's the bottom line from GZ,
	yanked from below:

	  ``As long as you keep using software that's sending out headers
	  with all these bogus 'domains' (or perhaps until an MIT domain is actually
	  created), people everywhere are going to have problems replying to you.''  

	Who's in charge over there, anyway?

    OK, here's the whole story.

    The ".MIT"'s are coming from the INTERNET-DOMAIN-NAME property of the
    MIT namespace.  If you don't intend to use domains, you should get rid
    of this attribute.  When you do, wou will fond that this is not
    sufficient, due to a bug.  The patch given below will fix this bug.

    It also fixes a few others.

Thanks VERY much for the patch.

    After all of this, you will now get headers like
    "GAVAN%MIT-OZ@MIT-HTVAX.ARPA".  This is intentional.  After all, people
    outside of MIT couldn't reply to them if they just said GAVAN@OZ.  It is
    using HTVAX because it is an Internet store-and-forward mail server in
    the same site as the LispM sending the mail.

    I hope you can get your mailers to accept domain names soon.

Me too.  Who's in charge over here, anyway?
25-Apr-85 20:25:05-EST,1354;000000000000
Mail-From: GZ created at 25-Apr-85 20:24:54
Date: Thu, 25 Apr 1985  20:24 EST
Message-ID: <GZ.12106087519.BABYL@MIT-OZ>
From: Gail Zacharias <GZ@MIT-OZ>
To:   Gavan Duffy <GAVAN@MIT-OZ>
Cc:   BUG-MARTY@MIT-OZ, CJL@MIT-OZ, Hornig@SCRC-STONY-BROOK.ARPA,
      bug-zmail@MIT-OZ
Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
In-reply-to: Msg of 25 Apr 1985 09:42-EST from Gavan Duffy <GAVAN at OZ>

    Date: Thursday, 25 April 1985, 09:42-EST
    From: Gavan Duffy <GAVAN at OZ>
        I hope you can get your mailers to accept domain names soon.
    Me too.  Who's in charge over here, anyway?

The situation on this end is that OZ is running the standard TOPS-20 mail
system, which doesn't support domains yet.  Thus this is the situation at
just about every TOPS-20 in the world.  Probably OZ is not going to support
domains until there is an MIT subdomain and an MIT domain name server, because
we need to be able to talk to domain servers over the chaosnet.  Right now
the few domain servers that exist all talk UDP only (not even TCP!) and
are highly limited and unreliable to boot.

Btw, (bug-zmail people or whoever), connecting to the domain server at
stony-brook and sending any CNAME request returns an authoritative name
error.  That's a bug.
29-Apr-85 02:14:28-EDT,6101;000000000000
Received: from MIT-APIARY-4 by MIT-OZ via Chaosnet; 29 Apr 85 02:14-EDT
Date: Mon, 29 Apr 85 02:12 EDT
From: Randy Parker <PARKER@OZ>
Subject: ZMAIL Save all files "file owned by ... Save anyway?" query
To: BUG-ZMAIL@OZ
cc: PARKER@OZ
Message-ID: <850429021240.2.PARKER@APIARY-4>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 8.6,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-4:

Why does ZMAIL give me a "The file ~A is owned by ~A.  Save it anyway? "
message when I try to save a mail buffer out using the 'S' key.  It is going out to the
same file it came in from, and I have already logged in (when it was read in)
as that user (which it got from my namespace object).  Just because that is
different than my LISPM username, etc. shouldn't cause me to be queried, at least
not as a default. 

Is there a way to turn this off?  <<Sources not present; disassembly not helpful.>>
(setq zwei:*paranoid-about-possible-zmail-file-overwrite* nil)

Thanks,
RP

>>Break: 
While in the function PROCESS-WAIT  TV:KBD-IO-BUFFER-INPUT-WAIT  (:METHOD
                                                                    TV:STREAM-MIXIN
                                                                    :INPUT-WAIT)
...frames deleted...

FORMAT:TYI-FQUERY-FUNCTION:  (P.C. = 12)
   Arg 0 (OPERATION): :READ
   Rest arg (SELECT-METHOD-ARGS): (#:*TYPEIN-WINDOW*-SYN-STREAM)

FQUERY:  (P.C. = 464)
   Arg 0 (OPTIONS): (:SELECT T :BEEP T)
   Arg 1: "The file ~A is owned by ~A.  Save it anyway? "
   Rest arg: ("EECS:PS:<LE.GRP>LE/.GRP.BABYL" "LE.GRP")

ZWEI:SAVE-MAIL-BUFFER:  (P.C. = 43)
   Arg 0 (BUFFER): #<BABYL-BUFFER "EECS:PS:<LE.GRP>LE/.GRP.BABYL" 13117717>
   --Defaulted args:--
   Arg 1 (FOR-FINISH): NIL

ZWEI:ZMAIL-SAVE-ALL:  (P.C. = 46)

ZWEI:COM-ZMAIL-SAVE:  (P.C. = 16)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-SAVE
   Arg 1 (CHAR): 115
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-SAVE

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-COMMAND-CHAR
   Arg 3 (CH): 115

(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (115)

(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN -- 6. IV's, 0. FL's 142611503>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL
                                                            (:INTERNAL
                                                             (:METHOD
                                                              ZWEI:ZMAIL-FRAME
                                                              :COMBINED
                                                              :PROCESS-COMMAND-CHAR)
                                                             0)
                                                            0) 47674121>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 115

(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0):  (P.C. = 13)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (115)

(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL
                                                            (:METHOD
                                                             ZWEI:ZMAIL-FRAME
                                                             :COMBINED
                                                             :PROCESS-COMMAND-CHAR)
                                                            0) 47674106>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 115

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (115)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 143)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
29-Apr-85 03:35:01-EDT,818;000000000000
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 29 Apr 85 03:34-EDT
Date: Mon, 29 Apr 85 03:32 EDT
From: Gavan Duffy <GAVAN@OZ>
Subject: ZMAIL Save all files "file owned by ... Save anyway?" query
To: PARKER@OZ, BUG-ZMAIL@OZ
In-Reply-To: <850429021240.2.PARKER@APIARY-4>
Message-ID: <850429033220.8.GAVAN@MORRISON>

    Date: Mon, 29 Apr 85 02:12 EDT
    From: Randy Parker <PARKER@OZ>

    Is there a way to turn this off?  <<Sources not present; disassembly not helpful.>>
    (setq zwei:*paranoid-about-possible-zmail-file-overwrite* nil)

A while back, DCP said that ZMAIL sources were to be withheld only for sites
with very limited disk space.  This is clearly not MIT.  He said the ZMAIL
sources should be propagated to MIT pronto.  They're still not here.  Can we
get them soon, please?	
29-Apr-85 22:28:47-EDT,644;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 29 Apr 85 22:28-EDT
Date: Mon, 29 Apr 85 22:25:57 EDT
From: David Vinayak Wallace <GUMBY@MIT-MC>
Subject:  ZMAIL Save all files "file owned by ... Save anyway?" query
To: PARKER@MIT-OZ
cc: BUG-ZMAIL@MIT-OZ
In-reply-to: Msg of Mon 29 Apr 85 02:12 EDT from Randy Parker <PARKER at OZ>
Message-ID: <[MIT-MC].475968.850429.GUMBY>

I can't look at the file because of its protection, but would guess that
it's owner is LE.GRP.  If you delete the OWNER attribute in the options
section at the head of the babyl file you shouldn't be asked the question.

This is in the BABYL documentation.
 4-May-85 17:43:26-EDT,6566;000000000000
Received: from MIT-ROBOT-5 by MIT-OZ via Chaosnet; 4 May 85 17:43-EDT
Date: Sat, 4 May 85 17:41 EDT
From: David M. J. Saslav <saz@OZ>
Subject: a weird one
To: BUG-zmail@OZ
Message-ID: <850504174133.1.SAZ@ROBOT-5>

In Symbolics 3670 Release 6.0, IP-TCP 29.0, AISite 9.1,
microcode TMC5-IO4-FPA-MIC 319, on Lisp Machine Robot-5:

All I did was a get inbox...verrrrry strange indeed! (I included
all stack frames because I have no idea as to where the deviation
from righteousness is taking place here... apologies.

dave

>>Error: Response over control connection was for wrong file handle
While in the function FS:FILE-CHECK-HANDLE  (:METHOD FS:HOST-UNIT :COMMAND)  FS:OPEN-CHAOS

FS:FILE-CHECK-HANDLE:  (P.C. = 22)
   Arg 0 (HANDLE): "O2402"
   Arg 1 (STRING): " ERROR BUG F Illegal request format"
   Local 2 (HANDLE-END): 0

(:METHOD FS:HOST-UNIT :COMMAND):  (P.C. = 133)
   Arg 0 (SELF): #<HOST-UNIT 17576126>
   Arg 1 (SELF-MAPPING-TABLE): FS:HOST-UNIT
   Arg 2 (OPERATION): :COMMAND
   Arg 3 (MARK-P): NIL
   Arg 4 (STREAM-OR-HANDLE): (:CREATE "O2402")
   Local 4 (STREAM-OR-HANDLE): "O2402"
   Arg 5 (SIMPLE-P): NIL
   Arg 6 (WHOSTATE): "Open"
   Rest arg (COMMANDS): ("OPEN " :WRITE " " :CHARACTER "" "" "" "" "" "" ...)

FS:OPEN-CHAOS:  (P.C. = 674)
   Arg 0 (ACCESS-PATH): #<TOPS20-QFILE-ACCESS-PATH OZ using QFILE 17576115>
   Arg 1 (REAL-PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Arg 2: #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Arg 3 (OPTIONS): (:DIRECTION :OUTPUT)

(:METHOD FS:QFILE-ACCESS-PATH :OPEN):  (P.C. = 7)
   Arg 0 (SELF): #<TOPS20-QFILE-ACCESS-PATH OZ using QFILE 17576115>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor FS:QFILE-ACCESS-PATH -- 4. IV's, 0. FL's 121666243>
   Arg 2 (OPERATION): :OPEN
   Arg 3 (REAL-PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Arg 4 (PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Rest arg (OPTIONS): (:DIRECTION :OUTPUT)

(:METHOD FS:ACTIVE-PATHNAME-MIXIN :OPEN):  (P.C. = 14)
   Arg 0 (SELF): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor FS:ACTIVE-PATHNAME-MIXIN -- 1. IV's, 0. FL's 105211451>
   Arg 2 (OPERATION): :OPEN
   Arg 3 (PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Rest arg (OPTIONS): (:DIRECTION :OUTPUT)

FS:COMMON-LISP-OPEN:  (P.C. = 450)
   Arg 0 (PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Arg 1 (KEYWORD-ARGS): (:DIRECTION :OUTPUT)

OPEN:  (P.C. = 257)
   Arg 0 (PATHNAME): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">
   Rest arg (KEYWORD-ARGS): (:DIRECTION :OUTPUT)

(:METHOD ZWEI:MSG-BUFFER :OPEN-SAVING-STREAM):  (P.C. = 13)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:MSG-BUFFER -- 15. IV's, 0. FL's 142630543>
   Arg 2 (OPERATION): :OPEN-SAVING-STREAM
   Arg 3 (PATH): #<TOPS20-PATHNAME "OZ:PS:<SAZ>SAZ.BABYL">

ZWEI:MAIL-BUFFER-SAVE-SETUP:  (P.C. = 345)
   Arg 0 (BUFFER): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>
   --Defaulted args:--
   Arg 1 (CHECK-ONLY): NIL
   Arg 2 (NO-OUTPUT): NIL

ZWEI:BUFFER-BACKGROUND-SAVE:  (P.C. = 73)
   Arg 0 (BUFFER): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>

(:METHOD ZWEI:FILE-MAIL-BUFFER :LOADING-DONE):  (P.C. = 57)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:FILE-MAIL-BUFFER -- 9. IV's, 1. FL's 142630564>
   Arg 2 (OPERATION): :LOADING-DONE

(:INTERNAL (:METHOD ZWEI:BABYL-BUFFER :COMBINED :LOADING-DONE) 0):  (P.C. = 11)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 142630520>
   Arg 2 (.OPERATION.): :LOADING-DONE
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:METHOD ZWEI:MSG-BUFFER :WHOPPER :LOADING-DONE):  (P.C. = 31)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:MSG-BUFFER -- 15. IV's, 0. FL's 142630543>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:BABYL-BUFFER :COMBINED :LOADING-DONE) 0) 47714454>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 142630520>
   Arg 4 (.OPERATION.): :LOADING-DONE

(:METHOD ZWEI:BABYL-BUFFER :COMBINED :LOADING-DONE):  (P.C. = 13)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 142630520>
   Arg 2 (.OPERATION.): :LOADING-DONE
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:INTERNAL ZWEI:ZMAIL-BACKGROUND-REQUEST 1 (ZWEI:FILE-LOADED)):  (P.C. = 4)
   Arg 0 (**DEFSELECT-OP**): ZWEI:FILE-LOADED
   Arg 1 (BUFFER): #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>

ZWEI:ZMAIL-BACKGROUND-REQUEST:  (P.C. = 22)
   Arg 0 (OPERATION): ZWEI:FILE-LOADED
   Rest arg (SELECT-METHOD-ARGS): (#<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>)

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 5 (ZWEI:BACKGROUND)):  (P.C. = 5)
   Arg 0 (**DEFSELECT-OP**): ZWEI:BACKGROUND
   Rest arg (ARGS): (ZWEI:FILE-LOADED #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>)

ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 62)
   Arg 0 (OPERATION): ZWEI:BACKGROUND
   Rest arg (SELECT-METHOD-ARGS): (ZWEI:FILE-LOADED #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>)

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-SPECIAL-COMMAND
   Rest arg (ARGS): (ZWEI:BACKGROUND ZWEI:FILE-LOADED #<BABYL-BUFFER "OZ:PS:<SAZ>SAZ.BABYL" 7176402>)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
 5-May-85 13:07:36-EDT,4453;000000000000
Received: from MIT-ROBOT-2 by MIT-OZ via Chaosnet; 5 May 85 13:07-EDT
Date: Sun, 5 May 85 13:06 EDT
From: Patrick A. O'Donnell <PAO@MIT-EECS>
Subject: Problem reading inbox.
To: BUG-zmail@OZ
Message-ID: <850505130625.1.PAO@ROBOT-2>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.0,
Experimental NS 23.61, microcode TMC5-MIC 319, FEP 18,
Local NS patches  V1, on Lisp Machine Robot-2:

I clicked [Get Inbox], then, as it was loading, I was reading and
deleting some messages.  After typing 'd' for one of them, the process
went into a "Mail Sequence Lock" for a few moments (there was other
stuff going on in the background) then this error came up.

>>Error: The inbox EECS:PS:<PAO>MAIL.TXT.1 just finished loading,
         but is in :AWAITING-BUFFER state.
While in the function (:METHOD ZWEI:INBOX-BUFFER :LOADING-DONE)  (:INTERNAL (:METHOD ZWEI:TENEX-INBOX-BUFFER :COMBINED :LOADING-DONE) 0.)  (:METHOD ZWEI:MSG-BUFFER :WHOPPER :LOADING-DONE)

(:METHOD ZWEI:INBOX-BUFFER :LOADING-DONE):  (P.C. = 102)
   Arg 0 (SELF): #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:INBOX-BUFFER -- 12. IV's, 0. FL's 142672535>
   Arg 2 (OPERATION): :LOADING-DONE
   Local 3 (OTHER-STATUS): NIL

(:INTERNAL (:METHOD ZWEI:TENEX-INBOX-BUFFER :COMBINED :LOADING-DONE) 0.):  (P.C. = 11)
   Arg 0 (SELF): #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:TENEX-INBOX-BUFFER -- 1. IV's, 5. FL's 142672563>
   Arg 2 (.OPERATION.): :LOADING-DONE
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:METHOD ZWEI:MSG-BUFFER :WHOPPER :LOADING-DONE):  (P.C. = 31)
   Arg 0 (SELF): #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:MSG-BUFFER -- 15. IV's, 0. FL's 142672514>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:TENEX-INBOX-BUFFER :COMBINED :LOADING-DONE) 0.) 47715321>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:TENEX-INBOX-BUFFER -- 1. IV's, 5. FL's 142672563>
   Arg 4 (.OPERATION.): :LOADING-DONE

(:METHOD ZWEI:TENEX-INBOX-BUFFER :COMBINED :LOADING-DONE):  (P.C. = 13)
   Arg 0 (SELF): #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:TENEX-INBOX-BUFFER -- 1. IV's, 5. FL's 142672563>
   Arg 2 (.OPERATION.): :LOADING-DONE
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:INTERNAL ZWEI:ZMAIL-BACKGROUND-REQUEST 1. (ZWEI:FILE-LOADED)):  (P.C. = 4)
   Arg 0 (**DEFSELECT-OP**): ZWEI:FILE-LOADED
   Arg 1 (BUFFER): #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>

ZWEI:ZMAIL-BACKGROUND-REQUEST:  (P.C. = 22)
   Arg 0 (OPERATION): ZWEI:FILE-LOADED
   Rest arg (SELECT-METHOD-ARGS): (#<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>)

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 5. (ZWEI:BACKGROUND)):  (P.C. = 5)
   Arg 0 (**DEFSELECT-OP**): ZWEI:BACKGROUND
   Rest arg (ARGS): (ZWEI:FILE-LOADED #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>)

ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 62)
   Arg 0 (OPERATION): ZWEI:BACKGROUND
   Rest arg (SELECT-METHOD-ARGS): (ZWEI:FILE-LOADED #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>)

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-SPECIAL-COMMAND
   Rest arg (ARGS): (ZWEI:BACKGROUND ZWEI:FILE-LOADED #<TENEX-INBOX-BUFFER "EECS:PS:<PAO>MAIL.TXT.1" 27300114>)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
 6-May-85 03:25:46-EDT,1110;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 6 May 85 03:25-EDT
Date: Mon,  6 May 85 03:10:10 EST
From: David Vinayak Wallace <GUMBY@MIT-MC>
Subject:  [DOUG: XMail files in ZBabyl]
To: BUG-ZMAIL@MIT-MC
Message-ID: <[MIT-MC].486840.850506.GUMBY>

Date: 5 May 1985  23:19 PDT (Sun)
From: Doug Cutting <DOUG at SU-CSLI.ARPA>
To:   Gumby at SU-CSLI.ARPA
cc:   Doug at SU-CSLI.ARPA
Re:   XMail files in ZBabyl

ZBabyl does not deal well with XMail files.  It says it is appending
to some file other than that listed in the options, and then it
doesn't actually append it anywhere.  I assume this is because most
ZBabyl users use it under ITS...

Here are some excerpts from a photo:

Appending to XMail file PS:<EMACS165>BABYL.EXE.4

Appending to XMail file PS:<MAIL.QUEUE>^V[--QUEUED-MAIL--^V].NEW-132157165463-DOUG-BABYL.1

And I have the following in the header of my Babyl file:

XMail: PS:<DOUG.SYS>CC.TXT.1
XMail Append

(If I edit my Babyl file and change the second line to "Xmail Append: 1"
then Babyl changes it back to this the next time it writes the file.)

					Doug
 7-May-85 02:27:25-EDT,5239;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 7 May 85 02:27-EDT
Received: from MIT-CROSBY by MIT-MC via Chaosnet; 6 MAY 85  22:47:25 EDT
Date: Mon, 6 May 85 22:46 EDT
From: Randy Parker <PARKER@OZ>
Subject: Profile problems with hosts
To: BUG-LISPM@OZ, bug-zmail@OZ
Message-ID: <850506224655.3.PARKER@CROSBY>
Fonts: CPTFONT, CPTFONTB

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.1,
microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:
Warm booted from: ZMACS-WINDOWS.

Awhile back I edited my profile and typed "Randy Parker <parker@oz>" to the choose
variables window in Edit profile for the value of *default-cc-list*.  ZMAIL inserted
the following form in my zmail init file:

(LOGIN-SETQ zwei:*DEFAULT-CC-LIST* '((:PERSONAL-NAME "Randy Parker"
                                                :NAME
                                                "PARKER"
                                                :HOST
                                                (:OBJECT "OZ"))))

When I check *default-cc-list*, it reads as follows:
((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>)))

All this is fine (and has been since that time), but recently, after selecting other
options in the profile variable windows, clicking on EDIT, and then evaling the profile
buffer (this has been repeated several times), any attempt to Reply or Mail generates
this error.  

Of course, *default-cc-list* gives this:
((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))

It is clear which is right and how to get the host object, but both are being
generated by the system. I haven't had a chance to look at ZWEI:STRING-FROM-HEADER.



>>Error: The array, "OZ", is not a valid function except when
         given a valid subscript as its argument.
While in the function "OZ"  ZWEI:STRING-FROM-HEADER  ZWEI:PRINT-ADDRESS-HEADER

"OZ":
   Arg 0: :DEFAULT-MAIL-NAMING-CONVENTION

ZWEI:STRING-FROM-HEADER:  (P.C. =223)  (from 1AISITE: AISITE; NETWORK0)
   Arg 0 (HEADER): (:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ"))
   Arg 1 (FORMAT): NIL
   Arg 2 (NAMING-CONVENTION): :DEFAULT

ZWEI:PRINT-ADDRESS-HEADER:  (P.C. = 115)
   Arg 0 (STREAM): #<INTERVAL-STREAM 30326544>
   Arg 1 (LIST): ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))
   Arg 2 (NAME): "cc"
   Arg 3 (EXPANSION): (:STARTING-POINT ((:HEADERS :TO)) :HEADERS (:TO NIL :SUBJECT NIL :CC ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST **))) :MSGS (#<MSG 1151704>))
   Arg 4 (MAX-COL): 72

ZWEI:PRINT-HEADER:  (P.C. = 37)
   Arg 0 (STREAM): #<INTERVAL-STREAM 30326544>
   Arg 1 (HEADER): ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))
   Arg 2 (TYPE): :CC
   Arg 3 (EXPANSION): (:STARTING-POINT ((:HEADERS :TO)) :HEADERS (:TO NIL :SUBJECT NIL :CC ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST **))) :MSGS (#<MSG 1151704>))
   --Defaulted args:--
   Arg 4 (MAX-COL): 72

ZWEI:OUTPUT-HEADERS:  (P.C. = 40)
   Arg 0 (STREAM): #<INTERVAL-STREAM 30326544>
   Arg 1 (TEMPLATE-EXPANSION): (:STARTING-POINT ((:HEADERS :TO)) :HEADERS (:TO NIL :SUBJECT NIL :CC ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST **))) :MSGS (#<MSG 1151704>))
   --Defaulted args:--
   Arg 2 (CR-AT-END): NIL

(:METHOD ZWEI:DRAFT-MSG :AFTER :INIT):  (P.C. = 117)
   Arg 0 (SELF): #<DRAFT-MSG 30326435>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:DRAFT-MSG -- 17. IV's, 3. FL's 142602645>
   Arg 2 (OPERATION): :INIT
   Arg 3 (PLIST): #<DTP-LOCATIVE 43640442>

(:METHOD ZWEI:DRAFT-MSG :COMBINED :INIT):  (P.C. = 20)
   Arg 0 (SELF): #<DRAFT-MSG 30326435>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:DRAFT-MSG -- 17. IV's, 3. FL's 142602645>
   Arg 2 (.OPERATION.): :INIT
   Rest arg (.DAEMON-CALLER-ARGS.): (#<DTP-LOCATIVE 43640442>)

INSTANTIATE-FLAVOR:  (P.C. = 445)
   Arg 0 (FLAVOR-NAME): ZWEI:DRAFT-MSG
   Arg 1 (INIT-PLIST): #<DTP-LOCATIVE 43640442>
   Arg 2 (SEND-INIT-MESSAGE-P): :MAYBE
   --Defaulted args:--
   Arg 3 (RETURN-UNHANDLED-KEYWORDS-P): NIL
   Arg 4 (AREA-TO-CONS-INSTANCE-IN): NIL

Rest of stack:
MAKE-INSTANCE:  (P.C. = 6)
ZWEI:MAKE-DRAFT-MSG:  (P.C. = 6)
ZWEI:MAKE-DRAFT-MSG-FROM-TEMPLATE:  (P.C. = 4)
ZWEI:COMPOSE-VIA-DRAFT-MSG:  (P.C. = 3)
ZWEI:FUNCALL-TEMPLATE-EXPANSION:  (P.C. = 47)
ZWEI:COMPOSE-FROM-TEMPLATE:  (P.C. = 20)
ZWEI:COM-ZMAIL-MAIL:  (P.C. = 11)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0):  (P.C. = 10)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0):  (P.C. = 13)
(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 143)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
 8-May-85 17:00:15-EDT,2863;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 8 May 85 16:55-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA;  8 MAY 85 16:53:02 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 232875; Wed 8-May-85 15:35:00-EDT
Date: Wed, 8 May 85 15:39 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Profile problems with hosts
To: PARKER%mit-OZ@MIT-MC.ARPA
cc: BUG-LISPM%mit-OZ@MIT-MC.ARPA, bug-zmail%mit-OZ@MIT-MC.ARPA
In-Reply-To: <850506224655.3.PARKER@CROSBY>
Message-ID: <850508153942.8.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Mon, 6 May 85 22:46 EDT
    From: Randy Parker <PARKER@OZ>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.1,
    microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:
    Warm booted from: ZMACS-WINDOWS.

    Awhile back I edited my profile and typed "Randy Parker <parker@oz>" to the choose
    variables window in Edit profile for the value of *default-cc-list*.  ZMAIL inserted
    the following form in my zmail init file:

    (LOGIN-SETQ zwei:*DEFAULT-CC-LIST* '((:PERSONAL-NAME "Randy Parker"
						    :NAME
						    "PARKER"
						    :HOST
						    (:OBJECT "OZ"))))

    When I check *default-cc-list*, it reads as follows:
    ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>)))

    All this is fine (and has been since that time), but recently, after selecting other
    options in the profile variable windows, clicking on EDIT, and then evaling the profile
    buffer (this has been repeated several times), any attempt to Reply or Mail generates
    this error.  

    Of course, *default-cc-list* gives this:
    ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))

    It is clear which is right and how to get the host object, but both are being
    generated by the system. I haven't had a chance to look at ZWEI:STRING-FROM-HEADER.



    >>Error: The array, "OZ", is not a valid function except when
	     given a valid subscript as its argument.
    While in the function "OZ"  ZWEI:STRING-FROM-HEADER  ZWEI:PRINT-ADDRESS-HEADER

    "OZ":
       Arg 0: :DEFAULT-MAIL-NAMING-CONVENTION

    ZWEI:STRING-FROM-HEADER:  (P.C. =223)  (from 1AISITE: AISITE; NETWORK0)   What's this?!?
       Arg 0 (HEADER): (:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ"))
       Arg 1 (FORMAT): NIL
       Arg 2 (NAMING-CONVENTION): :DEFAULT

The bug is clearly in the hacked-up version of ZWEI:STRING-FROM-HEADER
that you are using.  I infer that it has been altered to attempt to deal
better with the new state of host namespaces.  It probably assumes that
the :HOST in the parsed header is a Host object; likely it needs to
allow for the string case, and parse it into a host object.

 8-May-85 17:37:10-EDT,8694;000000000000
Received: from MIT-BUDDY by MIT-OZ via Chaosnet; 8 May 85 17:36-EDT
Date: Wed, 8 May 85 17:35 EDT
From: Chris Lindblad <CJL@OZ>
Subject: Profile problems with hosts
To: DODDS%TENEX@SCRC-STONY-BROOK
cc: BUG-LISPM@OZ, BUG-ZMAIL@OZ, PARKER@OZ
In-Reply-To: <850508153942.8.DODDS@ANNISQUAM.SCRC.Symbolics.COM>
Message-ID: <850508173549.1.CJL@BUDDY>

    Date: Wed, 8 May 85 15:39 EDT
    From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
	Date: Mon, 6 May 85 22:46 EDT
	From: Randy Parker <PARKER@OZ>
	In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.1,
	microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:
	Warm booted from: ZMACS-WINDOWS.

	Awhile back I edited my profile and typed "Randy Parker <parker@oz>" to the choose
	variables window in Edit profile for the value of *default-cc-list*.  ZMAIL inserted
	the following form in my zmail init file:

	(LOGIN-SETQ zwei:*DEFAULT-CC-LIST* '((:PERSONAL-NAME "Randy Parker"
							:NAME
							"PARKER"
							:HOST
							(:OBJECT "OZ"))))

	When I check *default-cc-list*, it reads as follows:
	((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>)))

	All this is fine (and has been since that time), but recently, after selecting other
	options in the profile variable windows, clicking on EDIT, and then evaling the profile
	buffer (this has been repeated several times), any attempt to Reply or Mail generates
	this error.  

	Of course, *default-cc-list* gives this:
	((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))

	It is clear which is right and how to get the host object, but both are being
	generated by the system. I haven't had a chance to look at ZWEI:STRING-FROM-HEADER.



	>>Error: The array, "OZ", is not a valid function except when
		 given a valid subscript as its argument.
	While in the function "OZ"  ZWEI:STRING-FROM-HEADER  ZWEI:PRINT-ADDRESS-HEADER

	"OZ":
	   Arg 0: :DEFAULT-MAIL-NAMING-CONVENTION

	ZWEI:STRING-FROM-HEADER:  (P.C. =223)  (from 1AISITE: AISITE; NETWORK0)   What's this?!?
	   Arg 0 (HEADER): (:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ"))
	   Arg 1 (FORMAT): NIL
	   Arg 2 (NAMING-CONVENTION): :DEFAULT

    The bug is clearly in the hacked-up version of ZWEI:STRING-FROM-HEADER
    that you are using.  I infer that it has been altered to attempt to deal
    better with the new state of host namespaces.  It probably assumes that
    the :HOST in the parsed header is a Host object; likely it needs to
    allow for the string case, and parse it into a host object.

The version of ZWEI:STRING-FROM-HEADER was supplied to us from Hornig to
fix interaction problems with mailers here at MIT. It's too hairy for
me to figure out:

;;; -*- Mode: LISP; Syntax: Zetalisp; Package: ZWEI; Base: 10; Patch-file: T -*-
;;; Patch file for Zmail version 107.3
;;; Reason: Function (:METHOD NET:HOST :MAIL-NAME):  Don't use made-up domain name.
;;; Function MAILER:ARPANET-MAIL-GATEWAY-HOST:  Search correct sites for gateway.
;;; Function (:METHOD NET:HOST :DEFAULT-MAIL-NAMING-CONVENTION):  Always use Internet domain names in headers.
;;; Function ZWEI:PRINT-DATE-HEADER:  Always use RFC 822 format.
;;; Function ZWEI:STRING-FROM-HEADER:  Always use @'s.
;;; Allow ZMail user to try hosts believed to be unavailable.
;;; Function MAILER:SMTP-SERVER:  Better management of paths.
;;; Function (:METHOD MAILER:SMTP-USER :INIT):  Don't use :ARPANET kludges.
;;; Function (:METHOD MAILER:SMTP-USER :START-MESSAGE):  More path management.
;;; Function MAILER:ADD-HOST-TO-ROUTE:  COmmon routine.
;;; Written by File-Server, 4/23/85 10:44:02
;;; while running on Riverside from FEP0:>rel6-server-mmpt-ns-fixed.load.1
;;; with Release 6.0, System 271.33, Zmail 107.2, LMFS 57.2, Tape 41.1, Basic Sage 15.9, Documentation Database 3.2, Common Lisp 4.2, Experimental Writer Tools 12.23, SCRC 5.5, Print 38.0, Mailer 43.3, IP-TCP 29.3, File Server stuff 1.5, microcode TMC5-MIC 319, Automatic server bug reporter, Namespace Server, MMPT fix.

...

; From file headers.lisp >rel-6>sys>zmail Q: (90)
#8R ZWEI::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "ZWEI")))

;;; NAMING-CONVENTION is one of :INTERNET, :LOCALNET, or :ARPANET.
;;;  :INTERNET means the whole internet with hierarchical domains.
;;;  :LOCALNET means a local network which probably doesn't understand domains.
;;;  :ARPANET means the current turd that only understands the .ARPA domain, doesn't
;;;   allow path routing, etc.
;;; :DEFAULT means pick it so as to make it parsable.  Note that :LOCALNET is not always
;;; re-parsable.
(DEFUN STRING-FROM-HEADER (HEADER FORMAT &OPTIONAL (NAMING-CONVENTION ':DEFAULT)
					 &AUX (PLIST (LOCF HEADER)) TEM)
  (COND ((AND (EQ FORMAT ':USE-ORIGINAL)
	      (SETQ TEM (GET PLIST ':INTERVAL)))
	 (STRING-INTERVAL (FIRST TEM) (SECOND TEM) T))
	((SETQ TEM (GETL PLIST '(:INFERIORS)))
	 (LOOP WITH STR = (MAKE-EMPTY-STRING 20.)
	       WITH (SUP-START SUP-END) = (CADR (GETL PLIST '(:INTERVAL :ORIGINAL-INTERVAL)))
	       FOR START FIRST SUP-START THEN (SECOND INF-INT)
	       FOR INF IN (CADR TEM)
	       AS INF-INT = (CADR (GETL (LOCF INF) '(:INTERVAL :ORIGINAL-INTERVAL)))
	       DO (SETQ STR (STRING-NCONC STR (STRING-INTERVAL START (FIRST INF-INT))))
		  (LET ((SUBHEAD (STRING-FROM-HEADER INF FORMAT NAMING-CONVENTION)))
		    (WHEN SUBHEAD
		      (SETQ STR (STRING-NCONC STR SUBHEAD))))
	       FINALLY (RETURN (STRING-NCONC STR (STRING-INTERVAL START SUP-END)))))
	(T
	 (LET ((USER (GET PLIST ':USER))
	       (STRING (GET PLIST ':NAME)))
	   (UNLESS (AND (NULL USER) (NULL STRING))
	     (LET ((HOST (GET PLIST ':HOST)))
	       (WHEN (NOT (NULL USER))
		 (SETF `(,STRING ,HOST) (SEND USER ':MAIL-ADDRESS))
		 (SETQ HOST `(:OBJECT ,HOST)))
	       (SETQ STRING (RFC822-QUOTE-IF-NECESSARY STRING))
	       (WHEN (AND (EQ FORMAT ':LOCAL-DEFAULT-HOST)
			  (GET PLIST ':HOST-DEFAULTED))
		 (SETQ HOST NIL))
	       (SELECTQ (CAR HOST)
		 (:OBJECT
		  (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
		    (SETQ NAMING-CONVENTION (SEND (SECOND HOST)
						  ':DEFAULT-MAIL-NAMING-CONVENTION)))
		  (UNLESS (AND (EQ FORMAT ':ONLY-PERSONAL)
			       (SUMMARY-SUPPRESS-HOST-P (SECOND HOST)))
		    ;; Use the "standard" name for this host.
		    (MULTIPLE-VALUE-BIND (HOST-NAME %-KLUDGE)
			(SEND (SECOND HOST) :MAIL-NAME :NAMING-CONVENTION NAMING-CONVENTION
			      :%-ROUTING-KLUDGE T)
		      (SETQ STRING (STRING-APPEND STRING (IF %-KLUDGE #/% #/@) HOST-NAME)))))
		 (:DOMAIN
		  (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
		    (SETQ NAMING-CONVENTION ':INTERNET))
		  (SETQ STRING (STRING-APPEND STRING #/@))
		  (LOOP FOR FIRST-P FIRST T THEN NIL
			FOR STR IN (CDR HOST)
			UNLESS FIRST-P DO (SETQ STRING (STRING-APPEND STRING #/.))
			DO (SETQ STRING (STRING-APPEND STRING STR))))
		 (OTHERWISE
		  (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
		    (SETQ NAMING-CONVENTION ':LOCALNET))
		  (DOLIST (HOST (CDR HOST))
		    (SETQ STRING (STRING-APPEND STRING #/@ HOST))))))
	     (SELECTQ FORMAT
	       ((:USE-ORIGINAL :INCLUDE-PERSONAL :ONLY-PERSONAL)
		(LET ((PERSONAL-NAME (IF USER
					 (SEND USER ':PERSONAL-NAME-FIRST-NAME-FIRST)
					 (GET PLIST ':PERSONAL-NAME)))
		      (ROUTE-SPEC (GET PLIST ':ROUTE)))
		  (WHEN (OR PERSONAL-NAME ROUTE-SPEC)
		    (WHEN ROUTE-SPEC
		      (SETQ STRING (STRING-APPEND
				     (ROUTE-SPEC-STRING ROUTE-SPEC NAMING-CONVENTION)
				     STRING)))
		    (SETQ STRING (STRING-APPEND #/< STRING #/>))
		    (WHEN PERSONAL-NAME
		      (IF (EQ FORMAT ':ONLY-PERSONAL)
			  (SETQ STRING PERSONAL-NAME)
			  (SETQ PERSONAL-NAME (RFC822-QUOTE-IF-NECESSARY PERSONAL-NAME))
			  (SETQ STRING (STRING-APPEND PERSONAL-NAME #\SP STRING)))))))
	       ((:HOST :LOCAL-DEFAULT-HOST)
		;; For now, turn a route specification into multiple @'s when
		;; talking to the mail server.
		(LET ((ROUTE-SPEC (GET PLIST ':ROUTE)))
		  (WHEN ROUTE-SPEC
		    (IF (MEMQ NAMING-CONVENTION '(:INTERNET :ARPANET))
			(SETQ STRING (STRING-APPEND
				       (ROUTE-SPEC-STRING ROUTE-SPEC NAMING-CONVENTION)
				       STRING))
			(SETQ STRING (STRING-APPEND
				       STRING
				       (WITH-OUTPUT-TO-STRING (STREAM)
					 (LOOP FOR DOMAIN IN (REVERSE ROUTE-SPEC)
					       DO (SEND STREAM ':TYO #/@)
					       ;; Also only output the most specific
					       ;; part of the domain, since it tends
					       ;; to confuse existing mailers.
					       (SEND STREAM ':STRING-OUT
						     (STRING-FROM-HOST DOMAIN
								       NAMING-CONVENTION)))
					 ))))))))
	     STRING)))))

)
 8-May-85 19:48:30-EDT,9347;000000000000
Received: from MIT-SINATRA by MIT-OZ via Chaosnet; 8 May 85 19:48-EDT
Date: Wed, 8 May 85 19:48 EDT
From: Randy Parker <PARKER@OZ>
Subject: Profile problems with hosts
To: Chris Lindblad <CJL@OZ>
cc: DODDS%TENEX@SCRC-STONY-BROOK, BUG-LISPM@OZ, BUG-ZMAIL@OZ,
    Randy Parker <PARKER@OZ>
Message-ID: <850508194812.1.PARKER@SINATRA>

    Date: Wed, 8 May 85 17:35 EDT
    From: Chris Lindblad <CJL@OZ>

	Date: Wed, 8 May 85 15:39 EDT
	From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>

	    Date: Mon, 6 May 85 22:46 EDT
	    From: Randy Parker <PARKER@OZ>
	    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.1,
	    microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:
	    Warm booted from: ZMACS-WINDOWS.

	    Awhile back I edited my profile and typed "Randy Parker <parker@oz>" to the choose
	    variables window in Edit profile for the value of *default-cc-list*.  ZMAIL inserted
	    the following form in my zmail init file:

	    (LOGIN-SETQ zwei:*DEFAULT-CC-LIST* '((:PERSONAL-NAME "Randy Parker"
							    :NAME
							    "PARKER"
							    :HOST
							    (:OBJECT "OZ"))))

	    When I check *default-cc-list*, it reads as follows:
	    ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>)))

	    All this is fine (and has been since that time), but recently, after selecting other
	    options in the profile variable windows, clicking on EDIT, and then evaling the profile
	    buffer (this has been repeated several times), any attempt to Reply or Mail generates
	    this error.  

	    Of course, *default-cc-list* gives this:
	    ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))

	    It is clear which is right and how to get the host object, but both are being
	    generated by the system. I haven't had a chance to look at ZWEI:STRING-FROM-HEADER.



	    >>Error: The array, "OZ", is not a valid function except when
		     given a valid subscript as its argument.
	    While in the function "OZ"  ZWEI:STRING-FROM-HEADER  ZWEI:PRINT-ADDRESS-HEADER

	    "OZ":
	       Arg 0: :DEFAULT-MAIL-NAMING-CONVENTION

	    ZWEI:STRING-FROM-HEADER:  (P.C. =223)  (from 1AISITE: AISITE; NETWORK0)   What's this?!?
	       Arg 0 (HEADER): (:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ"))
	       Arg 1 (FORMAT): NIL
	       Arg 2 (NAMING-CONVENTION): :DEFAULT

	The bug is clearly in the hacked-up version of ZWEI:STRING-FROM-HEADER
	that you are using.  I infer that it has been altered to attempt to deal
	better with the new state of host namespaces.  It probably assumes that
	the :HOST in the parsed header is a Host object; likely it needs to
	allow for the string case, and parse it into a host object.

Right. See below.

    The version of ZWEI:STRING-FROM-HEADER was supplied to us from Hornig to
    fix interaction problems with mailers here at MIT. It's too hairy for
    me to figure out:

    ;;; -*- Mode: LISP; Syntax: Zetalisp; Package: ZWEI; Base: 10; Patch-file: T -*-
    ;;; Patch file for Zmail version 107.3
    ;;; Reason: Function (:METHOD NET:HOST :MAIL-NAME):  Don't use made-up domain name.
    ;;; Function MAILER:ARPANET-MAIL-GATEWAY-HOST:  Search correct sites for gateway.
    ;;; Function (:METHOD NET:HOST :DEFAULT-MAIL-NAMING-CONVENTION):  Always use Internet domain names in headers.
    ;;; Function ZWEI:PRINT-DATE-HEADER:  Always use RFC 822 format.
    ;;; Function ZWEI:STRING-FROM-HEADER:  Always use @'s.
    ;;; Allow ZMail user to try hosts believed to be unavailable.
    ;;; Function MAILER:SMTP-SERVER:  Better management of paths.
    ;;; Function (:METHOD MAILER:SMTP-USER :INIT):  Don't use :ARPANET kludges.
    ;;; Function (:METHOD MAILER:SMTP-USER :START-MESSAGE):  More path management.
    ;;; Function MAILER:ADD-HOST-TO-ROUTE:  COmmon routine.
    ;;; Written by File-Server, 4/23/85 10:44:02
    ;;; while running on Riverside from FEP0:>rel6-server-mmpt-ns-fixed.load.1
    ;;; with Release 6.0, System 271.33, Zmail 107.2, LMFS 57.2, Tape 41.1, Basic Sage 15.9, Documentation Database 3.2, Common Lisp 4.2, Experimental Writer Tools 12.23, SCRC 5.5, Print 38.0, Mailer 43.3, IP-TCP 29.3, File Server stuff 1.5, microcode TMC5-MIC 319, Automatic server bug reporter, Namespace Server, MMPT fix.

    ...

    ; From file headers.lisp >rel-6>sys>zmail Q: (90)
    #8R ZWEI::(GLOBAL:COMPILER-LET ((GLOBAL:PACKAGE (GLOBAL:PKG-FIND-PACKAGE "ZWEI")))

    ;;; NAMING-CONVENTION is one of :INTERNET, :LOCALNET, or :ARPANET.
    ;;;  :INTERNET means the whole internet with hierarchical domains.
    ;;;  :LOCALNET means a local network which probably doesn't understand domains.
    ;;;  :ARPANET means the current turd that only understands the .ARPA domain, doesn't
    ;;;   allow path routing, etc.
    ;;; :DEFAULT means pick it so as to make it parsable.  Note that :LOCALNET is not always
    ;;; re-parsable.
    (DEFUN STRING-FROM-HEADER (HEADER FORMAT &OPTIONAL (NAMING-CONVENTION ':DEFAULT)
					     &AUX (PLIST (LOCF HEADER)) TEM)
      (COND ((AND (EQ FORMAT ':USE-ORIGINAL)
		  (SETQ TEM (GET PLIST ':INTERVAL)))
	     (STRING-INTERVAL (FIRST TEM) (SECOND TEM) T))
	    ((SETQ TEM (GETL PLIST '(:INFERIORS)))
	     (LOOP WITH STR = (MAKE-EMPTY-STRING 20.)
		   WITH (SUP-START SUP-END) = (CADR (GETL PLIST '(:INTERVAL :ORIGINAL-INTERVAL)))
		   FOR START FIRST SUP-START THEN (SECOND INF-INT)
		   FOR INF IN (CADR TEM)
		   AS INF-INT = (CADR (GETL (LOCF INF) '(:INTERVAL :ORIGINAL-INTERVAL)))
		   DO (SETQ STR (STRING-NCONC STR (STRING-INTERVAL START (FIRST INF-INT))))
		      (LET ((SUBHEAD (STRING-FROM-HEADER INF FORMAT NAMING-CONVENTION)))
			(WHEN SUBHEAD
			  (SETQ STR (STRING-NCONC STR SUBHEAD))))
		   FINALLY (RETURN (STRING-NCONC STR (STRING-INTERVAL START SUP-END)))))
	    (T
	     (LET ((USER (GET PLIST ':USER))
		   (STRING (GET PLIST ':NAME)))
	       (UNLESS (AND (NULL USER) (NULL STRING))
		 (LET ((HOST (GET PLIST ':HOST)))
		   (WHEN (NOT (NULL USER))
		     (SETF `(,STRING ,HOST) (SEND USER ':MAIL-ADDRESS))
		     (SETQ HOST `(:OBJECT ,HOST)))
		   (SETQ STRING (RFC822-QUOTE-IF-NECESSARY STRING))
		   (WHEN (AND (EQ FORMAT ':LOCAL-DEFAULT-HOST)
			      (GET PLIST ':HOST-DEFAULTED))
		     (SETQ HOST NIL))
;;;************************************************
;;; This seems to fix the error reported above.
    ;;; 
    ;;; Replaced (SECOND HOST) with host-object
    ;;;
		   (SELECTQ (CAR HOST)
		     (:OBJECT
		      (let ((host-object (neti:parse-host (second host))))  ; guarantees you have a parsed host
			(WHEN (EQ NAMING-CONVENTION ':DEFAULT)
			  (SETQ NAMING-CONVENTION (SEND host-object
							':DEFAULT-MAIL-NAMING-CONVENTION)))
			(UNLESS (AND (EQ FORMAT ':ONLY-PERSONAL)
				     (SUMMARY-SUPPRESS-HOST-P host-object))
			  ;; Use the "standard" name for this host.
			  (MULTIPLE-VALUE-BIND (HOST-NAME %-KLUDGE)
			      (SEND host-object :MAIL-NAME :NAMING-CONVENTION NAMING-CONVENTION
				    :%-ROUTING-KLUDGE T)
			    (SETQ STRING (STRING-APPEND STRING (IF %-KLUDGE #/% #/@) HOST-NAME))))))
;;;************************************************
		     (:DOMAIN
		      (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
			(SETQ NAMING-CONVENTION ':INTERNET))
		      (SETQ STRING (STRING-APPEND STRING #/@))
		      (LOOP FOR FIRST-P FIRST T THEN NIL
			    FOR STR IN (CDR HOST)
			    UNLESS FIRST-P DO (SETQ STRING (STRING-APPEND STRING #/.))
			    DO (SETQ STRING (STRING-APPEND STRING STR))))
		     (OTHERWISE
		      (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
			(SETQ NAMING-CONVENTION ':LOCALNET))
		      (DOLIST (HOST (CDR HOST))
			(SETQ STRING (STRING-APPEND STRING #/@ HOST))))))
		 (SELECTQ FORMAT
		   ((:USE-ORIGINAL :INCLUDE-PERSONAL :ONLY-PERSONAL)
		    (LET ((PERSONAL-NAME (IF USER
					     (SEND USER ':PERSONAL-NAME-FIRST-NAME-FIRST)
					     (GET PLIST ':PERSONAL-NAME)))
			  (ROUTE-SPEC (GET PLIST ':ROUTE)))
		      (WHEN (OR PERSONAL-NAME ROUTE-SPEC)
			(WHEN ROUTE-SPEC
			  (SETQ STRING (STRING-APPEND
					 (ROUTE-SPEC-STRING ROUTE-SPEC NAMING-CONVENTION)
					 STRING)))
			(SETQ STRING (STRING-APPEND #/< STRING #/>))
			(WHEN PERSONAL-NAME
			  (IF (EQ FORMAT ':ONLY-PERSONAL)
			      (SETQ STRING PERSONAL-NAME)
			      (SETQ PERSONAL-NAME (RFC822-QUOTE-IF-NECESSARY PERSONAL-NAME))
			      (SETQ STRING (STRING-APPEND PERSONAL-NAME #\SP STRING)))))))
		   ((:HOST :LOCAL-DEFAULT-HOST)
		    ;; For now, turn a route specification into multiple @'s when
		    ;; talking to the mail server.
		    (LET ((ROUTE-SPEC (GET PLIST ':ROUTE)))
		      (WHEN ROUTE-SPEC
			(IF (MEMQ NAMING-CONVENTION '(:INTERNET :ARPANET))
			    (SETQ STRING (STRING-APPEND
					   (ROUTE-SPEC-STRING ROUTE-SPEC NAMING-CONVENTION)
					   STRING))
			    (SETQ STRING (STRING-APPEND
					   STRING
					   (WITH-OUTPUT-TO-STRING (STREAM)
					     (LOOP FOR DOMAIN IN (REVERSE ROUTE-SPEC)
						   DO (SEND STREAM ':TYO #/@)
						   ;; Also only output the most specific
						   ;; part of the domain, since it tends
						   ;; to confuse existing mailers.
						   (SEND STREAM ':STRING-OUT
							 (STRING-FROM-HOST DOMAIN
									   NAMING-CONVENTION)))
					     ))))))))
		 STRING)))))

    )
 9-May-85 00:08:43-EDT,922;000000000000
Received: from MIT-SINATRA by MIT-OZ via Chaosnet; 8 May 85 23:56-EDT
Date: Wed, 8 May 85 23:56 EDT
From: Randy Parker <PARKER@OZ>
Subject: profile to month window switch
To: BUG-ZMAIL@OZ
cc: PARKER@OZ
Message-ID: <850508235617.7.PARKER@SINATRA>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.1,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Frank Sinatra:

When in month mode of the calendar, I click on "Profile" to
go to the profile editor.  Upon looking at stuff there, I
click on "Exit" to return to the month mode (current months
calendar at top, selected reminder in window at bottom).
It switches the screen back to the proper window configuration,
but the runline message still says "(no window)" and I have no
control over anything.  If I happen to click on the mini-buffer
typein window at the bottom, everything comes alive.  This has happened
on several occasions.

RP
 9-May-85 10:41:11-EDT,3575;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 9 May 85 10:41-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA;  9 MAY 85 10:40:26 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 233424; Thu 9-May-85 10:30:37-EDT
Date: Thu, 9 May 85 10:35 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Profile problems with hosts
To: PARKER%MIT-OZ@MIT-MC.ARPA
cc: CJL%MIT-OZ@MIT-MC.ARPA, DODDS@TENEX, BUG-LISPM%MIT-OZ@MIT-MC.ARPA,
    BUG-ZMAIL%MIT-OZ@MIT-MC.ARPA
In-Reply-To: <850508194812.1.PARKER@SINATRA>
Message-ID: <850509103521.8.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Wed, 8 May 85 19:48 EDT
    From: Randy Parker <PARKER@OZ>
	From: Chris Lindblad <CJL@OZ>
	    From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
		From: Randy Parker <PARKER@OZ>
		In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.1,
		microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:
		Warm booted from: ZMACS-WINDOWS.

		Awhile back I edited my profile and typed "Randy Parker <parker@oz>" to the choose
		variables window in Edit profile for the value of *default-cc-list*.  ZMAIL inserted
		the following form in my zmail init file:

		(LOGIN-SETQ zwei:*DEFAULT-CC-LIST* '((:PERSONAL-NAME "Randy Parker"
								:NAME
								"PARKER"
								:HOST
								(:OBJECT "OZ"))))

		When I check *default-cc-list*, it reads as follows:
		((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>)))

		All this is fine (and has been since that time), but recently, after selecting other
		options in the profile variable windows, clicking on EDIT, and then evaling the profile
		buffer (this has been repeated several times), any attempt to Reply or Mail generates
		this error.  

		>>Error: The array, "OZ", is not a valid function except when
			 given a valid subscript as its argument.
		While in the function "OZ"  ZWEI:STRING-FROM-HEADER  ZWEI:PRINT-ADDRESS-HEADER

	    The bug is clearly in the hacked-up version of ZWEI:STRING-FROM-HEADER
	    that you are using.  I infer that it has been altered to attempt to deal
	    better with the new state of host namespaces.  It probably assumes that
	    the :HOST in the parsed header is a Host object; likely it needs to
	    allow for the string case, and parse it into a host object.

    Right. See below.

	The version of ZWEI:STRING-FROM-HEADER was supplied to us from Hornig to
	fix interaction problems with mailers here at MIT. It's too hairy for
	me to figure out:

      ...

    ;;;************************************************
    ;;; This seems to fix the error reported above.
	;;; 
	;;; Replaced (SECOND HOST) with host-object
	;;;
		       (SELECTQ (CAR HOST)
			 (:OBJECT
			  (let ((host-object (neti:parse-host (second host))))  ; guarantees you have a parsed host
			    (WHEN (EQ NAMING-CONVENTION ':DEFAULT)
			      (SETQ NAMING-CONVENTION (SEND host-object
							    ':DEFAULT-MAIL-NAMING-CONVENTION)))
			    (UNLESS (AND (EQ FORMAT ':ONLY-PERSONAL)
					 (SUMMARY-SUPPRESS-HOST-P host-object))
			      ;; Use the "standard" name for this host.
			      (MULTIPLE-VALUE-BIND (HOST-NAME %-KLUDGE)
				  (SEND host-object :MAIL-NAME :NAMING-CONVENTION NAMING-CONVENTION
					:%-ROUTING-KLUDGE T)
				(SETQ STRING (STRING-APPEND STRING (IF %-KLUDGE #/% #/@) HOST-NAME))))))
    ;;;************************************************

    ...

Thanks.  It hasn't been reported here, but it looks like we need this
fix also.

 9-May-85 11:15:13-EDT,1780;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 9 May 85 11:14-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA;  9 MAY 85 11:14:34 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 233479; Thu 9-May-85 11:08:11-EDT
Date: Thu, 9 May 85 11:12 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: profile to month window switch
To: PARKER%MIT-OZ@MIT-MC.ARPA
cc: BUG-ZMAIL%MIT-OZ@MIT-MC.ARPA
In-Reply-To: <850508235617.7.PARKER@SINATRA>
Message-ID: <850509111259.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Wed, 8 May 85 23:56 EDT
    From: Randy Parker <PARKER%MIT-OZ@MC>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.1,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Frank Sinatra:

    When in month mode of the calendar, I click on "Profile" to
    go to the profile editor.  Upon looking at stuff there, I
    click on "Exit" to return to the month mode (current months
    calendar at top, selected reminder in window at bottom).
    It switches the screen back to the proper window configuration,
    but the runline message still says "(no window)" and I have no
    control over anything.  If I happen to click on the mini-buffer
    typein window at the bottom, everything comes alive.  This has happened
    on several occasions.

Good grief.  There are a number of such transitions in various calendar
configurations that exhibit this behavior.  There is some misalignment
in the window configurations that has to be fixed.  Meanwhile, I
discovered that the clicking-on-the-mode-line-window trick doesn't fix
the configuration permanently.  To do that, you need to configure to
Both, then configure back to Month or whatever was desired.

 9-May-85 12:22:51-EDT,3333;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 9 May 85 12:22-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA;  9 MAY 85 12:22:16 EDT
Received: from PEACE.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 233543; Thu 9-May-85 12:17:10-EDT
Date: Thu, 9 May 85 12:20 EDT
From: Charles Hornig <Hornig@SCRC-STONY-BROOK.ARPA>
Subject: Profile problems with hosts
To: Chris Lindblad <CJL%OZ@MIT-MC.ARPA>, DODDS@SCRC-STONY-BROOK.ARPA
cc: BUG-LISPM%OZ@MIT-MC.ARPA, BUG-ZMAIL%OZ@MIT-MC.ARPA,
    PARKER%oz@MIT-MC.ARPA
In-Reply-To: <850508173549.1.CJL@BUDDY>
Message-ID: <850509122056.4.HORNIG@PEACE.SCRC.Symbolics.COM>

    Date: Wed, 8 May 85 17:35 EDT
    From: Chris Lindblad <CJL@OZ>
	Date: Wed, 8 May 85 15:39 EDT
	From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
	    Date: Mon, 6 May 85 22:46 EDT
	    From: Randy Parker <PARKER@OZ>
	    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.1,
	    microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:
	    Warm booted from: ZMACS-WINDOWS.

	    Awhile back I edited my profile and typed "Randy Parker <parker@oz>" to the choose
	    variables window in Edit profile for the value of *default-cc-list*.  ZMAIL inserted
	    the following form in my zmail init file:

	    (LOGIN-SETQ zwei:*DEFAULT-CC-LIST* '((:PERSONAL-NAME "Randy Parker"
							    :NAME
							    "PARKER"
							    :HOST
							    (:OBJECT "OZ"))))

The problem is here!  "OZ" isn't a host object, it's a string.  ZMail
shouldn't be putting it there.

	    When I check *default-cc-list*, it reads as follows:
	    ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>)))

	    All this is fine (and has been since that time), but recently, after selecting other
	    options in the profile variable windows, clicking on EDIT, and then evaling the profile
	    buffer (this has been repeated several times), any attempt to Reply or Mail generates
	    this error.  

	    Of course, *default-cc-list* gives this:
	    ((:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ")))

	    It is clear which is right and how to get the host object, but both are being
	    generated by the system. I haven't had a chance to look at ZWEI:STRING-FROM-HEADER.



	    >>Error: The array, "OZ", is not a valid function except when
		     given a valid subscript as its argument.
	    While in the function "OZ"  ZWEI:STRING-FROM-HEADER  ZWEI:PRINT-ADDRESS-HEADER

	    "OZ":
	       Arg 0: :DEFAULT-MAIL-NAMING-CONVENTION

	    ZWEI:STRING-FROM-HEADER:  (P.C. =223)  (from 1AISITE: AISITE; NETWORK0)   What's this?!?
	       Arg 0 (HEADER): (:PERSONAL-NAME "Randy Parker" :NAME "PARKER" :HOST (:OBJECT "OZ"))
	       Arg 1 (FORMAT): NIL
	       Arg 2 (NAMING-CONVENTION): :DEFAULT

	The bug is clearly in the hacked-up version of ZWEI:STRING-FROM-HEADER
	that you are using.  I infer that it has been altered to attempt to deal
	better with the new state of host namespaces.  It probably assumes that
	the :HOST in the parsed header is a Host object; likely it needs to
	allow for the string case, and parse it into a host object.

There is no "string case".  If you say :OBJECT, there should be an
object.  If you want an arbitrary string, use :SINGLE.

15-May-85 09:08:25-EDT,1687;000000000000
Received: from MIT-ZERMATT by MIT-OZ via Chaosnet; 15 May 85 09:08-EDT
Received: from SANCHO-PANZA by ZERMATT via CHAOS with CHAOS-MAIL id 4945; Wed 15-May-85 09:06:53-EDT
Date: Wednesday, 15 May 1985, 09:08-EDT
From: Benjamin Kuipers <BEN at SANCHO-PANZA>
Subject: Why is ZMAIL so slow?
To: BUG-ZMAIL at OZ
Message-ID: <850515090809.1.BEN@SANCHO-PANZA.MIT>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, MLSite 4.7,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Sancho Panza:

Why must ZMAIL be so slow with 30-60 messages, when BABYL on MC is
fast with 100-150 messages, and acceptable with over 200?  Even with
very few messages in the babyl file, ZMAIL is so slow that I routinely
read my mail with Show File mail.text, and send mail by connecting
to MC and using babyl.  This is not good service by, or advertising for,
Symbolics.

Certainly the manual informs me that ZMAIL provides me with a wide range
of sophisticated services (which I generally don't use).  Why do I have
to pay for them, and pay heavily, judging from the time it takes?
Elementary software engineering involves designing the architecture of
the system so that simple, often-done actions, like reading one's babyl
and mail files, or sending a message, can be done quickly, while less
frequent things may take longer.

There may appear to be higher priority jobs than rewriting ZMAIL, but
mail handling is an important and frequent part of many people's lives,
and an important source of their comfort or discomfort with a computer
system.  It's worth fixing!!  It IS broke!!

With fond regard for most of the rest of the system, I remain,

			Yours,
				Ben Kuipers
16-May-85 09:36:15-EDT,2655;000000000000
Received: from MIT-HTVAX by MIT-OZ via Chaosnet; 16 May 85 09:36-EDT
Received: from SCRC-STONY-BROOK.ARPA (scrc-stony-brook.arpa.ARPA) by MIT-HTVAX.ARPA (4.12/4.7) 
	id AA29803; Thu, 16 May 85 09:33:33 edt
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 237732; Thu 16-May-85 09:28:07-EDT
Date: Thu, 16 May 85 09:33 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Why is ZMAIL so slow?
To: BEN%SANCHO-PANZA@MIT-HTVAX.ARPA
Cc: BUG-ZMAIL%OZ@MIT-HTVAX.ARPA
In-Reply-To: <850515090809.1.BEN@SANCHO-PANZA.MIT>
Message-Id: <850516093314.3.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Wednesday, 15 May 1985, 09:08-EDT
    From: Benjamin Kuipers <BEN%SANCHO-PANZA@MIT-HTVAX.ARPA>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, MLSite 4.7,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Sancho Panza:

    Why must ZMAIL be so slow with 30-60 messages, when BABYL on MC is
    fast with 100-150 messages, and acceptable with over 200?  Even with
    very few messages in the babyl file, ZMAIL is so slow that I routinely
    read my mail with Show File mail.text, and send mail by connecting
    to MC and using babyl.  This is not good service by, or advertising for,
    Symbolics.

    Certainly the manual informs me that ZMAIL provides me with a wide range
    of sophisticated services (which I generally don't use).  Why do I have
    to pay for them, and pay heavily, judging from the time it takes?
    Elementary software engineering involves designing the architecture of
    the system so that simple, often-done actions, like reading one's babyl
    and mail files, or sending a message, can be done quickly, while less
    frequent things may take longer.

    There may appear to be higher priority jobs than rewriting ZMAIL, but
    mail handling is an important and frequent part of many people's lives,
    and an important source of their comfort or discomfort with a computer
    system.  It's worth fixing!!  It IS broke!!

It's pretty hard to answer this kind of blanket indictment, containing
general assertions about poor performance with no specifics, numbers, or
points of comparison.  So I'll make an equally broad statement: rest
assured that we are quite conscious of the performance deficiencies of
Zmail, as we are its most intensive users.  Considerable effort is going
into improvements in performance and interface.  But there are dozens of
other projects claiming attention, as well, so there are limits.  You
can expect improvements in future major and minor releases.  Thanks for
your concern.

17-May-85 22:22:43-EDT,6151;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 17 May 85 22:22-EDT
Date: Fri, 17 May 85 22:10:06 EST
From: Jonathan A Rees <JAR@MIT-MC>
Subject:  Wide messages
To: BUG-ZMAIL@MIT-MC
Message-ID: <[MIT-MC].509009.850517.JAR>

Presumably In ZMAIL in Symbolics release something, and everywhere else too:

Message sent from Lisp Machines often have very wide lines and are hard
to read.  I know that reasonable mail readers, like BABYL, have commands
which will refill mail messages to make them narrower than 80 columns,
but couldn't the problem be fixed at the source, e.g. by setting the
fill column in send buffers small, or by displaying a warning message,
or by making the window in which the message is composed narrow, or even
by having the editore display a dotted vertical line at the 80th column?
I suspect that many, many users of standard-width displays are annoyed
by wide messages, but consider them to result from the inconsiderateness
of the human sender, instead of a deficiency of the sender's electronic
accomplice, and therefore they don't complain to BUG-ZMAIL.

Sample message follows.

			- Jonathan

--------------------

Date: Fri, 17 May 85 21:30 EDT
From: David A. Moon <Moon at STONY-BROOK.SCRC.Symbolics.COM>
To:   common-lisp at SU-AI.ARPA
Re:   Macros -> declarations
In-Reply-To: <850510015144.5.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>,
             <FAHLMAN.12109898307.BABYL@CMU-CS-C.ARPA>,
             The message of 16 May 85 17:53-EDT from Masinter.pa@Xerox.ARPA,
             <FAHLMAN.12111607133.BABYL@CMU-CS-C.ARPA>,
             The message of 17 May 85 10:42-EDT from Masinter.pa@Xerox.ARPA,
             The message of 17 May 85 14:55-EDT from Charles Hedrick <HEDRICK@RUTGERS.ARPA>
Message-ID: <850517213026.9.MOON@EUPHRATES.SCRC.Symbolics.COM>

    Date: Fri, 10 May 85 01:51 EDT
    From: Kent M Pitman <KMP@SCRC-STONY-BROOK.ARPA>

    (DEFMACRO DEF-MY-MACRO (NAME BVL &BODY (BODY '(...default body...))
					   (DECLS '((DECLARE (SPECIAL *FOO*))))
					   (DOC "a macro"))
      ...)

    I believe that attacking the problem of DECLARE at the level people have been
    attacking it gives up programmer flexibility to no good end (not to mention
    introducing an incompatible change to the language semantics). A change
    like these syntax extensions to DEFMACRO that I've been speaking about would
    make life easy for the macro writer without giving up the macro-writing 
    freedoms I was originally supporting.

I think this is a good suggestion.  Of course we ought to think about it a bit before
adopting it, but I haven't seen any problems of Common Lisp changing too fast lately!

    Date: 16 May 85 14:53 PDT
    From: Masinter.pa@Xerox.ARPA

    The only reason for this issue is because the interpreter has to look
    ahead for SPECIAL declarations. SPECIAL declarations are the only ones
    that have any semantic import. Furthermore, SPECIAL declarations are the
    only ones that are textually retroactive, in that they apply to things
    that appeared BEFORE the declaration rather than after.

This last sentence is not true.  Actually, there are almost no declarations
in Common Lisp that are -not- textually retroactive, because declarations
are placed in the -middle- of the form to which they apply.

    Rather than hacking around the deficiencies of DECLARE, why not change
    it? Put SPECIAL declarations where they belong, next to the variable.
    Leave all the other declarations where they are. Most of these issues
    then become moot, and we can even consider freeing up some of the
    restrictions on declarations; it would seem reasonable to allow
    declarations anywhere in an implicit PROGN to refer to the stuff that
    follows.

I don't think it is only SPECIAL declarations that need to be attached to
variable bindings.  Consider the data-type declarations.

One point I'd like to make in this connection is that making SPECIAL
declarations locally, rather than globally with DEFVAR, is generally not
something we should be encouraging.  It's worth noting that the main use
of local SPECIAL declarations in Maclisp-like languages in the past has
been to simulate what FLET does better.  Now that we have full lexical scoping,
we can probably dispense with local SPECIAL declarations.

Perhaps the SPECIAL declaration should be phased out, so we can say that
DECLARE never has "semantic import", but is only a hint to the compiler
or otherwise an "annotation."  The SPECIAL proclamation would remain, of
course.  If people feel it is necessary, some way to change the SPECIAL
status of a name locally could be retained, but it need not be DECLARE.
It could be a special [multiple puns intentional] version of LET.

This wouldn't change the fact that macro writers need a PARSE-BODY,
since losing an annotation that makes the code run efficiently is almost
as unacceptable as losing an annotation that makes the code run
correctly or one that documents the code.

    Date: Thu, 16 May 1985  22:45 EDT
    From: "Scott E. Fahlman" <Fahlman@CMU-CS-C.ARPA>

    Personally, I like the idea.  I've felt for some time that we ought to
    separate SPECIAL declarations from all the others, even if that means
    that Common Lisp ends up looking a little different from Maclisp.  But
    we should only make this move so late in the game if just about everyone
    else feels likewise.

Agreed.

    Date: 17 May 85 14:55:49 EDT
    From: Charles Hedrick <HEDRICK@RUTGERS.ARPA>

    As an implementor, I would be only too happy to flush the current
    (incomplete) tests for SPECIAL declarations in favor of something
    that is in the lambda list.  The idea of using the pname is
    obviously a bad one, but I don't see any problem with things
    such as
	(foo &special bar)

We haven't bothered to remove support for &SPECIAL from our system yet,
so we could hardly complain if it became a standard instead of an obsolete
holdover from the past!  Again, though, I think there is little real need
for local SPECIAL declarations.
20-May-85 23:27:17-EDT,3960;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 20 May 85 23:27-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA; 20 May 85 23:27:38 EST
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 240298; Mon 20-May-85 23:22:35-EDT
Date: Mon, 20 May 85 23:23 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Wide messages
To: JAR@MIT-MC.ARPA, KMP@SCRC-STONY-BROOK.ARPA
cc: BUG-ZMAIL@MIT-MC.ARPA, User-Interface@SCRC-STONY-BROOK.ARPA
In-Reply-To: <[MIT-MC].509009.850517.JAR>,
             <850520154233.9.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>
Message-ID: <850520232310.9.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Fri, 17 May 85 22:10:06 EST
    From: Jonathan A Rees <JAR@MIT-MC>

    Presumably In ZMAIL in Symbolics release something, and everywhere else too:

    Message sent from Lisp Machines often have very wide lines and are hard
    to read.  I know that reasonable mail readers, like BABYL, have commands
    which will refill mail messages to make them narrower than 80 columns,
    but couldn't the problem be fixed at the source, e.g. by setting the
    fill column in send buffers small, or by displaying a warning message,
    or by making the window in which the message is composed narrow, or even
    by having the editore display a dotted vertical line at the 80th column?
    I suspect that many, many users of standard-width displays are annoyed
    by wide messages, but consider them to result from the inconsiderateness
    of the human sender, instead of a deficiency of the sender's electronic
    accomplice, and therefore they don't complain to BUG-ZMAIL.


    Date: Mon, 20 May 85 15:42 EDT
    From: Kent M Pitman <KMP@SCRC-STONY-BROOK.ARPA>

    My theory on this is that it's the reader's, not the writer's, responsibility
    to do this formatting. There is only one sending environment and many reading
    environments. It is not reasonable to suppose that a sender will be able to
    adequately anticipate all possible reading environments, so he's bound to 
    offend someone. It is, on the other hand, reasonable to ask mail readers (and
    editors in general) to have reformatting commands available to help with their
    presentation.

    Consider yourself fortunate, though. I still wish Zmail had the "\" command.
    I tire of manually reformatting skinny 80-column messages that just barely 
    extend past the bottom of my view area so that they are slightly wider and 
    therefore fully visible.

This strikes me as a problem that is basically irresolvable by technical
means.  In other words, I disagree with both of you about how to deal
with this conflict.  I personally favor creating  80-column messages,
by voluntary action, as a community protocol.

The trouble with bashing the user in an attempt to force the sending of
not-too-wide messages is that it won't work, and will just cause
resentment.  There are legitimate reasons to create wide messages on
some occasions.  In any case, it has been shown that attempts to enforce
this kind of protocol by wiring it into the software will fail.

The trouble with expecting the multitude of mail readers to be able to
reformat wide messages as needed is that the approach only works if
every single reader program can do it.  But many can't.  Some operate on
very unpowerful hosts, and some are old and not maintained.  And just
the ones with the least powerful output media (glass teletypes) are the
most likely to be unable to reformat.

True, Zmail exists on a powerful Lisp machine, and should have a \
command.  And some day it might.  But I think the only network-wide
solution to this problem is to persuade the community to format for the
least capable (within reason), that is, limit width to 80 columns.  It's
more readable that way anyway.  And let those who can display a width of
120 reformat for it.

21-May-85 14:26:07-EDT,2559;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 21 May 85 14:26-EDT
Received: from SCRC-RIVERSIDE.ARPA by MIT-MC.ARPA; 21 May 85 14:29:03 EST
Received: from CHARLES.SCRC.Symbolics.COM by SCRC-RIVERSIDE.ARPA via CHAOS with CHAOS-MAIL id 38618; Tue 21-May-85 14:26:19-EDT
Date: Tue, 21 May 85 14:26 EDT
From: Charles Hornig <Hornig@SCRC-STONY-BROOK.ARPA>
Subject: [COMSAT: forwarded]
To: Jonathan A Rees <JAR@MIT-MC.ARPA>, BUG-ZMAIL@MIT-MC.ARPA
In-Reply-To: <[MIT-MC].512719.850521.JAR>
Message-ID: <850521142623.7.HORNIG@CHARLES.SCRC.Symbolics.COM>

    Date: Tue, 21 May 85 12:49:39 EST
    From: Jonathan A Rees <JAR@MIT-MC>

    Date: Tue, 21 May 85 12:25:04 EST
    From: Communications Satellite <COMSAT>
    To:   JAR
    cc:   MAIL-MAINTAINERS
    Message-ID: <[MIT-MC].512689.850521>

    Error in input request file.
    Parsing error: Bad SITE spec - "@TENEX.SCRC.SYMBOLICS.COM"
    Line stopped at is:
    RCPT:(DODDS @TENEX.SCRC.SYMBOLICS.COM)
    Message not sent and not queued;text of bad file follows:
- - - - -

What can I say?  COMSAT needs to be upgraded.  It's after 15 May 1985,
when domains go into effect.

    --------
    FROM-PROGRAM:BABYL
    FROM-XUNAME:JAR
    FROM-UNAME:JAR
    HEADER-FORCE:RFC733
    AUTHOR:JAR
    RCPT:(DODDS @TENEX.SCRC.SYMBOLICS.COM)
    RCPT:(BUG-ZMAIL @MIT-MC.ARPA (R-OPTION CC))
    RCPT:(KMP @SCRC-STONY-BROOK.ARPA (R-OPTION CC))
    RCPT:(User-Interface @SCRC-STONY-BROOK.ARPA (R-OPTION CC))
    SUBJECT: Wide messages
    USER-HEADER:In-reply-to: Msg of Mon 20 May 85 23:23 EDT from Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>
    TEXT;-1
	Date: Mon, 20 May 85 23:23 EDT
	From: Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>

	This strikes me as a problem that is basically irresolvable by technical
	means.  In other words, I disagree with both of you about how to deal
	with this conflict.  I personally favor creating  80-column messages,
	by voluntary action, as a community protocol.

    Unlike you, I take a nonconfrontational tack: I agree with BOTH you and
    KMP - as a careful reading of my original message would indicate.  (I
    guess I'm going against the tide, since most people like to use
    electronic mail to argue.)

    I think what I meant to suggest was some human engineering which would
    make such voluntary action easy to take.  That's what the dotted line
    was for.  I definitely didn't want to suggest any restriction, since as
    you say, people would complain, and rightfully so.

    Jonathan


21-May-85 16:14:56-EDT,1925;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 21 May 85 16:14-EDT
Date: Tue, 21 May 85 12:49:39 EST
From: Jonathan A Rees <JAR@MIT-MC>
Subject:  [COMSAT: forwarded]
To: BUG-ZMAIL@MIT-MC
Message-ID: <[MIT-MC].512719.850521.JAR>

Date: Tue, 21 May 85 12:25:04 EST
From: Communications Satellite <COMSAT>
To:   JAR
cc:   MAIL-MAINTAINERS
Message-ID: <[MIT-MC].512689.850521>

Error in input request file.
Parsing error: Bad SITE spec - "@TENEX.SCRC.SYMBOLICS.COM"
Line stopped at is:
RCPT:(DODDS @TENEX.SCRC.SYMBOLICS.COM)
Message not sent and not queued;text of bad file follows:
--------
FROM-PROGRAM:BABYL
FROM-XUNAME:JAR
FROM-UNAME:JAR
HEADER-FORCE:RFC733
AUTHOR:JAR
RCPT:(DODDS @TENEX.SCRC.SYMBOLICS.COM)
RCPT:(BUG-ZMAIL @MIT-MC.ARPA (R-OPTION CC))
RCPT:(KMP @SCRC-STONY-BROOK.ARPA (R-OPTION CC))
RCPT:(User-Interface @SCRC-STONY-BROOK.ARPA (R-OPTION CC))
SUBJECT: Wide messages
USER-HEADER:In-reply-to: Msg of Mon 20 May 85 23:23 EDT from Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>
TEXT;-1
    Date: Mon, 20 May 85 23:23 EDT
    From: Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>

    This strikes me as a problem that is basically irresolvable by technical
    means.  In other words, I disagree with both of you about how to deal
    with this conflict.  I personally favor creating  80-column messages,
    by voluntary action, as a community protocol.

Unlike you, I take a nonconfrontational tack: I agree with BOTH you and
KMP - as a careful reading of my original message would indicate.  (I
guess I'm going against the tide, since most people like to use
electronic mail to argue.)

I think what I meant to suggest was some human engineering which would
make such voluntary action easy to take.  That's what the dotted line
was for.  I definitely didn't want to suggest any restriction, since as
you say, people would complain, and rightfully so.

Jonathan
21-May-85 16:15:09-EDT,1998;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 21 May 85 16:15-EDT
Date: Tue, 21 May 85 12:51:14 EST
From: Jonathan A Rees <JAR@MIT-MC>
Subject:  [COMSAT: forwarded]
To: DODDS@SCRC-STONY-BROOK
cc: BUG-ZMAIL@MIT-MC, KMP@MIT-MC, USER-INTERFACE@SCRC-STONY-BROOK
Message-ID: <[MIT-MC].512724.850521.JAR>

Date: Tue, 21 May 85 12:25:04 EST
From: Communications Satellite <COMSAT>
To:   JAR
cc:   MAIL-MAINTAINERS
Message-ID: <[MIT-MC].512689.850521>

Error in input request file.
Parsing error: Bad SITE spec - "@TENEX.SCRC.SYMBOLICS.COM"
Line stopped at is:
RCPT:(DODDS @TENEX.SCRC.SYMBOLICS.COM)
Message not sent and not queued;text of bad file follows:
--------
FROM-PROGRAM:BABYL
FROM-XUNAME:JAR
FROM-UNAME:JAR
HEADER-FORCE:RFC733
AUTHOR:JAR
RCPT:(DODDS @TENEX.SCRC.SYMBOLICS.COM)
RCPT:(BUG-ZMAIL @MIT-MC.ARPA (R-OPTION CC))
RCPT:(KMP @SCRC-STONY-BROOK.ARPA (R-OPTION CC))
RCPT:(User-Interface @SCRC-STONY-BROOK.ARPA (R-OPTION CC))
SUBJECT: Wide messages
USER-HEADER:In-reply-to: Msg of Mon 20 May 85 23:23 EDT from Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>
TEXT;-1
    Date: Mon, 20 May 85 23:23 EDT
    From: Doug Dodds <DODDS at TENEX.SCRC.Symbolics.COM>

    This strikes me as a problem that is basically irresolvable by technical
    means.  In other words, I disagree with both of you about how to deal
    with this conflict.  I personally favor creating  80-column messages,
    by voluntary action, as a community protocol.

Unlike you, I take a nonconfrontational tack: I agree with BOTH you and
KMP - as a careful reading of my original message would indicate.  (I
guess I'm going against the tide, since most people like to use
electronic mail to argue.)

I think what I meant to suggest was some human engineering which would
make such voluntary action easy to take.  That's what the dotted line
was for.  I definitely didn't want to suggest any restriction, since as
you say, people would complain, and rightfully so.

Jonathan
28-May-85 18:20:43-EDT,509;000000000000
Received: from MIT-APIARY-5 by MIT-OZ via Chaosnet; 28 May 85 18:20-EDT
Date: Tue, 28 May 85 18:17 EDT
From: Henry Lieberman <Henry@OZ>
Subject: Undigestify
To: Bug-Zmail@OZ, Bug-Babyl@OZ
Message-ID: <850528181759.3.HENRY@APIARY-5>


The Undigestify command in Zmail is very nice.  A small problem with it is that
it tends to leave a leading blank line in the undigestified messages.  Although
this is not a problem for ZMail, subsequent attempts to read the mail file
with Babyl get confused. 

 1-Jun-85 14:18:11-EDT,681;000000000000
Received: from MIT-ZERMATT by MIT-OZ via Chaosnet; 1 Jun 85 14:18-EDT
Date: Sat, 1 Jun 85 14:16 EDT
From: Richard E. Zippel <RZ@ZERMATT>
Subject: Problems with profile editor
To: BUG-ZMAIL@OZ
Message-ID: <850601141605.0.RZ@ZERMATT>

In Symbolics 3670 ZMAIL in Release 6.0, IP-TCP 29.0, MLSite 7.2,
Mailer 43.0, Japanese 20.0, Experimental Schema 83.1,
Experimental UT-Macsyma 2.0, microcode TMC5-IO4-MIC 319, on Lisp Machine Zermatt:

After specifying that the keyword ordering perdicate should be
[Alphabetic] the following was inserted in my Zmail Init file.

(LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(QUOTE (FUNCTION STRING-LESSP)))

Notice the extra QUOTE!
 2-Jun-85 18:15:05-EDT,1891;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 2 Jun 85 18:14-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA  2 Jun 85 18:14:46 EST
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 247599; Sun 2-Jun-85 18:12:30-EDT
Date: Sun, 2 Jun 85 18:14 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Problems with profile editor
To: RZ%ZERMATT@MIT-MC.ARPA
cc: BUG-ZMAIL%OZ@MIT-MC.ARPA
In-Reply-To: <850601141605.0.RZ@ZERMATT>
Message-ID: <850602181404.0.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Sat, 1 Jun 85 14:16 EDT
    From: Richard E. Zippel <RZ@ZERMATT>

    In Symbolics 3670 ZMAIL in Release 6.0, IP-TCP 29.0, MLSite 7.2,
    Mailer 43.0, Japanese 20.0, Experimental Schema 83.1,
    Experimental UT-Macsyma 2.0, microcode TMC5-IO4-MIC 319, on Lisp Machine Zermatt:

    After specifying that the keyword ordering perdicate should be
    [Alphabetic] the following was inserted in my Zmail Init file.

    (LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(QUOTE (FUNCTION STRING-LESSP)))

    Notice the extra QUOTE!

That was a mistake that was corrected a while ago, but not quite in time
for Release 6.0; it is fixed in 6.1.  Meanwhile, it can be avoided
either by setting the keyword ordering perdicate to NIL (None), or with
the following patch:

    (DEFUN CHOOSE-KEYWORDS (&OPTIONAL LABEL OLD-KEYWORDS &AUX NEW-KEYWORDS )
      (SEND *KEYWORD-WINDOW* ':SET-LABEL LABEL)
      (WHEN *KEYWORD-ALIST-SORT-PREDICATE*		; make it pretty
	(SETQ *KEYWORD-ALIST*
	      (SORTCAR *KEYWORD-ALIST*		;compensate for old spazz in predicate alist
		       (EVAL (EVAL *KEYWORD-ALIST-SORT-PREDICATE*)))))
      (MULTIPLE-VALUE (*KEYWORD-ALIST* NEW-KEYWORDS)
	(SEND *KEYWORD-WINDOW* ':MULTIPLE-CHOOSE *KEYWORD-ALIST* OLD-KEYWORDS
	      (RECTANGLE-NEAR-COMMAND-MENU)))
      NEW-KEYWORDS)

 5-Jun-85 12:42:19-EDT,1998;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 5 Jun 85 12:42-EDT
Received: from MIT-OZ by MIT-MC via Chaosnet; 5 JUN 85  12:40:04 EDT
Date: Wed, 5 Jun 1985  12:39 EDT
Message-ID: <GZ.12116739719.BABYL@MIT-OZ>
From: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>
To:   bug-zmail@MIT-MC
Subject: [GAVAN: [Mailer@OZ: Message of 17-May-85 18:38:24]]

Date: Friday, 17 May 1985  20:49-EDT
From: Gavan Duffy <GAVAN at OZ>
To:   BUG-MAIL at OZ
Re:   [Mailer@OZ: Message of 17-May-85 18:38:24]

OK.  Here's another one.  I send mail to GAVAN@OZ and OZ (evidently) tries to
send it to GAVAN@OZ.ARPA.  Doesn't OZ know that it's not on the ARPAnet?
Here are the headers:

Received: from MIT-OZ by MIT-MC via Chaosnet; 17 MAY 85  18:37:58 EDT
Date: Fri 17 May 85 18:38:25-EDT
From: The Mailer Daemon <Mailer%MIT-OZ@MIT-MC.ARPA>
To: GAVAN%MIT-OZ@MIT-MC.ARPA
Subject: Message of 17-May-85 18:38:24

Message failed for the following:
GAVAN@MIT-OZ.#Chaos: Can't forward - unknown host "MIT-OZ.ARPA"
	    ------------
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 17 May 85 18:38-EDT
Date: Fri, 17 May 85 18:37 EDT
From: Gavan Duffy <GAVAN@OZ>
Subject: Re: mprf9144 can't dired Multics
To: JSLove@MIT-MULTICS, GAVAN@MIT-OZ.ARPA
In-Reply-To: <850517080813.258303@MIT-MULTICS.ARPA>
Message-ID: <850517183740.1.GAVAN@MORRISON>

<message>

----------------
Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 17 May 85 21:31-EDT
Date: Fri, 17 May 85 21:31 EDT
From: Gavan Duffy <GAVAN@OZ>
Subject: Re: [Mailer@OZ: Message of 17-May-85 18:38:24]
To: MRC@SU-SCORE, GAVIN@OZ
cc: BUG-MAIL@OZ
In-Reply-To: The message of 17 May 85 21:23-EDT from Mark Crispin <MRC@SU-SCORE.ARPA>
Message-ID: <850517213103.6.GAVAN@MORRISON>

    Date: Fri 17 May 85 18:23:18-PDT
    From: Mark Crispin <MRC@SU-SCORE.ARPA>

    It looks to me like MIT-MORRISON generated the bogus address.

If so, will someone please forward my report to BUG-ZMAIL@MC? I forgot
to cc it to myself.

gavAn.
11-Jun-85 15:27:28-EDT,2650;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 11 Jun 85 15:27-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 11 Jun 85 15:17:20 EST
Received: from HUDSON.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 252178; Tue 11-Jun-85 15:12:59-EDT
Date: Tue, 11 Jun 85 15:14 EDT
From: Charles Hornig <Hornig@SCRC-STONY-BROOK.ARPA>
Subject: [GAVAN: [Mailer@OZ: Message of 17-May-85 18:38:24]]
To: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>, postmaster@MIT-MULTICS.ARPA,
    gavan%oz@MIT-MC.ARPA, bug-zmail@MIT-MC.ARPA
In-Reply-To: <GZ.12116739719.BABYL@MIT-OZ>
Message-ID: <850611151452.6.HORNIG@HUDSON.SCRC.Symbolics.COM>

    Date: Wed, 5 Jun 1985  12:39 EDT
    From: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>

It looks to me that it was MIT-Multics which generated the bogus
OZ.ARPA.  It has been known to do such things in the past.

    Date: Friday, 17 May 1985  20:49-EDT
    From: Gavan Duffy <GAVAN at OZ>
    To:   BUG-MAIL at OZ
    Re:   [Mailer@OZ: Message of 17-May-85 18:38:24]

    OK.  Here's another one.  I send mail to GAVAN@OZ and OZ (evidently) tries to
    send it to GAVAN@OZ.ARPA.  Doesn't OZ know that it's not on the ARPAnet?
    Here are the headers:

    Received: from MIT-OZ by MIT-MC via Chaosnet; 17 MAY 85  18:37:58 EDT
    Date: Fri 17 May 85 18:38:25-EDT
    From: The Mailer Daemon <Mailer%MIT-OZ@MIT-MC.ARPA>
    To: GAVAN%MIT-OZ@MIT-MC.ARPA
    Subject: Message of 17-May-85 18:38:24

    Message failed for the following:
    GAVAN@MIT-OZ.#Chaos: Can't forward - unknown host "MIT-OZ.ARPA"
		------------
    Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 17 May 85 18:38-EDT
    Date: Fri, 17 May 85 18:37 EDT
    From: Gavan Duffy <GAVAN@OZ>
    Subject: Re: mprf9144 can't dired Multics
    To: JSLove@MIT-MULTICS, GAVAN@MIT-OZ.ARPA
    In-Reply-To: <850517080813.258303@MIT-MULTICS.ARPA>
    Message-ID: <850517183740.1.GAVAN@MORRISON>

    <message>

    ----------------
    Received: from MIT-MORRISON by MIT-OZ via Chaosnet; 17 May 85 21:31-EDT
    Date: Fri, 17 May 85 21:31 EDT
    From: Gavan Duffy <GAVAN@OZ>
    Subject: Re: [Mailer@OZ: Message of 17-May-85 18:38:24]
    To: MRC@SU-SCORE, GAVIN@OZ
    cc: BUG-MAIL@OZ
    In-Reply-To: The message of 17 May 85 21:23-EDT from Mark Crispin <MRC@SU-SCORE.ARPA>
    Message-ID: <850517213103.6.GAVAN@MORRISON>

	Date: Fri 17 May 85 18:23:18-PDT
	From: Mark Crispin <MRC@SU-SCORE.ARPA>

	It looks to me like MIT-MORRISON generated the bogus address.

    If so, will someone please forward my report to BUG-ZMAIL@MC? I forgot
    to cc it to myself.

    gavAn.


23-Jun-85 13:54:50-EDT,3187;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 23 Jun 85 13:54-EDT
Received: from MIT-APIARY-8 by MIT-MC.ARPA via Chaosnet; 23 JUN 85  13:53:45 EDT
Date: Sun, 23 Jun 85 13:53 EDT
From: Randy Parker <PARKER@OZ>
Subject: c-20 m-x Yank Msg  produced this.
To: BUG-Zmail@OZ
cc: parker@OZ
Message-ID: <850623135334.8.PARKER@APIARY-8>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

I was on msg 19 and I thought that the above sequence
would yank msg 20 (I had ~25 msgs in buffer).

>>Trap: The first argument given to the AP-LEADER instruction, NIL, was not an array.
While in the function ZWEI:ADD-HEADER-TO-MSG  ZWEI:MERGE-MSGS-REFERENCES  ZWEI:MERGE-MSG-REFERENCES

ZWEI:ADD-HEADER-TO-MSG:  (P.C. = 142)
   Arg 0 (MSG): #<MSG 1104627>
   Arg 1 (TYPE): :INCLUDED-MSGS
   Arg 2 (PROP): ((:DATE 2697382020 :FROM (:NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>))) "<850623124746.4.PARKER@APIARY-8>" (:DATE 2697380006 :FROM (:NAME "COMSAT" :HOST (:OBJECT #<ITS-HOST MC 1400320>))) "<[MIT-MC.ARPA].553237.850623>" (:DATE 2697382980 :FROM (:NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>))) "<850623130344.5.PARKER@APIARY-8>")
   Rest arg: NIL
   Local 4 (PH): NIL
   Local 5 (DELETE-IF-EMPTY): NIL
   Local 6 (UNDO-SAVE): NIL
   Local 7 (STATUS): #<DTP-LOCATIVE 1104637>
   Local 8 (HEADERS-START-BP): ("Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 12:49-EDT" 0 :NORMAL)
   Local 9 (HEADERS-END-BP): ("" 0)
   Local 10 (LINE): NIL
   Local 11 (END-LINE): ""
   Local 12 (START-LINE): NIL
   Local 13 (TEM): NIL

ZWEI:MERGE-MSGS-REFERENCES:  (P.C. = 132)
   Arg 0 (FROM-MSGS): (#<MSG 1104670>)
   Arg 1 (INTO-MSG): #<MSG 1104627>

ZWEI:MERGE-MSG-REFERENCES:  (P.C. = 12)
   Arg 0 (FROM-MSG): #<MSG 1104670>
   Arg 1 (INTO-MSG): #<MSG 1104627>

ZWEI:COM-ZMAIL-YANK-MSG:  (P.C. = 56)

ZWEI:COM-ZMAIL-EXTENDED-COMMAND:  (P.C. = 33)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-EXTENDED-COMMAND
   Arg 1 (CHAR): 600
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-EXTENDED-COMMAND

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-COMMAND-CHAR
   Arg 3 (CH): 600

Rest of stack:
(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0):  (P.C. = 10)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0):  (P.C. = 13)
(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 143)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
23-Jun-85 14:24:28-EDT,911;000000000000
Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 14:24-EDT
Received: from APIARY-8 by MIT-REAGAN via CHAOS with CHAOS-MAIL id 5631; Sun 23-Jun-85 14:34:06-EDT
Date: Sun, 23 Jun 85 14:23 EDT
From: Randy Parker <PARKER@OZ>
Subject: regarding the c-20 m-x Yank Msg and the 
To: BUG-ZMAIL@OZ
cc: parker@OZ
Message-ID: <850623142308.3.PARKER@APIARY-8>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:


I didn't look at the frames, so this may be obvious to you,
but I just noticed that the Yank Msg command DID do the yank, and then
it bombed.  The report I just sent about moving messages was about that
same message, so obviously there may be some interaction there.

Once a message has something else yanked into it, I should still be able
to treat it as a message (i.e. moving it, replying, etc.), right?
23-Jun-85 14:31:32-EDT,2943;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 23 Jun 85 14:31-EDT
Received: from MIT-APIARY-8 by MIT-MC.ARPA via Chaosnet; 23 JUN 85  14:11:56 EDT
Date: Sun, 23 Jun 85 14:11 EDT
From: Randy Parker <PARKER@OZ>
Subject: moving mail
To: BUG-Zmail@OZ
cc: parker@OZ
Message-ID: <850623141147.1.PARKER@APIARY-8>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

I created an empty mail file sequence with the READ/CREATE FILE option
of the "Select" menu.  I then tried to move the current msg into it by
clicking on its appearance in the "Move" menu.  I got this:

>>Trap: The first argument given to the ARRAY-LEADER instruction, NIL, was not an array.
While in the function ZWEI:COPY-LINE  ZWEI:INSERT-INTERVAL  ZWEI:COPY-MSG

ZWEI:COPY-LINE:  (P.C. = 2)
   Arg 0 (LINE): NIL
   Arg 1 (NODE): #<NODE 1106207>

ZWEI:INSERT-INTERVAL:  (P.C. = 420)
   Arg 0 (AT-BP): ("" 0 :MOVES)
   Arg 1 (FROM-BP): ("Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 12:49-EDT" 0 :NORMAL)
   Arg 2 (TO-BP): ("" 0)
   Arg 3 (IN-ORDER-P): T

ZWEI:COPY-MSG:  (P.C. = 24)
   Arg 0 (MSG): #<MSG 1104627>

(:METHOD ZWEI:FILE-MAIL-BUFFER :ADD-MSG-TEXT):  (P.C. = 12)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<PARKER.MAIL>MAILER.XMAIL" 33336522>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:FILE-MAIL-BUFFER -- 9. IV's, 1. FL's 142630564>
   Arg 2 (OPERATION): :ADD-MSG-TEXT
   Arg 3 (MSG): #<MSG 1104627>
   Arg 4 (IGNORE): 0

(:METHOD ZWEI:SEQUENCE :ADD-MSG):  (P.C. = 171)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<PARKER.MAIL>MAILER.XMAIL" 33336522>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:SEQUENCE -- 6. IV's, 0. FL's 142630603>
   Arg 2 (OPERATION): :ADD-MSG
   Arg 3 (MSG): #<MSG 1104627>
   --Defaulted args:--
   Arg 4 (AT-INDEX): 0

(:METHOD ZWEI:BABYL-BUFFER :COMBINED :ADD-MSG):  (P.C. = 23)
   Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<PARKER.MAIL>MAILER.XMAIL" 33336522>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 142630520>
   Arg 2 (.OPERATION.): :ADD-MSG
   Rest arg (.DAEMON-CALLER-ARGS.): (#<MSG 1104627>)

ZWEI:COM-ZMAIL-MOVE:  (P.C. = 50)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-MOVE
   Arg 1 (CHAR): (:MENU ("Move" . ZWEI:COM-ZMAIL-MOVE) 1 #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

Rest of stack:
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
23-Jun-85 15:14:21-EDT,1215;000000000000
Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 15:14-EDT
Received: from APIARY-8 by MIT-REAGAN via CHAOS with CHAOS-MAIL id 5633; Sun 23-Jun-85 15:23:56-EDT
Date: Sun, 23 Jun 85 15:12 EDT
From: Randy Parker <PARKER@OZ>
Subject: Deleting a bad sequence...
To: BUG-ZMAIL@OZ
cc: parker@OZ
Message-ID: <850623151252.5.PARKER@APIARY-8>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

I can't find anything that lets me do the c-X K "kill buffer"
equivalent in zmail.  I want to be able to get rid of bad file sequences
I set up, so that they don't keep getting saved out.  These get set up
when I click on Read/Create File in the Select menu, enter a filename,
and it turns out to be bogus.  I even have the profile option:
"Confirmation required to select an empty sequence" set to YES, but it
still creates that sequence, lets me select it, and saves it out blank
when I hit "S".   Something should permit this, even if it is just
splitting Read/Create File into TWO options, one that checks to make
sure the file exists and reads it, and one that creates it, warning the
user if it does already exist.

23-Jun-85 17:01:39-EDT,1599;000000000000
Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 17:01-EDT
Received: from APIARY-8 by MIT-REAGAN via CHAOS with CHAOS-MAIL id 5639; Sun 23-Jun-85 17:11:26-EDT
Date: Sun, 23 Jun 85 17:00 EDT
From: Randy Parker <PARKER@OZ>
Subject: regarding the c-20 m-x Yank Msg and the 
To: Randy Parker <PARKER@OZ>
cc: BUG-ZMAIL@OZ
In-Reply-To: <850623142308.3.PARKER@APIARY-8>
Message-ID: <850623170025.0.PARKER@APIARY-8>

    Date: Sun, 23 Jun 85 14:23 EDT
    From: Randy Parker <PARKER@OZ>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:


    I didn't look at the frames, so this may be obvious to you,
    but I just noticed that the Yank Msg command DID do the yank, and then
    it bombed.  The report I just sent about moving messages was about that
    same message, so obviously there may be some interaction there.

    Once a message has something else yanked into it, I should still be able
    to treat it as a message (i.e. moving it, replying, etc.), right?

Yes, I suppose, but only if its headers aren't garbaged seems to be the
likely response.

I suspect now that those problems (Yank Msg and Move) arose because the
current message may have gotten garbaged somehow (perhaps blank like or
somesuch at beginning from going into Edit Message mode on it to yank
part to a different message being composed).

It would be nice, though, if Zmail punted making an Included-Msgs:
header (or whatever caused the loss) in the case that the current
message is bogus.

RP
24-Jun-85 13:22:23-EDT,760;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 24 Jun 85 13:15-EDT
Date: Mon, 24 Jun 85 13:14:14 EDT
From: David Vinayak Wallace <GUMBY@MIT-MC.ARPA>
Subject:  c-X c-K
To: PARKER@MIT-OZ
cc: BUG-ZMAIL@MIT-OZ
In-reply-to: Msg of Sun 23 Jun 85 15:12 EDT from Randy Parker <PARKER at OZ>
Message-ID: <[MIT-MC.ARPA].553958.850624.GUMBY>

    Date: Sun, 23 Jun 85 15:12 EDT
    From: Randy Parker <PARKER at OZ>

    I can't find anything that lets me do the c-X K "kill buffer"
    equivalent in zmail.  I want to be able to get rid of bad file sequences
    I set up, so that they don't keep getting saved out.

Mouse-right on [save] should give you a menu like zwei's.   Also, my
init file has things like c-X K and c-X c-B, etc if you want that.
24-Jun-85 16:46:20-EDT,4469;000000000000
Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 24 Jun 85 16:46-EDT
Received: from CROSBY by MIT-REAGAN via CHAOS with CHAOS-MAIL id 5656; Mon 24-Jun-85 16:56:24-EDT
Date: Mon, 24 Jun 85 16:44 EDT
From: Randy Parker <PARKER@OZ>
Subject: filter-maker lossage
To: BUG-zmail@OZ
Message-ID: <850624164429.9.PARKER@CROSBY>
Fonts: CPTFONT, CPTFONTB

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:

Enter the hi-tech new filter defining "utility" and click on OTHER in
the middle column (the one with To, CC, etc.).  When the completing
minibuffer pops up, type "t", press space bar and watch the fun begin.
Sometimes it even lets you get to the cold-load-stream.

>>Trap: The first argument given to the AR-1 instruction, NIL, was not an array.
While in the function ZWEI:COMPLETE-CHUNK-COMPARE  ZWEI:COMPLETE-STRING  ZWEI:COMPLETE-LINE

ZWEI:COMPLETE-CHUNK-COMPARE:  (P.C. = 40)
   Arg 0 (STR): NIL
   Arg 1 (DELIMS): (32 45)
   Arg 2 (NCHUNKS): 1
   Arg 3 (CHUNKS): #<ART-Q-1 32306035>
   Arg 4 (CHUNK-DELIMS): #<ART-Q-20 32306001>
   Arg 5 (TEMS): #<ART-Q-1 32306033>
   Arg 6 (RCHUNKS): NIL
   Local 7 (LEN2): 3
   Local 8 (I): 0
   Local 9 (J): 0
   Local 10 (K): NIL
   Local 11 (LEN1): 1
   Local 12 (CHUNK): "T"
   Local 13 (DELIM): NIL

ZWEI:COMPLETE-STRING:  (P.C. = 354)
   Arg 0 (STRING): "t"
   Arg 1 (ALIST): (("Date" . :DATE) ("From" . :FROM) ("Subject" . :SUBJECT) ("To" . :TO) ("cc" . :CC) ("In-Reply-To" . :IN-REPLY-TO) ("Mail-from" . :MAIL-FROM) ("Message-ID" . :MESSAGE-ID) ("Sender" . :SENDER) ("Reply-To" . :REPLY-TO) ...)
   Arg 2 (DELIMS): (32 45)
   Arg 3 (DONT-NEED-LIST): T
   Arg 4 (CHAR-POS): 1
   Arg 5 (TRUNC): T
   Arg 6 (IGNORE-RIGHT-SPACE): NIL

ZWEI:COMPLETE-LINE:  (P.C. = 33)
   Arg 0 (FORWARD-OK): NIL
   Arg 1 (MUST-COMPLETE): NIL
   Arg 2 (INSERT): 32
   --Defaulted args:--
   Arg 3 (IGNORE-RIGHT-SPACE): NIL

ZWEI:COM-SELF-INSERT-AND-COMPLETE:  (P.C. = 14)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-SELF-INSERT-AND-COMPLETE
   Arg 1 (CHAR): 32
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:PROCESS-COMMAND-CHAR:  (P.C. = 14)
   Arg 0 (CH): 32

(:METHOD ZWEI:EDITOR :EDIT):  (P.C. = 233)
   Arg 0 (SELF): #<EDITOR 32173174>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:EDITOR -- 12. IV's, 0. FL's 142345441>
   Arg 2 (OPERATION): :EDIT
   Arg 3 (TOP-LEVEL-P): NIL
   Arg 4 (DESCRIPTION): "Minibuffer Command Level"

ZWEI:COMMAND-LOOP:  (P.C. = 73)
   Arg 0 (COMTAB): #<COMTAB Completing Reader 121011304>
   Arg 1 (WINDOW): #<WINDOW 122304740>
   Arg 2 (TYPE): ZWEI:EDITOR
   Arg 3 (DESCRIPTION): "Minibuffer Command Level"

Rest of stack:
ZWEI:EDIT-IN-MINI-BUFFER:  (P.C. = 130)
ZWEI:COMPLETING-READ-FROM-MINI-BUFFER:  (P.C. = 67)
ZWEI:READ-HEADER-NAME-FROM-EDITOR-WINDOW:  (P.C. = 36)
ZWEI:INSERT-FILTER:  (P.C. = 113)
(:INTERNAL ZWEI:ZMAIL-FILTER-COMMAND-LIST 0 (:MENU)):  (P.C. = 65)
ZWEI:ZMAIL-FILTER-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FILTER-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 5)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP):  (P.C. = 114)
(:METHOD ZWEI:ZMAIL-FILTER-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 71)
ZWEI:DEFINE-NEW-FILTER:  (P.C. = 35)
ZWEI:PROFILE-NEW-FILTER:  (P.C. = 10)
(:METHOD ZWEI:ZMAIL-MULTIPLE-MENU-MIXIN :MULTIPLE-CHOOSE):  (P.C. = 67)
ZWEI:ZMAIL-MULTIPLE-MENU-CHOOSE:  (P.C. = 32)
ZWEI:PROFILE-FILTERS-OR-UNIVERSES:  (P.C. = 71)
ZWEI:PROFILE-FILTERS-BUTTON:  (P.C. = 50)
(:INTERNAL ZWEI:ZMAIL-PROFILE-COMMAND-LIST 1 (:MOUSE-BUTTON)):  (P.C. = 43)
ZWEI:ZMAIL-PROFILE-COMMAND-LIST:  (P.C. = 22)
(:METHOD ZWEI:ZMAIL-PROFILE-EDITOR :PROCESS-SPECIAL-COMMAND):  (P.C. = 5)
(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP):  (P.C. = 114)
(:METHOD ZWEI:ZMAIL-PROFILE-EDITOR :COMBINED :COMMAND-LOOP):  (P.C. = 71)
(:METHOD ZWEI:ZMAIL-PROFILE-EDITOR :EDIT-PROFILE):  (P.C. = 17)
ZWEI:COM-ZMAIL-PROFILE:  (P.C. = 33)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
24-Jun-85 22:27:20-EDT,1032;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 24 Jun 85 22:27-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 24 Jun 85 22:26:18 EST
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 262152; Mon 24-Jun-85 22:24:20-EDT
Date: Mon, 24 Jun 85 22:26 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Deleting a bad sequence...
To: PARKER%mit-OZ@MIT-MC.ARPA
cc: BUG-ZMAIL%mit-OZ@MIT-MC.ARPA
In-Reply-To: <850623151252.5.PARKER@APIARY-8>
Message-ID: <850624222601.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Sun, 23 Jun 85 15:12 EDT
    From: Randy Parker <PARKER@OZ>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

    I can't find anything that lets me do the c-X K "kill buffer"
    equivalent in zmail.  

Click right on Save.  You get a menu of Expunge, Save, and Kill for each
buffer.  Release 6.1 will also have a m-X Kill Current Sequence command.

25-Jun-85 14:44:17-EDT,5603;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 25 Jun 85 14:44-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 25 Jun 85 14:32:29 EST
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 262553; Tue 25-Jun-85 12:54:24-EDT
Date: Tue, 25 Jun 85 12:56 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: c-20 m-x Yank Msg  produced this.
To: PARKER%mit-oz@MIT-MC.ARPA
cc: BUG-Zmail%mit-oz@MIT-MC.ARPA
In-Reply-To: <850623135334.8.PARKER@APIARY-8>,
             <850623142308.3.PARKER@APIARY-8>,
             <850623170025.0.PARKER@APIARY-8>,
             <850623141147.1.PARKER@APIARY-8>
Message-ID: <850625125602.2.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Sun, 23 Jun 85 13:53 EDT
    From: Randy Parker <PARKER@OZ>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.4,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

    I was on msg 19 and I thought that the above sequence
    would yank msg 20 (I had ~25 msgs in buffer).

    >>Trap: The first argument given to the AP-LEADER instruction, NIL, was not an array.
    While in the function ZWEI:ADD-HEADER-TO-MSG  ZWEI:MERGE-MSGS-REFERENCES  ZWEI:MERGE-MSG-REFERENCES

    ZWEI:ADD-HEADER-TO-MSG:  (P.C. = 142)
       Arg 0 (MSG): #<MSG 1104627>
       Arg 1 (TYPE): :INCLUDED-MSGS
       Arg 2 (PROP): ((:DATE 2697382020 :FROM (:NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>))) "<850623124746.4.PARKER@APIARY-8>" (:DATE 2697380006 :FROM (:NAME "COMSAT" :HOST (:OBJECT #<ITS-HOST MC 1400320>))) "<[MIT-MC.ARPA].553237.850623>" (:DATE 2697382980 :FROM (:NAME "PARKER" :HOST (:OBJECT #<TOPS20-HOST OZ 1400364>))) "<850623130344.5.PARKER@APIARY-8>")
       Rest arg: NIL
       Local 4 (PH): NIL
       Local 5 (DELETE-IF-EMPTY): NIL
       Local 6 (UNDO-SAVE): NIL
       Local 7 (STATUS): #<DTP-LOCATIVE 1104637>
       Local 8 (HEADERS-START-BP): ("Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 12:49-EDT" 0 :NORMAL)
       Local 9 (HEADERS-END-BP): ("" 0)
       Local 10 (LINE): NIL
       Local 11 (END-LINE): ""
       Local 12 (START-LINE): NIL
       Local 13 (TEM): NIL

    ZWEI:MERGE-MSGS-REFERENCES:  (P.C. = 132)
       Arg 0 (FROM-MSGS): (#<MSG 1104670>)
       Arg 1 (INTO-MSG): #<MSG 1104627>

    ZWEI:MERGE-MSG-REFERENCES:  (P.C. = 12)
       Arg 0 (FROM-MSG): #<MSG 1104670>
       Arg 1 (INTO-MSG): #<MSG 1104627>

    ZWEI:COM-ZMAIL-YANK-MSG:  (P.C. = 56)


    Date: Sun, 23 Jun 85 17:00 EDT
    From: Randy Parker <PARKER@OZ>

	Date: Sun, 23 Jun 85 14:23 EDT
	From: Randy Parker <PARKER@OZ>

	In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
	microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:


	I didn't look at the frames, so this may be obvious to you,
	but I just noticed that the Yank Msg command DID do the yank, and then
	it bombed.  The report I just sent about moving messages was about that
	same message, so obviously there may be some interaction there.

	Once a message has something else yanked into it, I should still be able
	to treat it as a message (i.e. moving it, replying, etc.), right?

    Yes, I suppose, but only if its headers aren't garbaged seems to be the
    likely response.

    I suspect now that those problems (Yank Msg and Move) arose because the
    current message may have gotten garbaged somehow (perhaps blank like or
    somesuch at beginning from going into Edit Message mode on it to yank
    part to a different message being composed).

    It would be nice, though, if Zmail punted making an Included-Msgs:
    header (or whatever caused the loss) in the case that the current
    message is bogus.

    RP

    Date: Sun, 23 Jun 85 14:11 EDT
    From: Randy Parker <PARKER@OZ>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.4,
    microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

    I created an empty mail file sequence with the READ/CREATE FILE option
    of the "Select" menu.  I then tried to move the current msg into it by
    clicking on its appearance in the "Move" menu.  I got this:

    >>Trap: The first argument given to the ARRAY-LEADER instruction, NIL, was not an array.
    While in the function ZWEI:COPY-LINE  ZWEI:INSERT-INTERVAL  ZWEI:COPY-MSG

    ZWEI:COPY-LINE:  (P.C. = 2)
       Arg 0 (LINE): NIL
       Arg 1 (NODE): #<NODE 1106207>

    ZWEI:INSERT-INTERVAL:  (P.C. = 420)
       Arg 0 (AT-BP): ("" 0 :MOVES)
       Arg 1 (FROM-BP): ("Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 23 Jun 85 12:49-EDT" 0 :NORMAL)
       Arg 2 (TO-BP): ("" 0)
       Arg 3 (IN-ORDER-P): T

    ZWEI:COPY-MSG:  (P.C. = 24)
       Arg 0 (MSG): #<MSG 1104627>

    (:METHOD ZWEI:FILE-MAIL-BUFFER :ADD-MSG-TEXT):  (P.C. = 12)
       Arg 0 (SELF): #<BABYL-BUFFER "OZ:PS:<PARKER.MAIL>MAILER.XMAIL" 33336522>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:FILE-MAIL-BUFFER -- 9. IV's, 1. FL's 142630564>
       Arg 2 (OPERATION): :ADD-MSG-TEXT
       Arg 3 (MSG): #<MSG 1104627>
       Arg 4 (IGNORE): 0
    ...

I was unable to duplicate this in several tries at various combinations
of the conditions.  And the backtraces don't contain enough information
for further analysis.  I imagine that your "garbaged message" may indeed
be the cause of the problem, but we'll need more to get to the bottom of
things, if it happens again.  If it does, please forward the
(unreformatted) message(s) involved, or at least their headers.  And any
other relevant info you can think of.

25-Jun-85 18:56:56-EDT,5153;000000000000
Received: from MIT-MC by MIT-OZ via Chaosnet; 25 Jun 85 18:56-EDT
Received: from SRI-BISHOP.ARPA by MIT-MC.ARPA 25 Jun 85 18:49:34 EST
Received: from SONORA by SRI-BISHOP via CHAOS with CHAOS-MAIL id 1356; Tue 25-Jun-85 15:50:06-PDT
Date: Tue, 25 Jun 85 15:50 PDT
From: David Chapman <ZVONA@SRI-AI.ARPA>
Subject: Zmail bug; why doesn't it know my home directory?
To: BUG-zmail@MIT-MC.ARPA
Message-ID: <850625155024.2.ZVONA@SONORA.ARPA>

In Symbolics 3600 Release 6.0, Experimental SRI-SITE-OPTIONS 7.9,
Experimental LOCAL-PATCHES 2.11, IP-TCP 29.0, microcode TMC5-MIC 319,
FEP 22, on Sonora:
(SI:FULL-GC :SYSTEM-RELEASE T)'s since release of system: 2
(SI:FULL-GC :GC-COMPILED-FUNCTIONS T)'s since release of system: 1

Every six months or so I try out Zmail to convince myself that it is
still broken.  Sure enough.  This is a different bug than last time, so
here it is in case you care.  I have no init file, and typed only
``gn''.  Possibly relevant peculiarity: it logged me into SRI-AI twice,
presumably once for the Babyl file and once for the MAIL.TXT, creating
two FTP server jobs and asking for my password twice.

By the way, it also asks for my home directory on SRI-AI, defaulting
correctly.  My user object specifies a username for SRI-AI, and seems
not to have a slot for specifying a home directory.  What do I need to
do?

>>Error: The buffer SRI-AI:PS:<ZVONA>ZVONA.BABYL just got a :LOADING-DONE message,
         	      but it is now in the NIL state.
While in the function (:METHOD ZWEI:FILE-MAIL-BUFFER :LOADING-DONE)  (:INTERNAL
                                                                       (:METHOD
                                                                        ZWEI:BABYL-BUFFER
                                                                        :COMBINED
                                                                        :LOADING-DONE)
                                                                       0.)  (:METHOD
                                                                              ZWEI:MSG-BUFFER
                                                                              :WHOPPER
                                                                              :LOADING-DONE)

(:METHOD ZWEI:FILE-MAIL-BUFFER :LOADING-DONE):  (P.C. = 103)
   Arg 0 (SELF): #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:FILE-MAIL-BUFFER -- 9. IV's, 1. FL's 75744774>
   Arg 2 (OPERATION): :LOADING-DONE

(:INTERNAL (:METHOD ZWEI:BABYL-BUFFER :COMBINED :LOADING-DONE) 0.):  (P.C. = 11)
   Arg 0 (SELF): #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 75744721>
   Arg 2 (.OPERATION.): :LOADING-DONE
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:METHOD ZWEI:MSG-BUFFER :WHOPPER :LOADING-DONE):  (P.C. = 31)
   Arg 0 (SELF): #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:MSG-BUFFER -- 15. IV's, 0. FL's 75744735>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL
                                                            (:METHOD
                                                             ZWEI:BABYL-BUFFER
                                                             :COMBINED
                                                             :LOADING-DONE)
                                                            0.) 74550040>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 75744721>
   Arg 4 (.OPERATION.): :LOADING-DONE

(:METHOD ZWEI:BABYL-BUFFER :COMBINED :LOADING-DONE):  (P.C. = 13)
   Arg 0 (SELF): #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:BABYL-BUFFER -- 3. IV's, 6. FL's 75744721>
   Arg 2 (.OPERATION.): :LOADING-DONE
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:INTERNAL ZWEI:ZMAIL-BACKGROUND-REQUEST 1. (ZWEI:FILE-LOADED)):  (P.C. = 4)
   Arg 0 (**DEFSELECT-OP**): ZWEI:FILE-LOADED
   Arg 1 (BUFFER): #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>

ZWEI:ZMAIL-BACKGROUND-REQUEST:  (P.C. = 22)
   Arg 0 (OPERATION): ZWEI:FILE-LOADED
   Rest arg (SELECT-METHOD-ARGS): (#<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>)

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 5. (ZWEI:BACKGROUND)):  (P.C. = 5)
   Arg 0 (**DEFSELECT-OP**): ZWEI:BACKGROUND
   Rest arg (ARGS): (ZWEI:FILE-LOADED #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>)

ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 62)
   Arg 0 (OPERATION): ZWEI:BACKGROUND
   Rest arg (SELECT-METHOD-ARGS): (ZWEI:FILE-LOADED
                                   #<BABYL-BUFFER "SRI-AI:PS:<ZVONA>ZVONA.BABYL" 35367662>)

Rest of stack:
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)

28-Jun-85 21:43:44-EDT,452;000000000000
Received: from MIT-APIARY-9 by MIT-OZ via Chaosnet; 28 Jun 85 21:43-EDT
Date: Fri, 28 Jun 85 21:42 EDT
From: David Vinayak Wallace <Gumby@MIT-MC>
Subject: view directory would be nice
To: BUG-ZMAIL@OZ
Message-ID: <850628214240.0.GUMBY@APIARY-9>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, on Lisp Machine Apiary-9:

It would be nice if view directory were available in ZMAIL like View
File is.
29-Jun-85 01:37:03-EDT,572;000000000000
Received: from MIT-APIARY-9 by MIT-OZ via Chaosnet; 29 Jun 85 01:36-EDT
Date: Sat, 29 Jun 85 01:36 EDT
From: David Vinayak Wallace <Gumby@MIT-MC>
Subject: off-line Documentation bug
To: Bug-Zmail@OZ
Message-ID: <850629013603.4.GUMBY@APIARY-9>

In Symbolics 3600 Zmail in Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, on Lisp Machine Apiary-9:

Page 53 of book 6 in the Opus Maximus claims that mouse-left on [Jump]
means display the message PDL.  In fact, that is Mouse-middle;
mouse-left  just complains that there is not default for it yet.
29-Jun-85 03:16:35-EDT,470;000000000000
Received: from MIT-APIARY-9 by MIT-OZ via Chaosnet; 29 Jun 85 03:16-EDT
Date: Sat, 29 Jun 85 03:15 EDT
From: David Vinayak Wallace <Gumby@MIT-MC>
Subject: sys:zmail;universes lisp
To: Bug-Zmail@OZ
Message-ID: <850629031534.6.GUMBY@APIARY-9>

In Symbolics 3600 Zmail in Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, on Lisp Machine Apiary-9:

Page 6/64 of the offline documentation tells you to look at the above
file.  Well, we ain't got it.
30-Jun-85 13:37:49-EDT,670;000000000000
Received: from MIT-REAGAN by MIT-OZ via Chaosnet; 30 Jun 85 13:37-EDT
Received: from APIARY-8 by MIT-REAGAN via CHAOS with CHAOS-MAIL id 5765; Sun 30-Jun-85 13:37:21-EDT
Date: Sun, 30 Jun 85 13:37 EDT
From: Randy Parker <PARKER@OZ>
Subject: summarizing
To: BUG-ZMAIL@OZ
Message-ID: <850630133749.3.PARKER@APIARY-8>
Fonts: CPTFONT, TR8

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.4,
microcode TMC5-MIC 319, FEP 18, on Lisp Machine Apiary-8:

It would be nice if summarizing sender/recipients did more than just
check the user-id string, like maybe checking the user-id for that host
in si:*user* or the like.

RP

1P.S. Sources....
 2-Jul-85 23:28:01-EDT,5590;000000000000
Received: from MIT-HTVAX by MIT-OZ via Chaosnet; 2 Jul 85 23:27-EDT
Received: from SCRC-YUKON.ARPA (scrc-yukon.arpa.ARPA) by MIT-HTVAX.ARPA (4.12/4.7) 
	id AA21842; Tue, 2 Jul 85 23:19:38 edt
Received: from WAIKATO.SCRC.Symbolics.COM by SCRC-YUKON.ARPA via CHAOS with CHAOS-MAIL id 135823; Tue 2-Jul-85 23:18:50-EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by WAIKATO.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 106696; Tue 2-Jul-85 23:20:35-EDT
Date: Tue, 2 Jul 85 23:20 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: filter-maker lossage
To: PARKER%OZ@MIT-HTVAX.ARPA
Cc: BUG-zmail%OZ@MIT-HTVAX.ARPA, Bug-Tracking-Replies@TENEX.SCRC.Symbolics.COM
In-Reply-To: <850624164429.9.PARKER@CROSBY>
Disposition: NON-PREEMPTIVE
Category: zmail
Message-Id: <850702232003.3.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

Synopsis:  This was easily duplicated from you report.  Will work on it
as time permits.  Thanks for the report.

  -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

    Date: Mon, 24 Jun 85 16:44 EDT
    From: Randy Parker <PARKER%OZ@MIT-HTVAX.ARPA>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.4,
    microcode TMC5-MIC 319, FEP 17, on Lisp Machine Bing Crosby:

    Enter the hi-tech new filter defining "utility" and click on OTHER in
    the middle column (the one with To, CC, etc.).  When the completing
    minibuffer pops up, type "t", press space bar and watch the fun begin.
    Sometimes it even lets you get to the cold-load-stream.

    >>Trap: The first argument given to the AR-1 instruction, NIL, was not an array.
    While in the function ZWEI:COMPLETE-CHUNK-COMPARE  ZWEI:COMPLETE-STRING  ZWEI:COMPLETE-LINE

    ZWEI:COMPLETE-CHUNK-COMPARE:  (P.C. = 40)
       Arg 0 (STR): NIL
       Arg 1 (DELIMS): (32 45)
       Arg 2 (NCHUNKS): 1
       Arg 3 (CHUNKS): #<ART-Q-1 32306035>
       Arg 4 (CHUNK-DELIMS): #<ART-Q-20 32306001>
       Arg 5 (TEMS): #<ART-Q-1 32306033>
       Arg 6 (RCHUNKS): NIL
       Local 7 (LEN2): 3
       Local 8 (I): 0
       Local 9 (J): 0
       Local 10 (K): NIL
       Local 11 (LEN1): 1
       Local 12 (CHUNK): "T"
       Local 13 (DELIM): NIL

    ZWEI:COMPLETE-STRING:  (P.C. = 354)
       Arg 0 (STRING): "t"
       Arg 1 (ALIST): (("Date" . :DATE) ("From" . :FROM) ("Subject" . :SUBJECT) ("To" . :TO) ("cc" . :CC) ("In-Reply-To" . :IN-REPLY-TO) ("Mail-from" . :MAIL-FROM) ("Message-ID" . :MESSAGE-ID) ("Sender" . :SENDER) ("Reply-To" . :REPLY-TO) ...)
       Arg 2 (DELIMS): (32 45)
       Arg 3 (DONT-NEED-LIST): T
       Arg 4 (CHAR-POS): 1
       Arg 5 (TRUNC): T
       Arg 6 (IGNORE-RIGHT-SPACE): NIL

    ZWEI:COMPLETE-LINE:  (P.C. = 33)
       Arg 0 (FORWARD-OK): NIL
       Arg 1 (MUST-COMPLETE): NIL
       Arg 2 (INSERT): 32
       --Defaulted args:--
       Arg 3 (IGNORE-RIGHT-SPACE): NIL

    ZWEI:COM-SELF-INSERT-AND-COMPLETE:  (P.C. = 14)

    ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
       Arg 0 (COMMAND): ZWEI:COM-SELF-INSERT-AND-COMPLETE
       Arg 1 (CHAR): 32
       Arg 2 (PREFIX-CHAR): NIL
       Arg 3 (HOOK-LIST): NIL

    ZWEI:PROCESS-COMMAND-CHAR:  (P.C. = 14)
       Arg 0 (CH): 32

    (:METHOD ZWEI:EDITOR :EDIT):  (P.C. = 233)
       Arg 0 (SELF): #<EDITOR 32173174>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:EDITOR -- 12. IV's, 0. FL's 142345441>
       Arg 2 (OPERATION): :EDIT
       Arg 3 (TOP-LEVEL-P): NIL
       Arg 4 (DESCRIPTION): "Minibuffer Command Level"

    ZWEI:COMMAND-LOOP:  (P.C. = 73)
       Arg 0 (COMTAB): #<COMTAB Completing Reader 121011304>
       Arg 1 (WINDOW): #<WINDOW 122304740>
       Arg 2 (TYPE): ZWEI:EDITOR
       Arg 3 (DESCRIPTION): "Minibuffer Command Level"

    Rest of stack:
    ZWEI:EDIT-IN-MINI-BUFFER:  (P.C. = 130)
    ZWEI:COMPLETING-READ-FROM-MINI-BUFFER:  (P.C. = 67)
    ZWEI:READ-HEADER-NAME-FROM-EDITOR-WINDOW:  (P.C. = 36)
    ZWEI:INSERT-FILTER:  (P.C. = 113)
    (:INTERNAL ZWEI:ZMAIL-FILTER-COMMAND-LIST 0 (:MENU)):  (P.C. = 65)
    ZWEI:ZMAIL-FILTER-COMMAND-LIST:  (P.C. = 12)
    (:METHOD ZWEI:ZMAIL-FILTER-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 5)
    (:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP):  (P.C. = 114)
    (:METHOD ZWEI:ZMAIL-FILTER-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 71)
    ZWEI:DEFINE-NEW-FILTER:  (P.C. = 35)
    ZWEI:PROFILE-NEW-FILTER:  (P.C. = 10)
    (:METHOD ZWEI:ZMAIL-MULTIPLE-MENU-MIXIN :MULTIPLE-CHOOSE):  (P.C. = 67)
    ZWEI:ZMAIL-MULTIPLE-MENU-CHOOSE:  (P.C. = 32)
    ZWEI:PROFILE-FILTERS-OR-UNIVERSES:  (P.C. = 71)
    ZWEI:PROFILE-FILTERS-BUTTON:  (P.C. = 50)
    (:INTERNAL ZWEI:ZMAIL-PROFILE-COMMAND-LIST 1 (:MOUSE-BUTTON)):  (P.C. = 43)
    ZWEI:ZMAIL-PROFILE-COMMAND-LIST:  (P.C. = 22)
    (:METHOD ZWEI:ZMAIL-PROFILE-EDITOR :PROCESS-SPECIAL-COMMAND):  (P.C. = 5)
    (:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :COMMAND-LOOP):  (P.C. = 114)
    (:METHOD ZWEI:ZMAIL-PROFILE-EDITOR :COMBINED :COMMAND-LOOP):  (P.C. = 71)
    (:METHOD ZWEI:ZMAIL-PROFILE-EDITOR :EDIT-PROFILE):  (P.C. = 17)
    ZWEI:COM-ZMAIL-PROFILE:  (P.C. = 33)
    ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
    ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
    (:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
    ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
    (:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
    (:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
    (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
    ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
    SI:PROCESS-TOP-LEVEL:  (P.C. = 54)

19-Jul-85 01:04:34-EDT,1066;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 19 Jul 85 01:04-EDT
Received: from SINATRA by MIT-REAGAN via CHAOS with CHAOS-MAIL id 6386; Fri 19-Jul-85 01:06:56-EDT
Date: Fri, 19 Jul 85 01:07 EDT
From: Randy Parker <PARKER@OZ>
Subject: mail._zmail_txt protection
To: BUG-ZMAIL@OZ
Message-ID: <850719010701.3.PARKER@SINATRA>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.5,
microcode TMC5-MIC 319, VisiStep, Rodent Free Namespace Editor, on Lisp Machine Frank Sinatra:

I believe that when mail._zmail_txt is created, it should get the file
protection of mail.txt instead of the default directory protection (or
whatever it is getting now).

RP

[PHOTO:  Recording initiated  Fri 19-Jul-85 12:56am]

 MIT TOPS-20 Command Processor 5(312135)-2
@vdir me:mail.*txt

   OZ:<PARKER>
 MAIL.TXT.1;P770404         2 4308(7)    19-Jul-85 00:48:18 PARKER    
   ._ZMAIL_TXT.1;P777752    8 18712(7)   18-Jul-85 23:32:32 PARKER    

 Total of 10 pages in 2 files
@pop

[PHOTO:  Recording terminated  Fri 19-Jul-85 12:57am]
22-Jul-85 10:56:01-EDT,3160;000000000000
Received: from MIT-MOON by MIT-OZ via Chaosnet; 22 Jul 85 10:55-EDT
Date: Mon, 22 Jul 85 10:55 EDT
From: Alan Bawden <Alan@MIT-MC>
Subject: Profile Joke
To: BUG-ZMAIL@OZ
Message-ID: <850722105551.1.ALAN@MOON>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.5,
microcode TMC5-MIC 319, on Lisp Machine Keith Moon:

Indeed, the list (FUNCTION STRING-LESSP) is not a valid function.  So
then why did ZMail's profile mode insert the following into my ZMail
init when I told it I wanted to see keywords sorted?

(LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(QUOTE (FUNCTION STRING-LESSP)))

>>Error: The object (FUNCTION STRING-LESSP) is not a valid function
While in the function SI:DIGEST-LAMBDA  SI:APPLY-LAMBDA  SYS:CALL-FUNNY-FUNCTION

SI:DIGEST-LAMBDA:  (P.C. = 1517)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Arg 1 (ENV): NIL
   Arg 2 (NAME): NIL
   Arg 3 (INTERNAL): NIL
   Local 4 (MAP-RESULT): NIL
   Local 5 (THIS-FUNCTION): (FUNCTION STRING-LESSP)
   Local 6 (TYPE): NIL
   Local 7 (BODY): (STRING-LESSP)
   Local 8 (DEBUG-INFO): SYS:INVALID-FUNCTION
   Local 9 (LAMBDA-LIST): :FUNCTION
   Local 10 (ORIGINAL-LAMBDA-LIST): (FUNCTION STRING-LESSP)
   Local 11 (LAMBDA-INFO): #<DTP-LOCATIVE 43640435>
   Local 12 (ARGS-INFO): #<DTP-LOCATIVE 43640444>
   Local 13 (N-REQUIRED): #<DTP-ODD-PC 2170770>
   Local 14 (N-OPTIONAL): 3
   Local 15 (N-AUX): #<DTP-COMPILED-FUNCTION ERROR 6777403>
   Local 16 (BINDINGS): SYS:INVALID-FUNCTION
   Local 17 (SPECIAL): (:FUNCTION (FUNCTION STRING-LESSP))
   Local 18 (ITEM): #<INVALID-FUNCTION 20030334>
   Local 19 (DECLARATIONS): #<INVALID-FUNCTION 20030334>
   Local 20 (SPECIALS): :SIGNAL
   Local 21 (BODY): #<DTP-LOCATIVE 43640455>
   Local 22 (DOCUMENTATION): #<DTP-LOCATIVE 43640457>
   Local 23 (ADDITIONAL-INFO): #<DTP-ODD-PC 6777431>

SI:APPLY-LAMBDA:  (P.C. = 11)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Arg 1 (ARGUMENTS): ("KATIA" "House")

SYS:CALL-FUNNY-FUNCTION:  (P.C. = 102)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Rest arg (ARGS): ("KATIA" "House")

(FUNCTION STRING-LESSP):
   Arg 0: "KATIA"
   Arg 1: "House"

(:INTERNAL SORTCAR 0):  (P.C. = 7)
   Arg 0 (X): ("KATIA" . :KATIA)
   Arg 1 (Y): ("House" . :HOUSE)

SI:SORT-LIST-MERGE:  (P.C. = 136)
   Arg 0 (L1): (("House" . :HOUSE))
   Arg 1 (L2): (("KATIA" . :KATIA))

SI:SORT-LIST:  (P.C. = 14)
   Arg 0: (("House" . :HOUSE))

SORT:  (P.C. = 21)
   Arg 0 (X): (("House" . :HOUSE))
   Arg 1: #<DTP-COMPILED-FUNCTION (:INTERNAL SORTCAR 0) 2256443>

Rest of stack:
SORTCAR:  (P.C. = 6)
ZWEI:CHOOSE-KEYWORDS:  (P.C. = 16)
ZWEI:ZMAIL-KEYWORDS-MSG:  (P.C. = 34)
ZWEI:COM-ZMAIL-KEYWORDS:  (P.C. = 13)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
22-Jul-85 10:59:15-EDT,3429;000000000000
Received: from MIT-MOON by MIT-OZ via Chaosnet; 22 Jul 85 10:59-EDT
Date: Mon, 22 Jul 85 10:59 EDT
From: Alan Bawden <Alan@MIT-MC>
Subject: Profile Joke
To: BUG-ZMAIL@OZ
Message-ID: <850722105934.2.ALAN@MOON>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.5,
microcode TMC5-MIC 319, on Lisp Machine Keith Moon:

Indeed, the list (FUNCTION STRING-LESSP) is not a valid function.  So
then why did ZMail's profile mode insert the following into my ZMail
init when I told it I wanted to see keywords sorted?

(LOGIN-SETQ *KEYWORD-ALIST-SORT-PREDICATE* '(QUOTE (FUNCTION STRING-LESSP)))

I also find that I cannot find out how the variable
*KEYWORD-ALIST-SORT-PREDICATE* is being used in the code because I don't
have the sources.  I guess I'm just gonna have to disassemble things by
hand.  ...  I wonder how hard it would be to write an uncompiler?

>>Error: The object (FUNCTION STRING-LESSP) is not a valid function
While in the function SI:DIGEST-LAMBDA  SI:APPLY-LAMBDA  SYS:CALL-FUNNY-FUNCTION

SI:DIGEST-LAMBDA:  (P.C. = 1517)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Arg 1 (ENV): NIL
   Arg 2 (NAME): NIL
   Arg 3 (INTERNAL): NIL
   Local 4 (MAP-RESULT): NIL
   Local 5 (THIS-FUNCTION): (FUNCTION STRING-LESSP)
   Local 6 (TYPE): NIL
   Local 7 (BODY): (STRING-LESSP)
   Local 8 (DEBUG-INFO): SYS:INVALID-FUNCTION
   Local 9 (LAMBDA-LIST): :FUNCTION
   Local 10 (ORIGINAL-LAMBDA-LIST): (FUNCTION STRING-LESSP)
   Local 11 (LAMBDA-INFO): #<DTP-LOCATIVE 43640435>
   Local 12 (ARGS-INFO): #<DTP-LOCATIVE 43640444>
   Local 13 (N-REQUIRED): #<DTP-ODD-PC 2170770>
   Local 14 (N-OPTIONAL): 3
   Local 15 (N-AUX): #<DTP-COMPILED-FUNCTION ERROR 6777403>
   Local 16 (BINDINGS): SYS:INVALID-FUNCTION
   Local 17 (SPECIAL): (:FUNCTION (FUNCTION STRING-LESSP))
   Local 18 (ITEM): #<INVALID-FUNCTION 20030334>
   Local 19 (DECLARATIONS): #<INVALID-FUNCTION 20030334>
   Local 20 (SPECIALS): :SIGNAL
   Local 21 (BODY): #<DTP-LOCATIVE 43640455>
   Local 22 (DOCUMENTATION): #<DTP-LOCATIVE 43640457>
   Local 23 (ADDITIONAL-INFO): #<DTP-ODD-PC 6777431>

SI:APPLY-LAMBDA:  (P.C. = 11)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Arg 1 (ARGUMENTS): ("KATIA" "House")

SYS:CALL-FUNNY-FUNCTION:  (P.C. = 102)
   Arg 0 (FUNCTION): (FUNCTION STRING-LESSP)
   Rest arg (ARGS): ("KATIA" "House")

(FUNCTION STRING-LESSP):
   Arg 0: "KATIA"
   Arg 1: "House"

(:INTERNAL SORTCAR 0):  (P.C. = 7)
   Arg 0 (X): ("KATIA" . :KATIA)
   Arg 1 (Y): ("House" . :HOUSE)

SI:SORT-LIST-MERGE:  (P.C. = 136)
   Arg 0 (L1): (("House" . :HOUSE))
   Arg 1 (L2): (("KATIA" . :KATIA))

SI:SORT-LIST:  (P.C. = 14)
   Arg 0: (("House" . :HOUSE))

SORT:  (P.C. = 21)
   Arg 0 (X): (("House" . :HOUSE))
   Arg 1: #<DTP-COMPILED-FUNCTION (:INTERNAL SORTCAR 0) 2256443>

Rest of stack:
SORTCAR:  (P.C. = 6)
ZWEI:CHOOSE-KEYWORDS:  (P.C. = 16)
ZWEI:ZMAIL-KEYWORDS-MSG:  (P.C. = 34)
ZWEI:COM-ZMAIL-KEYWORDS:  (P.C. = 13)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
23-Jul-85 13:56:13-EDT,4903;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 23 Jul 85 13:56-EDT
Received: from MIT-OZ by MIT-MC.ARPA via Chaosnet; 23 JUL 85  13:55:29 EDT
Received: from MIT-APIARY-9 by MIT-OZ via Chaosnet; 23 Jul 85 13:55-EDT
Date: Tue, 23 Jul 85 13:55 EDT
From: Stephen Robbins <STEVER%OZ@MIT-AI.ARPA>
Subject: ZMAIL blew up with an interesting message...
To: BUG-ZMAIL@MIT-MC.ARPA
Message-ID: <850723135529.8.STEVER@APIARY-9>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.5,
microcode TMC5-MIC 319, Rodent Free Namespace Editor, on Lisp Machine Apiary-9:

I don't know how to reproduce this, but I figured that knowing that
something is wrong is better than not knowing.

>>Error: The object #<TENEX-INBOX-BUFFER "OZ:PS:<STEVER>MAIL.TXT.1" 10021612> received a :UPDATE-OPTIONS-IN-FILE message, which went unclaimed.
         The rest of the message was ()
While in the function ZWEI:MSG-BUFFER-SAVE-P  ZWEI:SAVE-MAIL-BUFFER  ZWEI:ZMAIL-SAVE-ALL

ZWEI:MSG-BUFFER-SAVE-P:  (P.C. = 57)
   Arg 0 (BUFFER): #<TENEX-INBOX-BUFFER "OZ:PS:<STEVER>MAIL.TXT.1" 10021612>
   Local 1 (SAVE-P): NIL
   Local 2 (EXPUNGE-P): NIL

ZWEI:SAVE-MAIL-BUFFER:  (P.C. = 22)
   Arg 0 (BUFFER): #<TENEX-INBOX-BUFFER "OZ:PS:<STEVER>MAIL.TXT.1" 10021612>
   --Defaulted args:--
   Arg 1 (FOR-FINISH): NIL

ZWEI:ZMAIL-SAVE-ALL:  (P.C. = 56)

ZWEI:COM-ZMAIL-QUIT:  (P.C. = 33)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-QUIT
   Arg 1 (CHAR): 113
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-QUIT

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-COMMAND-CHAR):  (P.C. = 7)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-COMMAND-CHAR
   Arg 3 (CH): 113

(:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0):  (P.C. = 10)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (113)

(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN -- 6. IV's, 0. FL's 142611503>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 0) 47674121>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 113

(:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0):  (P.C. = 13)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (113)

(:METHOD ZWEI:ZMAIL-FRAME :WHOPPER :PROCESS-COMMAND-CHAR):  (P.C. = 21)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.WHOPPER-CONTINUATION.): #<DTP-COMPILED-FUNCTION (:INTERNAL (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR) 0) 47674106>
   Arg 3 (.OLD-SELF-MAPPING-TABLE.): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 4 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Arg 5 (CHAR): 113

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :PROCESS-COMMAND-CHAR):  (P.C. = 12)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :PROCESS-COMMAND-CHAR
   Rest arg (.DAEMON-CALLER-ARGS.): (113)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 143)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
23-Jul-85 14:23:16-EDT,1124;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 23 Jul 85 14:23-EDT
Received: from MIT-OZ by MIT-MC.ARPA via Chaosnet; 23 JUL 85  14:22:37 EDT
Received: from MIT-APIARY-9 by MIT-OZ via Chaosnet; 23 Jul 85 14:22-EDT
Date: Tue, 23 Jul 85 14:22 EDT
From: Stephen Robbins <STEVER%OZ@MIT-AI.ARPA>
Subject: A little more detail on the bug report I sent
To: bug-zmail@MIT-MC.ARPA
Message-ID: <850723142225.9.STEVER@APIARY-9>


I had entered Zmail with a normal Select-M.  I clicked left on
Get-Inbox, which retrieved my BABYL file from OZ and loaded my inbox
on top of that (this is what I normally do anyway).

I had replied to a message and forwarded a message before trying to
exit.  I exitted (and got the reported error) by typing Q.  It seemed
to save the file, and it DID readjust the survey display.

... As an aside, is there a way to set up a reply mode so on reply, it
goes TO: the original TO-list and the sender, MINUS me, and CC: the
original CC?  I can't seem to find a way of excluding myself from
replies without excluding others or changing the header in some
undesirable way.

Stever
23-Jul-85 18:40:06-EDT,421;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 23 Jul 85 18:39-EDT
Date: Tue, 23 Jul 85 18:39:35 EDT
From: David Vinayak Wallace <GUMBY@MIT-MC.ARPA>
Subject:  mail to yourself?
To: STEVER@MIT-OZ
cc: BUG-ZMAIL@MIT-MC.ARPA
In-reply-to: Msg of Tue 23 Jul 85 14:22 EDT from Stephen Robbins <STEVER%OZ at MIT-AI.ARPA>
Message-ID: <[MIT-MC.ARPA].585860.850723.GUMBY>

set don't reply-to to be a list of yourself?
24-Jul-85 19:26:41-EDT,2184;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 24 Jul 85 19:26-EDT
Received: from SCRC-YUKON.ARPA by MIT-MC.ARPA 24 Jul 85 19:20:39 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-YUKON.ARPA via CHAOS with CHAOS-MAIL id 140741; Wed 24-Jul-85 14:05:42-EDT
Date: Wed, 24 Jul 85 14:06 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: ZMAIL blew up with an interesting message...
To: STEVER%OZ@MIT-AI.ARPA
cc: BUG-ZMAIL@MIT-MC.ARPA
In-Reply-To: <850723135529.8.STEVER@APIARY-9>
Message-ID: <850724140644.5.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Tue, 23 Jul 85 13:55 EDT
    From: Stephen Robbins <STEVER%OZ@MIT-AI.ARPA>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.5,
    microcode TMC5-MIC 319, Rodent Free Namespace Editor, on Lisp Machine Apiary-9:

    I don't know how to reproduce this, but I figured that knowing that
    something is wrong is better than not knowing.

    >>Error: The object #<TENEX-INBOX-BUFFER "OZ:PS:<STEVER>MAIL.TXT.1" 10021612> received a :UPDATE-OPTIONS-IN-FILE message, which went unclaimed.
	     The rest of the message was ()
    While in the function ZWEI:MSG-BUFFER-SAVE-P  ZWEI:SAVE-MAIL-BUFFER  ZWEI:ZMAIL-SAVE-ALL

This is a know problem that has eluded our nets so far.  There appears
to be a window in the foreground/background interlocking such that if
you do an operation like Delete to a new message while the inbox is
still being read in the background (for your usual, or default,
mailbox), things sometimes get confused, and ZWEI:*DEFAULT-BUFFER* is
set to the pathname of the inbox, rather than the mailbox.

The trouble shows up later when you Quit or Save, which saves all
buffers, and tries to save the default buffer last (for crash
protection).  But in cases like this, it is trying to save a bogus
mailbox, resulting in this blowup.  In this kind of case, all of the
real mailboxes have already been saved when this blowout happens (as you
observed).  To set things right, select your default mailbox, Suspend,
and compare ZWEI:*DEFAULT-BUFFER* with ZWEI:*SEQUENCE*.  If they are
different, just (SETQ ZWEI:*DEFAULT-BUFFER* ZWEI:*SEQUENCE*).

24-Jul-85 19:36:27-EDT,683;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 24 Jul 85 19:36-EDT
Received: from MIT-OZ by MIT-MC.ARPA via Chaosnet; 24 JUL 85  19:24:04 EDT
Received: from MIT-APIARY-8 by MIT-OZ via Chaosnet; 24 Jul 85 10:05-EDT
Date: Wed, 24 Jul 85 10:05 EDT
From: Stephen Robbins <STEVER%OZ@MIT-AI.ARPA>
Subject: mail to yourself?
To: GUMBY@MIT-MC.ARPA
cc: BUG-ZMAIL@MIT-MC.ARPA
In-Reply-To: <[MIT-MC.ARPA].585860.850723.GUMBY>
Message-ID: <850724100517.1.STEVER@APIARY-8>

    Date: Tue, 23 Jul 85 18:39:35 EDT
    From: David Vinayak Wallace <GUMBY@MIT-MC.ARPA>

    set don't reply-to to be a list of yourself?

Ah ha!  It worked.  Thank you, Gumby!
When'll you be back?
28-Jul-85 16:37:52-EDT,1396;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 28 Jul 85 16:37-EDT
Received: from APIARY-8 by MIT-REAGAN via CHAOS with CHAOS-MAIL id 6607; Sun 28-Jul-85 16:40:11-EDT
Date: Sun, 28 Jul 85 16:37 EDT
From: Randy Parker <PARKER@MIT-REAGAN>
Subject: bugs
To: BUG-ZMAIL@OZ
Message-ID: <850728163751.4.PARKER@APIARY-8>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.5,
microcode TMC5-MIC 319, FEP 18, Rodent Free Namespace Editor, on Lisp Machine Apiary-8:

Some annoying assorted bugs that you probably already know about:

1)  Putting the mouse over "Configure" in the Zmail top-level menu seems
to produce bogusness in the mouse documentation line.  In a freshly
loaded Zmail (default configuration), I moved the mouse over to
"Configure" because of #3 below.  Middle click was "Both".  I clicked
middle and got Month.  I have this set in my zmail-init, but it doc line
should get this so I don't have to remember every change I make in my
init.

2)  zwei:preload-zmail leaves the file state line with the last file
loaded (in my case it shows " filename 97% #") until I actually enter
Zmail.

3)  Changing the summary window fraction in my init only seems to change
things after I both enter Zmail and perform some operation that changes
to another configuration and then goes back.  Is there an easier way to
get this to happen automatically?
29-Jul-85 12:59:09-EDT,2738;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 29 Jul 85 12:58-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 29 Jul 85 12:53:42 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 284217; Mon 29-Jul-85 12:11:59-EDT
Date: Mon, 29 Jul 85 12:13 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: bugs
To: PARKER@MIT-REAGAN.ARPA
cc: BUG-ZMAIL%OZ@MIT-MC.ARPA
In-Reply-To: <850728163751.4.PARKER@APIARY-8>
Message-ID: <850729121315.5.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Sun, 28 Jul 85 16:37 EDT
    From: Randy Parker <PARKER@MIT-REAGAN>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.5,
    microcode TMC5-MIC 319, FEP 18, Rodent Free Namespace Editor, on Lisp Machine Apiary-8:

    Some annoying assorted bugs that you probably already know about:

    1)  Putting the mouse over "Configure" in the Zmail top-level menu seems
    to produce bogusness in the mouse documentation line.  In a freshly
    loaded Zmail (default configuration), I moved the mouse over to
    "Configure" because of #3 below.  Middle click was "Both".  I clicked
    middle and got Month.  I have this set in my zmail-init, but it doc line
    should get this so I don't have to remember every change I make in my
    init.

    2)  zwei:preload-zmail leaves the file state line with the last file
    loaded (in my case it shows " filename 97% #") until I actually enter
    Zmail.

zwei:preload-zmail has some glitches in its operation, and hasn't been
given enough attention.  We'll try to clean this area up.

    3)  Changing the summary window fraction in my init only seems to change
    things after I both enter Zmail and perform some operation that changes
    to another configuration and then goes back.  Is there an easier way to
    get this to happen automatically?

Numbers 1 and 3 are due to the same thing, which isn't a bug, but can be
surprising: the Zmail user profile is not read and instantiated until
there is a command given for any Zmail operation that depends on a user
option.  (That's almost anything, like Mail, Get Inbox, Configure...)
Therefore, if you change the Both configuration proportion, this doesn't
take effect until you Get Inbox, or whatever.  You don't have to switch
to a different configuration, just do anything to instantiate the
profile.

The reason it was done that way was that installing the profile
generally causes a significant pause, and it was deemed bad and ugly to
have it happen immediately, the first time you select the Zmail frame.
I suppose this could be reconsidered, but I still think it's probably
better (but not necessarily great).

 1-Aug-85 01:29:17-EDT,3852;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 1 Aug 85 01:29-EDT
Received: from MCC.ARPA by MIT-MC.ARPA  1 Aug 85 01:27:55 EDT
Received: from ARIES by MCC.ARPA via Chaosnet; Thu 1 Aug 85 00:22:19-CDT
Date: Thu, 1 Aug 85 00:25 CDT
From: David Vinayak Wallace <Gumby@MCC-AI>
Subject: Select date relative to message
To: BUG-ZMAIL%MC@MCC-AI
Message-ID: <850801002539.7.GUMBY@MCC-GANESH>

In Symbolics 3640 Release 6.0, MCC-Site 2.0, IP-TCP 29.0,
microcode TMC5-IO4-ST506-MIC 319, on Lord Ganesh:

I tried to select a filtered sequence by date.  It said "After what date
(or select message with mouse)," so I did (select m-w-m, that is) and,
rather than a new sequence, got:

>>Trap: The first argument given to the SYS:LDB-INTERNAL instruction, ZWEI:MSG, was not a number.
While in the function CHAR-CODE  TIME:LEXICALLY-ANALYZE  TIME:PARSE-UNIVERSAL-TIME

CHAR-CODE:  (P.C. = 2)
   Arg 0 (CHAR): ZWEI:MSG

TIME:LEXICALLY-ANALYZE:  (P.C. = 12)
   Arg 0 (STRING): #<MSG 5205044>
   Arg 1 (START): 0.
   Arg 2 (END): 10.

TIME:PARSE-UNIVERSAL-TIME:  (P.C. = 156)
   Arg 0: #<MSG 5205044>
   --Defaulted args:--
   Arg 1 (START): 0.
   Arg 2 (END): 10.
   Arg 3 (FUTUREP): T
   Arg 4 (BASE-TIME): NIL
   Arg 5 (MUST-HAVE-TIME): NIL
   Arg 6 (DATE-MUST-HAVE-YEAR): NIL
   Arg 7 (TIME-MUST-HAVE-SECOND): NIL
   Arg 8 (DAY-MUST-BE-VALID): T

ZWEI:GET-FILTER-FUNCTION-1:  (P.C. = 441)
   Arg 0 (UNIVERSE): #<COLLECTION "[MCC:<AI.GUMBY>ITS.BABYL]{Dead}" 27361714>
   Arg 1 (NAME): "[MCC:<AI.GUMBY>ITS.BABYL]{Dead}"
   Arg 2 (NEAR-MODE): (:MOUSE)

ZWEI:GET-FILTER-FUNCTION:  (P.C. = 14)
   --Defaulted args:--
   Arg 0 (NEAR-MODE): (:MOUSE)

ZWEI:GET-FILTER-COLLECTION:  (P.C. = 2)

ZWEI:COM-ZMAIL-SELECT:  (P.C. = 15)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-SELECT
   Arg 1 (CHAR): (:MENU ("Select" . ZWEI:COM-ZMAIL-SELECT) 2. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-SELECT

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0. (:MENU)):  (P.C. = 10)
   Arg 0 (**DEFSELECT-OP**): :MENU
   Arg 1 (ITEM): ("Select" . ZWEI:COM-ZMAIL-SELECT)
   Arg 2 (CH): 2.
   Arg 3 (WINDOW): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>

ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
   Arg 0 (OPERATION): :MENU
   Rest arg (SELECT-METHOD-ARGS): (("Select" . ZWEI:COM-ZMAIL-SELECT) 2. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-SPECIAL-COMMAND
   Rest arg (ARGS): (:MENU ("Select" . ZWEI:COM-ZMAIL-SELECT) 2. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
 1-Aug-85 14:49:57-EDT,1073;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 1 Aug 85 14:49-EDT
Received: from MCC.ARPA by MIT-MC.ARPA  1 Aug 85 14:48:15 EDT
Received: from ARIES by MCC.ARPA via Chaosnet; Thu 1 Aug 85 13:43:42-CDT
Date: Thu, 1 Aug 85 13:47 CDT
From: David Vinayak Wallace <Gumby@MCC-AI>
Subject: typeout window
To: Bug-Zmail%mc@MCC-AI
Message-ID: <850801134706.8.GUMBY@MCC-GANESH>

In Symbolics 3640 Zmail in Release 6.0, MCC-Site 2.0, IP-TCP 29.0,
microcode TMC5-IO4-ST506-MIC 319, on Lord Ganesh:

this is a longstanding bug I've reported several times.  This is the Rel
6 report.

If I go into one-window survey mode (e.g. by accidentally clicking the
mouse at the top of the survey pane), then the typout window is
perminently set to be the survey window, no matter what the
configuration of the zmail frame.  Therefore, <help> while sending a
message appears only to hang; the expunge survey forces the survey
window to appear when I am in the message-only configuration, and things
like notifications even appear there!  this is incredibly inconvenient!
26-Aug-85 11:28:49-EDT,1308;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 26 Aug 85 11:28-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 26 Aug 85 11:25:49 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 301262; Mon 26-Aug-85 11:25:49-EDT
Date: Mon, 26 Aug 85 11:27 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Select date relative to message
To: Gumby@MCC.ARPA
cc: BUG-ZMAIL@MIT-MC.ARPA
In-Reply-To: <850801002539.7.GUMBY@MCC-GANESH>
Message-ID: <850826112739.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thu, 1 Aug 85 00:25 CDT
    From: David Vinayak Wallace <Gumby@MCC-AI>

    In Symbolics 3640 Release 6.0, MCC-Site 2.0, IP-TCP 29.0,
    microcode TMC5-IO4-ST506-MIC 319, on Lord Ganesh:

    I tried to select a filtered sequence by date.  It said "After what date
    (or select message with mouse)," so I did (select m-w-m, that is) and,
    rather than a new sequence, got:

    >>Trap: The first argument given to the SYS:LDB-INTERNAL instruction, ZWEI:MSG, was not a number.
    While in the function CHAR-CODE  TIME:LEXICALLY-ANALYZE  TIME:PARSE-UNIVERSAL-TIME

Sorry about the slow response, I was have been on vacation.  This has
been fixed and works correctly in Release 6.1.  Thanks for the report.

26-Aug-85 11:28:57-EDT,1369;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 26 Aug 85 11:28-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 26 Aug 85 11:26:19 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 301263; Mon 26-Aug-85 11:26:11-EDT
Date: Mon, 26 Aug 85 11:27 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: Select date relative to message
To: Gumby@MCC.ARPA
cc: BUG-ZMAIL@MIT-MC.ARPA
In-Reply-To: <850801002539.7.GUMBY@MCC-GANESH>
Supersedes: <850826112739.4.DODDS@ANNISQUAM.SCRC.Symbolics.COM>
Message-ID: <850826112758.5.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thu, 1 Aug 85 00:25 CDT
    From: David Vinayak Wallace <Gumby@MCC-AI>

    In Symbolics 3640 Release 6.0, MCC-Site 2.0, IP-TCP 29.0,
    microcode TMC5-IO4-ST506-MIC 319, on Lord Ganesh:

    I tried to select a filtered sequence by date.  It said "After what date
    (or select message with mouse)," so I did (select m-w-m, that is) and,
    rather than a new sequence, got:

    >>Trap: The first argument given to the SYS:LDB-INTERNAL instruction, ZWEI:MSG, was not a number.
    While in the function CHAR-CODE  TIME:LEXICALLY-ANALYZE  TIME:PARSE-UNIVERSAL-TIME

Sorry about the slow response, I have been on vacation.  This has
been fixed and works correctly in Release 6.1.  Thanks for the report.

26-Aug-85 11:43:59-EDT,1910;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 26 Aug 85 11:43-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 26 Aug 85 11:41:18 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 301287; Mon 26-Aug-85 11:40:34-EDT
Date: Mon, 26 Aug 85 11:42 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: typeout window
To: Gumby@MCC.ARPA
cc: Bug-Zmail@MIT-MC.ARPA
In-Reply-To: <850801134706.8.GUMBY@MCC-GANESH>
Message-ID: <850826114218.7.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thu, 1 Aug 85 13:47 CDT
    From: David Vinayak Wallace <Gumby@MCC-AI>

    In Symbolics 3640 Zmail in Release 6.0, MCC-Site 2.0, IP-TCP 29.0,
    microcode TMC5-IO4-ST506-MIC 319, on Lord Ganesh:

    this is a longstanding bug I've reported several times.  This is the Rel
    6 report.

    If I go into one-window survey mode (e.g. by accidentally clicking the
    mouse at the top of the survey pane), then the typout window is
    perminently set to be the survey window, no matter what the
    configuration of the zmail frame.  Therefore, <help> while sending a
    message appears only to hang; the expunge survey forces the survey
    window to appear when I am in the message-only configuration, and things
    like notifications even appear there!  this is incredibly inconvenient!

You bet.  There have been a number of cases of this kind of confusion in
setting the typeout window when hanging configurations.  All the cases
that I know about are fixed in both the development system and in
Release 6.1.  

A palliative that you can use until 6.1 arrives is this: when the
typeout window is stuck in the survey window, click on Profile (switches
to profile frame), then click on Exit (back to previous top-level
configuration).  This will correct the location of the typeout window to
the message window.

 4-Sep-85 13:54:26-EDT,3112;000000000000
Received: from MIT-HILBERT by MIT-OZ via Chaosnet; 4 Sep 85 13:54-EDT
Date: Wed, 4 Sep 85 13:54 EDT
From: Patrick A. O'Donnell <PAO@MIT-EECS>
Subject: [Map Over / Keywords (M)]
To: BUG-ZMAIL@OZ
Message-ID: <850904135425.6.PAO@HILBERT>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.5, Manip 5.12,
Puma 5.12, microcode TMC5-MIC 319, FEP 18, on Lisp Machine David Hilbert:

I clicked [Map Over / Keywords (M)].  Returning a value from LENGTH
allows the operation to proceed without any further problem.



>>Error: The first argument (X) to LENGTH, :INDIVIDUAL-FILTERS, was of the wrong type.
         The function expected a list.
While in the function LENGTH  ZWEI:ZMAIL-KEYWORDS-ALL  ZWEI:COM-ZMAIL-KEYWORDS-ALL

LENGTH:  (P.C. = 24)
   Arg 0 (X): :INDIVIDUAL-FILTERS
   Local 1 (L): SI:X
   Local 2 (I): :INDIVIDUAL-FILTERS

ZWEI:ZMAIL-KEYWORDS-ALL:  (P.C. = 47)
   Arg 0 (ON-P): T

ZWEI:COM-ZMAIL-KEYWORDS-ALL:  (P.C. = 13)

ZWEI:COM-ZMAIL-MAP-OVER:  (P.C. = 52)

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-MAP-OVER
   Arg 1 (CHAR): (:MENU ("Map over" . ZWEI:COM-ZMAIL-MAP-OVER) 4. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-MAP-OVER

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0. (:MENU)):  (P.C. = 10)
   Arg 0 (**DEFSELECT-OP**): :MENU
   Arg 1 (ITEM): ("Map over" . ZWEI:COM-ZMAIL-MAP-OVER)
   Arg 2 (CH): 4.
   Arg 3 (WINDOW): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>

ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
   Arg 0 (OPERATION): :MENU
   Rest arg (SELECT-METHOD-ARGS): (("Map over" . ZWEI:COM-ZMAIL-MAP-OVER) 4. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-SPECIAL-COMMAND
   Rest arg (ARGS): (:MENU ("Map over" . ZWEI:COM-ZMAIL-MAP-OVER) 4. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
14-Sep-85 18:43:23-EDT,2772;000000000000
Received: from MIT-JIMI by MIT-OZ via Chaosnet; 14 Sep 85 18:43-EDT
Date: Sat, 14 Sep 85 18:42 EDT
From: David Vinayak Wallace <Gumby@MIT-MC>
Subject: can't move message!
To: BUG-zmail@OZ
Message-ID: <850914184231.4.GUMBY@JIMI>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 10.2,
microcode TMC5-MIC 319, on Lisp Machine Jimi Hendrix:

This has never been a problem before!

>>Trap: The first argument given to the SYS:+-INTERNAL instruction, NIL, was not a number.
While in the function ZWEI:COM-ZMAIL-MOVE  ZWEI:COMMAND-EXECUTE  ZWEI:ZMAIL-COMMAND-EXECUTE

ZWEI:COM-ZMAIL-MOVE:  (P.C. = 15)
   Local 0 (DEFAULTED-MOVE-SEQUENCE): #<BABYL-BUFFER "MC: GUMBY; GUMBY BABYL" 13665747>

ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
   Arg 0 (COMMAND): ZWEI:COM-ZMAIL-MOVE
   Arg 1 (CHAR): (:MENU ("Move" . ZWEI:COM-ZMAIL-MOVE) 4. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)
   --Defaulted args:--
   Arg 2 (PREFIX-CHAR): NIL
   Arg 3 (HOOK-LIST): NIL

ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
   Arg 0: ZWEI:COM-ZMAIL-MOVE

(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0. (:MENU)):  (P.C. = 10)
   Arg 0 (**DEFSELECT-OP**): :MENU
   Arg 1 (ITEM): ("Move" . ZWEI:COM-ZMAIL-MOVE)
   Arg 2 (CH): 4.
   Arg 3 (WINDOW): #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>

ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
   Arg 0 (OPERATION): :MENU
   Rest arg (SELECT-METHOD-ARGS): (("Move" . ZWEI:COM-ZMAIL-MOVE) 4. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)

(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :PROCESS-SPECIAL-COMMAND
   Rest arg (ARGS): (:MENU ("Move" . ZWEI:COM-ZMAIL-MOVE) 4. #<ZMAIL-MAIN-COMMAND-MENU-PANE Zmail Main Command Menu Pane 1 43207724 exposed>)

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 65. IV's, 20. FL's 142611405>
   Arg 2 (.OPERATION.): :COMMAND-LOOP
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
22-Sep-85 19:00:55-EDT,972;000000000000
Received: from MIT-JIMI by MIT-OZ via Chaosnet; 22 Sep 85 19:00-EDT
Date: Sun, 22 Sep 85 19:02 EDT
From: David Vinayak Wallace <Gumby@MIT-MC>
Subject: get inbox for buffer
To: BUG-ZMAIL@OZ
cc: Gumby@MIT-MC
Message-ID: <850922190218.2.GUMBY@JIMI>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 10.3,
microcode TMC5-MIC 319, on Lisp Machine Jimi Hendrix:

I read xx:<gumby>mail.txt with get inbox for buffer (right on Get Inbox,
etc).  I had no new mail.  So the modeline said "Empty mail file"
(although it showed the right name: xx:<gumby>gumby.babyl).  The message
pane showed the message I'd been viewing in my primary mail file.
Typing space just blanked the message pane.  I re-selected
mc:gumby;gumby babyl and then reselected xx:<gumby>gumby.babyl.  The
modeline now displayed the correct number of mesages and the message
pane now displayed a message from xx:...

I was in the message-only configuration if that matters.

david
23-Sep-85 22:35:46-EDT,2205;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 23 Sep 85 22:35-EDT
Received: from SCRC-STONY-BROOK by MIT-REAGAN via INTERNET with SMTP id 8254; 23 Sep 85 22:37:34-EDT
Received: from CROW.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 319617; Mon 23-Sep-85 22:34:06-EDT
Date: Mon, 23 Sep 85 22:32 EDT
From: Robert W. Kerns <RWK@SCRC-YUKON.ARPA>
Subject: get inbox for buffer
To: David Vinayak Wallace <Gumby@MIT-MC.ARPA>
cc: BUG-ZMAIL@OZ.mit
In-Reply-To: <850922190218.2.GUMBY@JIMI>
Supersedes: <850923223244.1.RWK@CROW.SCRC.Symbolics.COM>
Message-ID: <850923223254.2.RWK@CROW.SCRC.Symbolics.COM>

    Date: Sun, 22 Sep 85 19:02 EDT
    From: David Vinayak Wallace <Gumby@MIT-MC>

    In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 10.3,
    microcode TMC5-MIC 319, on Lisp Machine Jimi Hendrix:

    I read xx:<gumby>mail.txt with get inbox for buffer (right on Get Inbox,
    etc).  I had no new mail.  So the modeline said "Empty mail file"
    (although it showed the right name: xx:<gumby>gumby.babyl).  The message
    pane showed the message I'd been viewing in my primary mail file.
    Typing space just blanked the message pane.  I re-selected
    mc:gumby;gumby babyl and then reselected xx:<gumby>gumby.babyl.  The
    modeline now displayed the correct number of mesages and the message
    pane now displayed a message from xx:...

    I was in the message-only configuration if that matters.

    david

I don't understand this report.  You start out talking about
xx:<gumby>mail.txt, but end up talking about xx:<gumby>gumby.babyl.

At least one of us is confused.  (Obvious, eh?)

Guessing what you mean, in the first sentence, where you say "etc",
was that "click on Find File, specify "XX:<gumby>mail.txt"?  If so,
you've confused the inbox and the buffer.  "XX:<gumby>mail.txt" is
an inbox; it's asking you for a buffer who's inbox you want to read.
Possibly you wanted Middle on Get Inbox.  Perhaps you wanted to
say xx:<gumby>gumby.babyl instead of mail.txt.  Or perhaps you just
wanted the simple thing, Right on Select, Left on Find File, to just
read in and display your XX: babyl file.

24-Sep-85 03:40:46-EDT,2345;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 24 Sep 85 03:40-EDT
Date: Tue, 24 Sep 85 03:40:12 EDT
From: David Vinayak Wallace <GUMBY@MIT-MC.ARPA>
Subject:  get inbox for buffer
To: RWK@SCRC-YUKON.ARPA
cc: BUG-ZMAIL@MIT-OZ
Message-ID: <[MIT-MC.ARPA].657384.850924.GUMBY>

    Date: Mon, 23 Sep 85 22:32 EDT
    From: Robert W. Kerns <RWK at SCRC-YUKON.ARPA>

        Date: Sun, 22 Sep 85 19:02 EDT
        From: David Vinayak Wallace <Gumby@MIT-MC>

        In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 10.3,
        microcode TMC5-MIC 319, on Lisp Machine Jimi Hendrix:

        I read xx:<gumby>mail.txt with get inbox for buffer (right on
        Get Inbox, etc).  I had no new mail.  So the modeline said
        "Empty mail file" (although it showed the right name:
        xx:<gumby>gumby.babyl).  The message pane showed the message
        I'd been viewing in my primary mail file.  Typing space just
        blanked the message pane.  I re-selected mc:gumby;gumby babyl
        and then reselected xx:<gumby>gumby.babyl.  The modeline now
        displayed the correct number of mesages and the message pane
        now displayed a message from xx:...

        I was in the message-only configuration if that matters.


    I don't understand this report.  You start out talking about
    xx:<gumby>mail.txt, but end up talking about xx:<gumby>gumby.babyl.

    At least one of us is confused.  (Obvious, eh?)
You're confused because of my vauge report.  I'l try again.

    Guessing what you mean, in the first sentence, where you say "etc",
    was that "click on Find File, specify "XX:<gumby>mail.txt"?  If so,
    you've confused the inbox and the buffer.  "XX:<gumby>mail.txt" is
    an inbox; it's asking you for a buffer who's inbox you want to read.
    Possibly you wanted Middle on Get Inbox.  Perhaps you wanted to
    say xx:<gumby>gumby.babyl instead of mail.txt.  Or perhaps you just
    wanted the simple thing, Right on Select, Left on Find File, to just
    read in and display your XX: babyl file.

Nope.  I read xx:<gumby>mail.txt by clicking right on "Get Inbox,"
then left on "Read/Create File," specifying xx:<gumby>gumby.babyl
(whose associated inbox is xx:<gumby>mail.txt). (whew).  No confusion
in my mind, only in my explanation.

david
 4-Oct-85 07:55:10-EDT,1036;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 4 Oct 85 07:55-EDT
Received: from MERLIN by MIT-REAGAN via CHAOS with CHAOS-MAIL id 8588; Fri 4-Oct-85 07:56:53-EDT
Date: Fri, 4 Oct 85 07:56 EDT
From: Randy Parker <PARKER@MIT-REAGAN>
Subject: Read/Create File should be separate
To: BUG-ZMAIL@OZ
Message-ID: <851004075647.1.PARKER@MERLIN>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 9.7,
microcode TMC5-MIC 319, FEP 18, Rodent Free Namespace Editor,
Logical Pathname Completion patch, on PA Lisp Machine Merlin:

IWBNI read and create were separate choices on the Move and Select
menus.  This would allow me to be less sure of the pathname I give when
I want to do a "Read", as it would barf if it doesn't exist (like 
*FIND-FILE-NOT-FOUND-IS-AN-ERROR* does when T) or offer c-Return to
create it anyhow.  I have too many mail files to remember (or) to tell
Zmail about (as I don't want them all on the menu--(especially when it
does all these Probefs?!)).   Does this mechanism already exist?
 8-Oct-85 14:13:13-EDT,4172;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 8 Oct 85 14:13-EDT
Received: from MERLIN by MIT-REAGAN via CHAOS with CHAOS-MAIL id 8816; Tue 8-Oct-85 14:14:22-EDT
Date: Tue, 8 Oct 85 14:14 EDT
From: Randy Parker <PARKER@MIT-REAGAN>
Subject: "End of page" in Zmail
To: BUG-ZMAIL@OZ
Message-ID: <851008141424.9.PARKER@MERLIN>

In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.7,
microcode TMC5-MIC 319, FEP 18, VisiStep, Rodent Free Namespace Editor,
Logical Pathname Completion patch, on PA Lisp Machine Merlin:

I received this message and for the bottom line of the first page, Zmail
puts:

 Fri 8:30 AM   **MORE**

Hitting space (any character??) at this point makes it lose.  Moving the
message to another (new) sequence still results in the lossage, but now
it also includes the To: field twice (in the formatted version, the
grungy version is as original).

(The message was from SU-AI with no subject field, if it helps.
 The moved message is in REAGAN:>parker>zmail-lossage.xmail)

>>Error: End of page.
While in the function (:METHOD ZWEI:ZWEI :BEFORE :END-OF-PAGE-EXCEPTION)  (:METHOD
                                                                            ZWEI:ZWEI-WITH-TYPEOUT
                                                                            :COMBINED
                                                                            :END-OF-PAGE-EXCEPTION)  (:METHOD
                                                                                                       TV:SHEET
                                                                                                       :HANDLE-EXCEPTIONS)

(:METHOD ZWEI:ZWEI :BEFORE :END-OF-PAGE-EXCEPTION):  (P.C. = 27)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI -- 5. IV's, 0. FL's 105064520>
   Arg 2 (OPERATION): :END-OF-PAGE-EXCEPTION

(:METHOD ZWEI:ZWEI-WITH-TYPEOUT :COMBINED :END-OF-PAGE-EXCEPTION):  (P.C. = 11)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI-WITH-TYPEOUT -- 3. IV's, 16. FL's 105064437>
   Arg 2 (.OPERATION.): :END-OF-PAGE-EXCEPTION
   Rest arg (.DAEMON-CALLER-ARGS.): NIL

(:METHOD TV:SHEET :HANDLE-EXCEPTIONS):  (P.C. = 37)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:SHEET -- 0. IV's, 1. FL's 105064432>
   Arg 2 (OPERATION): :HANDLE-EXCEPTIONS

(:METHOD TV:SHEET :TYO):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:SHEET -- 0. IV's, 1. FL's 105064432>
   Arg 2 (OPERATION): :TYO
   Arg 3 (CHAR): 137
   Arg 4 (FONT): #<FONT CPTFONT 120300276>

(:METHOD TV:SHEET :EDITOR-LINE-OUT):  (P.C. = 336)
   Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:SHEET -- 0. IV's, 1. FL's 105064432>
   Arg 2 (OPERATION): :EDITOR-LINE-OUT
   Arg 3 (STRING): "Fri	8:30am 	Coffee"
   Arg 4 (START): 0
   Arg 5 (END): 18
   Arg 6 (SET-XPOS): 0
   Local 6 (SET-XPOS): 3
   Arg 7 (SET-YPOS): 378
   Local 7 (SET-YPOS): 380
   --Defaulted args:--
   Arg 8 (DWIDTH): NIL

ZWEI:REDISPLAY:  (P.C. = 1303)
   Arg 0 (WINDOW): #<WINDOW 120615174>
   --Defaulted args:--
   Arg 1 (RECENTER-TYPE): :POINT
   Arg 2 (RC1): NIL
   Arg 3 (RC2): NIL
   Arg 4 (FORCE-TO-COMPLETION-P): NIL

ZWEI:REDISPLAY-ALL-WINDOWS:  (P.C. = 34)
   --Defaulted args:--
   Arg 0 (FORCE-TO-COMPLETION-P): NIL
   Arg 1 (SELECT-P): T

(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN-WITH-SUMMARY :REDISPLAY):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
   Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN-WITH-SUMMARY -- 1. IV's, 0. FL's 142615051>
   Arg 2 (OPERATION): :REDISPLAY

Rest of stack:
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 120)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
 8-Oct-85 16:44:46-EDT,4709;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 8 Oct 85 16:44-EDT
Received: from SCRC-STONY-BROOK by MIT-REAGAN via INTERNET with SMTP id 8828; 8 Oct 85 16:45:08-EDT
Received: from CROW.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 329111; Tue 8-Oct-85 16:39:18-EDT
Date: Tue, 8 Oct 85 16:37 EDT
From: Robert W. Kerns <RWK@SCRC-YUKON.ARPA>
Subject: "End of page" in Zmail
To: Randy Parker <PARKER@MIT-REAGAN.ARPA>
cc: BUG-ZMAIL@OZ.MIT, bug-zwei@SCRC-YUKON.ARPA
In-Reply-To: <851008141424.9.PARKER@MERLIN>
Supersedes: <851008163714.6.RWK@CROW.SCRC.Symbolics.COM>
Message-ID: <851008163725.7.RWK@CROW.SCRC.Symbolics.COM>

I recognize this.  You typed Function c-M at your Zmail
sometime in the past.  ZWEI panes are not intended to get
**MORE** breaks, and do this when they get them.

BUG-ZWEI:  Can't we make ZWEI panes be immune to Function c-M?

    Date: Tue, 8 Oct 85 14:14 EDT
    From: Randy Parker <PARKER@MIT-REAGAN>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.7,
    microcode TMC5-MIC 319, FEP 18, VisiStep, Rodent Free Namespace Editor,
    Logical Pathname Completion patch, on PA Lisp Machine Merlin:

    I received this message and for the bottom line of the first page, Zmail
    puts:

     Fri 8:30 AM   **MORE**

    Hitting space (any character??) at this point makes it lose.  Moving the
    message to another (new) sequence still results in the lossage, but now
    it also includes the To: field twice (in the formatted version, the
    grungy version is as original).

    (The message was from SU-AI with no subject field, if it helps.
     The moved message is in REAGAN:>parker>zmail-lossage.xmail)

    >>Error: End of page.
    While in the function (:METHOD ZWEI:ZWEI :BEFORE :END-OF-PAGE-EXCEPTION)  (:METHOD
										ZWEI:ZWEI-WITH-TYPEOUT
										:COMBINED
										:END-OF-PAGE-EXCEPTION)  (:METHOD
													   TV:SHEET
													   :HANDLE-EXCEPTIONS)

    (:METHOD ZWEI:ZWEI :BEFORE :END-OF-PAGE-EXCEPTION):  (P.C. = 27)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI -- 5. IV's, 0. FL's 105064520>
       Arg 2 (OPERATION): :END-OF-PAGE-EXCEPTION

    (:METHOD ZWEI:ZWEI-WITH-TYPEOUT :COMBINED :END-OF-PAGE-EXCEPTION):  (P.C. = 11)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI-WITH-TYPEOUT -- 3. IV's, 16. FL's 105064437>
       Arg 2 (.OPERATION.): :END-OF-PAGE-EXCEPTION
       Rest arg (.DAEMON-CALLER-ARGS.): NIL

    (:METHOD TV:SHEET :HANDLE-EXCEPTIONS):  (P.C. = 37)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:SHEET -- 0. IV's, 1. FL's 105064432>
       Arg 2 (OPERATION): :HANDLE-EXCEPTIONS

    (:METHOD TV:SHEET :TYO):  (P.C. = 70)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:SHEET -- 0. IV's, 1. FL's 105064432>
       Arg 2 (OPERATION): :TYO
       Arg 3 (CHAR): 137
       Arg 4 (FONT): #<FONT CPTFONT 120300276>

    (:METHOD TV:SHEET :EDITOR-LINE-OUT):  (P.C. = 336)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor TV:SHEET -- 0. IV's, 1. FL's 105064432>
       Arg 2 (OPERATION): :EDITOR-LINE-OUT
       Arg 3 (STRING): "Fri	8:30am 	Coffee"
       Arg 4 (START): 0
       Arg 5 (END): 18
       Arg 6 (SET-XPOS): 0
       Local 6 (SET-XPOS): 3
       Arg 7 (SET-YPOS): 378
       Local 7 (SET-YPOS): 380
       --Defaulted args:--
       Arg 8 (DWIDTH): NIL

    ZWEI:REDISPLAY:  (P.C. = 1303)
       Arg 0 (WINDOW): #<WINDOW 120615174>
       --Defaulted args:--
       Arg 1 (RECENTER-TYPE): :POINT
       Arg 2 (RC1): NIL
       Arg 3 (RC2): NIL
       Arg 4 (FORCE-TO-COMPLETION-P): NIL

    ZWEI:REDISPLAY-ALL-WINDOWS:  (P.C. = 34)
       --Defaulted args:--
       Arg 0 (FORCE-TO-COMPLETION-P): NIL
       Arg 1 (SELECT-P): T

    (:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN-WITH-SUMMARY :REDISPLAY):  (P.C. = 3)
       Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200617 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN-WITH-SUMMARY -- 1. IV's, 0. FL's 142615051>
       Arg 2 (OPERATION): :REDISPLAY

    Rest of stack:
    (:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 120)
    (:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
    ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
    SI:PROCESS-TOP-LEVEL:  (P.C. = 54)


 8-Oct-85 16:45:03-EDT,2399;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 8 Oct 85 16:44-EDT
Received: from SCRC-STONY-BROOK by MIT-REAGAN via INTERNET with SMTP id 8829; 8 Oct 85 16:45:37-EDT
Received: from THAMES.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 329117; Tue 8-Oct-85 16:41:35-EDT
Date: Tue, 8 Oct 85 16:42 EDT
From: Scott McKay <SWM@SCRC-QUABBIN.ARPA>
Subject: "End of page" in Zmail
To: PARKER@MIT-REAGAN.mit, BUG-ZMAIL@OZ.mit
In-Reply-To: <851008141424.9.PARKER@MERLIN>
Message-ID: <851008164225.6.SWM@THAMES.SCRC.Symbolics.COM>

    Date: Tue, 8 Oct 85 14:14 EDT
    From: Randy Parker <PARKER@MIT-REAGAN>

    In Symbolics 3600 Release 6.0, IP-TCP 29.0, AISite 9.7,
    microcode TMC5-MIC 319, FEP 18, VisiStep, Rodent Free Namespace Editor,
    Logical Pathname Completion patch, on PA Lisp Machine Merlin:

    I received this message and for the bottom line of the first page, Zmail
    puts:

     Fri 8:30 AM   **MORE**

    Hitting space (any character??) at this point makes it lose.  Moving the
    message to another (new) sequence still results in the lossage, but now
    it also includes the To: field twice (in the formatted version, the
    grungy version is as original).

    (The message was from SU-AI with no subject field, if it helps.
     The moved message is in REAGAN:>parker>zmail-lossage.xmail)

You accidently turned on **more** processing in your ZMail message pane.
Turn it off.

    >>Error: End of page.
    While in the function (:METHOD ZWEI:ZWEI :BEFORE :END-OF-PAGE-EXCEPTION)  (:METHOD
										ZWEI:ZWEI-WITH-TYPEOUT
										:COMBINED
										:END-OF-PAGE-EXCEPTION)  (:METHOD
													   TV:SHEET
													   :HANDLE-EXCEPTIONS)

    (:METHOD ZWEI:ZWEI :BEFORE :END-OF-PAGE-EXCEPTION):  (P.C. = 27)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI -- 5. IV's, 0. FL's 105064520>
       Arg 2 (OPERATION): :END-OF-PAGE-EXCEPTION

    (:METHOD ZWEI:ZWEI-WITH-TYPEOUT :COMBINED :END-OF-PAGE-EXCEPTION):  (P.C. = 11)
       Arg 0 (SELF): #<ZMAIL-WINDOW Zmail Window 1 43203115 exposed>
       Arg 1 (SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZWEI-WITH-TYPEOUT -- 3. IV's, 16. FL's 105064437>
       Arg 2 (.OPERATION.): :END-OF-PAGE-EXCEPTION
       Rest arg (.DAEMON-CALLER-ARGS.): NIL


10-Oct-85 08:53:22-EDT,1079;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 10 Oct 85 08:53-EDT
Received: from MERLIN by MIT-REAGAN via CHAOS with CHAOS-MAIL id 9145; Thu 10-Oct-85 08:54:48-EDT
Date: Thu, 10 Oct 85 08:54 EDT
From: Randy Parker <PARKER@MIT-REAGAN>
Subject: "End of page" in Zmail
To: Robert W. Kerns <RWK@SCRC-YUKON>
cc: Randy Parker <PARKER@MIT-REAGAN>, BUG-ZMAIL@OZ, bug-zwei@SCRC-YUKON
In-Reply-To: <851008163725.7.RWK@CROW.SCRC.Symbolics.COM>
Message-ID: <851010085443.2.PARKER@MERLIN>

    Date: Tue, 8 Oct 85 16:37 EDT
    From: Robert W. Kerns <RWK@SCRC-YUKON.ARPA>

    I recognize this.  You typed Function c-M at your Zmail
    sometime in the past.  ZWEI panes are not intended to get
    **MORE** breaks, and do this when they get them.

    BUG-ZWEI:  Can't we make ZWEI panes be immune to Function c-M?

Thanks for the response.  Yes, it turns out that at one place in my
Lispm init (which was still loading into lisp) I was turning on :more-p
in tv:selected-window (shame, shame!!).  And yes, it would be nice
if ZWEI panes ignored MORE-P.

RP
10-Oct-85 17:06:08-EDT,1328;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 10 Oct 85 17:05-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 10 Oct 85 17:07:46 EDT
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 331248; Thu 10-Oct-85 16:57:07-EDT
Date: Thu, 10 Oct 85 16:55 EDT
From: Doug Dodds <DODDS@TENEX.SCRC.Symbolics.COM>
Subject: "End of page" in Zmail
To: PARKER@MIT-REAGAN.ARPA
cc: RWK@SCRC-YUKON.ARPA, BUG-ZMAIL%OZ@MIT-MC.ARPA,
    bug-zwei@SCRC-YUKON.ARPA
In-Reply-To: <851010085443.2.PARKER@MERLIN>
Message-ID: <851010165530.1.DODDS@ANNISQUAM.SCRC.Symbolics.COM>

    Date: Thu, 10 Oct 85 08:54 EDT
    From: Randy Parker <PARKER@MIT-REAGAN>

	Date: Tue, 8 Oct 85 16:37 EDT
	From: Robert W. Kerns <RWK@SCRC-YUKON.ARPA>

	I recognize this.  You typed Function c-M at your Zmail
	sometime in the past.  ZWEI panes are not intended to get
	**MORE** breaks, and do this when they get them.

	BUG-ZWEI:  Can't we make ZWEI panes be immune to Function c-M?

    Thanks for the response.  Yes, it turns out that at one place in my
    Lispm init (which was still loading into lisp) I was turning on :more-p
    in tv:selected-window (shame, shame!!).  And yes, it would be nice
    if ZWEI panes ignored MORE-P.

This has been done in the development system.

15-Oct-85 09:38:45-EDT,1429;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 15 Oct 85 09:38-EDT
Received: from SCRC-STONY-BROOK.ARPA by MIT-MC.ARPA 15 Oct 85 09:39:38 EDT
Received: from PEACE.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 333838; Tue 15-Oct-85 09:36:38-EDT
Date: Tue, 15 Oct 85 09:37 EDT
From: Charles Hornig <Hornig@SCRC-STONY-BROOK.ARPA>
Subject: [SAZ%MIT-OZ@MIT-MC.ARPA: [Mail Delivery Subsystem <MAILER-DAEMON@MIT-HTVAX.ARPA>: Returned mail: Host unknown]]
To: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>
cc: Gavan Duffy <GAVAN%MIT-OZ@MIT-MC.ARPA>, BUG-MARTY%MIT-OZ@MIT-MC.ARPA,
    CJL%MIT-OZ@MIT-MC.ARPA, Hornig@SCRC-STONY-BROOK.ARPA,
    bug-zmail%MIT-OZ@MIT-MC.ARPA,
    Bug-Tracking-Replies@SCRC-STONY-BROOK.ARPA
In-Reply-To: The message of 25 Apr 85 20:24-EST from Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>
Disposition: FLAKE
Category: network
Message-ID: <851015093713.5.HORNIG@PEACE.SCRC.Symbolics.COM>

Synopsis:  I've given up on my LispM domain server.  We'll use BIND from
now on.

  -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --

    Date: Thu, 25 Apr 85 20:24 EST
    From: Gail Zacharias <GZ%MIT-OZ@MIT-MC.ARPA>

    [This message has been edited.  -bug-tracker]

    Btw, (bug-zmail people or whoever), connecting to the domain server at
    stony-brook and sending any CNAME request returns an authoritative name
    error.  That's a bug.


14-Nov-85 03:29:40-EST,569;000000000000
Received: from MIT-APIARY-9 by MIT-OZ via Chaosnet; 14 Nov 85 03:29-EST
Date: Thu, 14 Nov 85 03:28 EST
From: Wayne H. McGuire <MDCG.WAYNE@OZ>
Subject: Undigestification Bug
To: BUG-ZMAIL@OZ
cc: Wayne@OZ
Message-ID: <851114032821.2.MDCG.WAYNE@APIARY-9.AI.MIT.EDU>

In Symbolics 3600 ZMAIL in Release 6.0, IP-TCP 29.0, AISite 10.6,
microcode TMC5-MIC 319, on Lisp Machine Apiary-9:

Zmail hasn't been able to undigestify the last few issues of Arms-d
and IRlist Digest, although I encountered no problems with Zbabyl on
Oz in performing the same operation.
17-Nov-85 13:04:05-EST,4763;000000000000
Received: from MIT-REAGAN.ARPA by MIT-OZ via Chaosnet; 17 Nov 85 13:04-EST
Received: from CROSBY.AI.MIT.EDU by MIT-REAGAN.ARPA via CHAOS with CHAOS-MAIL id 15002; Sun 17-Nov-85 13:04:23-EST
Date: Sun, 17 Nov 85 13:04 EST
From: Randy Parker <PARKER@MIT-REAGAN.ARPA>
Subject: ZWEI:*ZMAIL-SEQUENCE-NAME* is unbound
To: BUG-ZMAIL@OZ.AI.MIT.EDU
Message-ID: <851117130402.1.PARKER@CROSBY.AI.MIT.EDU>

In Symbolics 3640 Release 6.1, IP-TCP 29.13, 6-1-Patches 1.0,
AISite 11.1, microcode TMC5-IO4-ST506-MIC 336,
Rodent Free Namespace Editor, Logical Pathname Completion patch, on Lisp Machine Bing Crosby:

My init file does a zwei:preload-zmail.  After it loaded, I did a
select-M and got this inside Zmail.  It thinks that all of the variables
in the mode line list (arg 3) are unbound.

>>Trap: The instance variable ZWEI:*ZMAIL-SEQUENCE-NAME* is unbound in #<ZMAIL-FRAME Main Zmail Window 43200325 exposed>.
While in the function (:METHOD ZWEI:MODE-LINE-WINDOW-MIXIN :REDISPLAY)  (:METHOD
                                                                          ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE
                                                                          :COMBINED
                                                                          :REDISPLAY)  ZWEI:REDISPLAY-MODE-LINE

(:METHOD ZWEI:MODE-LINE-WINDOW-MIXIN :REDISPLAY):  (P.C. = 114)
   Arg 0 (SELF): #<ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE Zmail Mouse Sensitive Mode Line Pane 2 43205216 exposed>
   Arg 1 (SYS:SELF-MAPPING-TABLE): #<Map to flavor ZWEI:MODE-LINE-WINDOW-MIXIN -- 1. IV's, 0. FL's 121015702>
   Arg 2 (SI:OPERATION): :REDISPLAY
   Arg 3 (ZWEI:MODE-LINE-LIST): ("Zmail " ZWEI:*ZMAIL-SEQUENCE-NAME* ZWEI:*CURRENT-MSG-NAME*
                                 (ZWEI:*CURRENT-MSG-KEYWORDS-STRING* "  "
                                  ZWEI:*CURRENT-MSG-KEYWORDS-STRING*)
                                 (ZWEI:*MACRO-LEVEL* "  Macro-level: " ZWEI:*MACRO-LEVEL*)
                                 (ZWEI:*MSG-MORE-STRING* "  " ZWEI:*MSG-MORE-STRING*))
   --Defaulted args:--
   Arg 4 (ZWEI:FORCE): NIL
   Local 5: (ZWEI:*CURRENT-MSG-NAME*
             (ZWEI:*CURRENT-MSG-KEYWORDS-STRING* "  " ZWEI:*CURRENT-MSG-KEYWORDS-STRING*)
             (ZWEI:*MACRO-LEVEL* "  Macro-level: " ZWEI:*MACRO-LEVEL*)
             (ZWEI:*MSG-MORE-STRING* "  " ZWEI:*MSG-MORE-STRING*))
   Local 6: NIL
   Local 7: NIL
   Local 8: ZWEI:*ZMAIL-SEQUENCE-NAME*
   Local 9: ZWEI:*ZMAIL-SEQUENCE-NAME*
   Local 10 (ZWEI:STR): #<DTP-EVEN-PC 31652117>

(:METHOD ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE :COMBINED :REDISPLAY):  (P.C. = 26)
   Arg 0 (SELF): #<ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE Zmail Mouse Sensitive Mode Line Pane 2 43205216 exposed>
   Arg 1 (SYS:SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-MOUSE-SENSITIVE-MODE-LINE-PANE -- 0. IV's, 19. FL's 121015653>
   Arg 2 (SI:.OPERATION.): :REDISPLAY
   Rest arg (SI:.DAEMON-CALLER-ARGS.): (("Zmail " ZWEI:*ZMAIL-SEQUENCE-NAME*
                                         ZWEI:*CURRENT-MSG-NAME*
                                         (ZWEI:*CURRENT-MSG-KEYWORDS-STRING* "  "
                                          ZWEI:*CURRENT-MSG-KEYWORDS-STRING*)
                                         (ZWEI:*MACRO-LEVEL* "  Macro-level: "
                                          ZWEI:*MACRO-LEVEL*)
                                         (ZWEI:*MSG-MORE-STRING* "  " ZWEI:*MSG-MORE-STRING*)))

ZWEI:REDISPLAY-MODE-LINE:  (P.C. = 36)

ZWEI:REDISPLAY-ALL-WINDOWS:  (P.C. = 41)
   --Defaulted args:--
   Arg 0 (ZWEI:FORCE-TO-COMPLETION-P): NIL
   Arg 1 (ZWEI:SELECT-P): T

(:METHOD ZWEI:ZMAIL-COMMAND-LOOP-MIXIN-WITH-SUMMARY :REDISPLAY):  (P.C. = 3)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200325 exposed>
   Arg 1 (SYS:SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-COMMAND-LOOP-MIXIN-WITH-SUMMARY -- 1. IV's, 0. FL's 120412223>
   Arg 2 (SI:OPERATION): :REDISPLAY

(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 120)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200325 exposed>
   Arg 1 (SYS:SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 66. IV's, 20. FL's 146565661>
   Arg 2 (SI:OPERATION): :COMMAND-LOOP

(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
   Arg 0 (SELF): #<ZMAIL-FRAME Main Zmail Window 43200325 exposed>
   Arg 1 (SYS:SELF-MAPPING-TABLE): #<Map to flavor ZWEI:ZMAIL-FRAME -- 66. IV's, 20. FL's 146565661>
   Arg 2 (SI:.OPERATION.): :COMMAND-LOOP
   Rest arg (SI:.DAEMON-CALLER-ARGS.): NIL

ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
   Arg 0 (ZWEI:WINDOW): #<ZMAIL-FRAME Main Zmail Window 43200325 exposed>

SI:PROCESS-TOP-LEVEL:  (P.C. = 54)
   --Defaulted args:--
   Arg 0 (IGNORE): NIL
25-Nov-85 03:24:19-EST,3328;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 25 Nov 85 03:24-EST
Received: from MIT-REAGAN.ARPA by MIT-MC.ARPA via Chaosnet; 25 NOV 85  03:25:35 EST
Received: from UT-PEARL.ARPA by MIT-REAGAN.ARPA via INTERNET with SMTP id 15709; 25 Nov 85 03:23:12-EST
Date: Mon, 25 Nov 85 02:22 CST
From: Gavan Duffy <AI.DUFFY@[128.83.0.30]>
Subject: Quoting subdirectory delimiter
To: BUG-ZMAIL@MIT-REAGAN.ARPA
Message-ID: <851125022240.3.GAVAN@PEARL>

In Symbolics 3670 Release 6.0, IP-TCP 29.0, AISite 10.6,
Experimental RELATUS 145.34, microcode TMC5-IO4-MIC 319, on Pearl Light:

My babyl file is on a subdirectory on a 20.  It's named AI.DUFFY.BABYL.0.  How
do I quote the first dot so that ZMAIL will recognize that the filename is
AI.DUFFY, not AI?   Circlecross does this.

>>Error: The three characters immediately following a circlecross must be numeric -- .Du
While in the function SI:XR-READ-CIRCLECROSS  SI:XR-XRTYI  (:PROPERTY STRING SI:STANDARD-READ-FUNCTION)

SI:XR-READ-CIRCLECROSS:  (P.C. = 71)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   Local 1 (CH1): 46
   Local 2 (CH2): 68
   Local 3 (CH3): 117

SI:XR-XRTYI:  (P.C. = 76)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   --Defaulted args:--
   Arg 1 (WHITE-OUT?): NIL

(:PROPERTY STRING SI:STANDARD-READ-FUNCTION):  (P.C. = 27)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   Arg 1 (SHOULD-BE-NIL): NIL
   Arg 2 (MATCH): 34

SI:XR-READ-THING:  (P.C. = 60)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>

(:INTERNAL SI:READ-INTERNAL 0):  (P.C. = 15)
   Arg 0 (.LEXICAL-ENVIRONMENT-POINTER.): #<DTP-LOCATIVE 43640571>

SI:WITH-INPUT-EDITING-INTERNAL:  (P.C. = 25)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   Arg 1 (CONTINUATION): #<LEXICAL-CLOSURE (:INTERNAL SI:READ-INTERNAL 0) 43640573>
   Arg 2 (ACTIVATORS): (148)
   Arg 3 (LINE-P): NIL
   Arg 4 (INPUT-EDITOR-OPTIONS): NIL

SI:READ-INTERNAL:  (P.C. = 34)
   Arg 0 (FUNCTION): SI:READ-RECURSIVE
   Rest arg (READ-ARGS): (#<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527> SI:NO-EOF-OPTION)

SI:READ-RECURSIVE:  (P.C. = 5)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>

Remainder of stack:
SI:XR-QUOTE-MACRO:  (P.C. = 5)
(:PROPERTY LIST SI:STANDARD-READ-FUNCTION):  (P.C. = 65)
SI:XR-READ-THING:  (P.C. = 60)
(:INTERNAL SI:READ-INTERNAL 0):  (P.C. = 15)
SI:WITH-INPUT-EDITING-INTERNAL:  (P.C. = 25)
SI:READ-INTERNAL:  (P.C. = 34)
READ:  (P.C. = 6)
SI:READFILE-INTERNAL:  (P.C. = 145)
FS:LOAD-STREAM:  (P.C. = 16)
ZWEI:SET-ZMAIL-USER:  (P.C. = 272)
ZWEI:COM-ZMAIL-PROFILE:  (P.C. = 6)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)

25-Nov-85 10:29:14-EST,3676;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 25 Nov 85 10:29-EST
Received: from MIT-REAGAN.ARPA by MIT-MC.ARPA via Chaosnet; 25 NOV 85  10:26:59 EST
Received: from SCRC-STONY-BROOK.ARPA by MIT-REAGAN.ARPA via INTERNET with SMTP id 15727; 25 Nov 85 10:24:49-EST
Received: from ANNISQUAM.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 361952; Mon 25-Nov-85 10:19:30-EST
Date: Mon, 25 Nov 85 10:20 EST
From: AI.DUFFY@[128.83.0.30]
Subject: Quoting subdirectory delimiter
To: BUG-ZMAIL@MIT-REAGAN.ARPA, bug-Lispm@TENEX.SCRC.Symbolics.COM
Message-ID: <851125102032.8.DODDS@ANNISQUAM.SCRC.Symbolics.COM>
Supersedes: <851125022240.3.GAVAN@PEARL>
Resent-From: DODDS@TENEX.SCRC.Symbolics.COM

[This message has been redirected:
    bug-Lispm has been added.]

In Symbolics 3670 Release 6.0, IP-TCP 29.0, AISite 10.6,
Experimental RELATUS 145.34, microcode TMC5-IO4-MIC 319, on Pearl Light:

My babyl file is on a subdirectory on a 20.  It's named AI.DUFFY.BABYL.0.  How
do I quote the first dot so that ZMAIL will recognize that the filename is
AI.DUFFY, not AI?   Circlecross does this.

>>Error: The three characters immediately following a circlecross must be numeric -- .Du
While in the function SI:XR-READ-CIRCLECROSS  SI:XR-XRTYI  (:PROPERTY STRING SI:STANDARD-READ-FUNCTION)

SI:XR-READ-CIRCLECROSS:  (P.C. = 71)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   Local 1 (CH1): 46
   Local 2 (CH2): 68
   Local 3 (CH3): 117

SI:XR-XRTYI:  (P.C. = 76)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   --Defaulted args:--
   Arg 1 (WHITE-OUT?): NIL

(:PROPERTY STRING SI:STANDARD-READ-FUNCTION):  (P.C. = 27)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   Arg 1 (SHOULD-BE-NIL): NIL
   Arg 2 (MATCH): 34

SI:XR-READ-THING:  (P.C. = 60)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>

(:INTERNAL SI:READ-INTERNAL 0):  (P.C. = 15)
   Arg 0 (.LEXICAL-ENVIRONMENT-POINTER.): #<DTP-LOCATIVE 43640571>

SI:WITH-INPUT-EDITING-INTERNAL:  (P.C. = 25)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>
   Arg 1 (CONTINUATION): #<LEXICAL-CLOSURE (:INTERNAL SI:READ-INTERNAL 0) 43640573>
   Arg 2 (ACTIVATORS): (148)
   Arg 3 (LINE-P): NIL
   Arg 4 (INPUT-EDITOR-OPTIONS): NIL

SI:READ-INTERNAL:  (P.C. = 34)
   Arg 0 (FUNCTION): SI:READ-RECURSIVE
   Rest arg (READ-ARGS): (#<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527> SI:NO-EOF-OPTION)

SI:READ-RECURSIVE:  (P.C. = 5)
   Arg 0 (STREAM): #<NFILE-INPUT-CHARACTER-STREAM "REAGAN:>GAVAN>zmail-init.lisp" 53365527>

Remainder of stack:
SI:XR-QUOTE-MACRO:  (P.C. = 5)
(:PROPERTY LIST SI:STANDARD-READ-FUNCTION):  (P.C. = 65)
SI:XR-READ-THING:  (P.C. = 60)
(:INTERNAL SI:READ-INTERNAL 0):  (P.C. = 15)
SI:WITH-INPUT-EDITING-INTERNAL:  (P.C. = 25)
SI:READ-INTERNAL:  (P.C. = 34)
READ:  (P.C. = 6)
SI:READFILE-INTERNAL:  (P.C. = 145)
FS:LOAD-STREAM:  (P.C. = 16)
ZWEI:SET-ZMAIL-USER:  (P.C. = 272)
ZWEI:COM-ZMAIL-PROFILE:  (P.C. = 6)
ZWEI:COMMAND-EXECUTE:  (P.C. = 57)
ZWEI:ZMAIL-COMMAND-EXECUTE:  (P.C. = 6)
(:INTERNAL ZWEI:ZMAIL-COMMAND-LIST 0 (:MENU)):  (P.C. = 10)
ZWEI:ZMAIL-COMMAND-LIST:  (P.C. = 12)
(:METHOD ZWEI:ZMAIL-FRAME :PROCESS-SPECIAL-COMMAND):  (P.C. = 16)
(:METHOD ZWEI:ZMAIL-FRAME :COMMAND-LOOP):  (P.C. = 136)
(:METHOD ZWEI:ZMAIL-FRAME :COMBINED :COMMAND-LOOP):  (P.C. = 70)
ZWEI:ZMAIL-PROCESS-TOP-LEVEL:  (P.C. = 105)
SI:PROCESS-TOP-LEVEL:  (P.C. = 54)



16-Dec-85 11:41:45-EST,810;000000000000
Received: from MIT-SID by MIT-OZ via Chaosnet; 16 Dec 85 11:41-EST
Date: Mon, 16 Dec 85 11:41 EST
From: David M. J. Saslav <saz@OZ.AI.MIT.EDU>
Subject: gmsgs
To: BUG-ZMAIL@OZ.AI.MIT.EDU
Message-ID: <851216114149.7.SAZ@SID.AI.MIT.EDU>

In Symbolics 3670 Zmail in Release 6.1, IP-TCP 29.13, 6-1-Patches 1.2,
AISite 11.3, microcode TMC5-IO4-MIC 336, FEP 127,
FEP0:>v127-lisp.flod(2), FEP0:>v127-loaders.flod(2),
FEP0:>v127-debug.flod(1), FEP0:>v127-info.flod(2), on Lisp Machine Sid Vicious:

This has never worked, and would be very useful to have in zmail.  Is
there any way to get (zwei:gmsgs) doing the right thing?  The oz gmsgs
command requires a username switch which apparently zmail doesn't
currently provide.  Should be trivial to fix (provided one has access to
the sources...)

saz
16-Dec-85 13:07:45-EST,402;000000000000
Received: from MIT-MC.ARPA by MIT-OZ via Chaosnet; 16 Dec 85 13:07-EST
Date: Mon, 16 Dec 85 13:10:52 EST
From: David Vinayak Wallace <GUMBY@MIT-MC.ARPA>
Subject:  gmsgs
To: saz@MIT-OZ
cc: BUG-ZMAIL@MIT-OZ
In-reply-to: Msg of Mon 16 Dec 85 11:41 EST from David M. J. Saslav <saz at OZ.AI.MIT.EDU>
Message-ID: <[MIT-MC.ARPA].756308.851216.GUMBY>

Set zwei:*gmsgs-other-switches* appropriately.
13-Jan-86 17:20:00-EST,1282;000000000000
Received: from REAGAN.AI.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 13 Jan 86 17:19-EST
Received: from MERLIN.AI.MIT.EDU by MIT-REAGAN.ARPA via CHAOS with CHAOS-MAIL id 19329; Mon 13-Jan-86 17:20:15-EST
Date: Mon, 13 Jan 86 17:20 EST
From: Randy Parker <PARKER@OZ.AI.MIT.EDU>
Subject: Trimming of domain info in Zmail
To: BUG-ZMAIL@OZ.AI.MIT.EDU
Message-ID: <860113172044.9.PARKER@MERLIN.AI.MIT.EDU>
Reply-To: PARKER@MIT-REAGAN.ARPA

In Symbolics 3600 ZMAIL in Release 6.1, IP-TCP 29.13, 6-1-Patches 1.6,
AISite 11.8, microcode TMC5-MIC 336, FEP 127, FEP0:>v127-lisp.flod(2),
FEP0:>v127-loaders.flod(2), FEP0:>v127-debug.flod(1),
FEP0:>v127-info.flod(2), Rodent Free Namespace Editor,
Logical Pathname Completion patch, VisiStep, on PA Lisp Machine Merlin:

Zmail doesn't seem to be able to trim domain info during the
reformatting of headers when the host name is inside <>'s.

For instance, when Zmail reformats headers such as:

To:  Somebody@XX.LCS.MIT.EDU

it produces:

To:  Somebody@XX.LCS        


However, with

To:  John Q Public <Somebody@XX.LCS.MIT.EDU>

it leaves it identical.


<<I guess since domain stuff is such a universal problem
this may be a bit picky.  However, it seems like hosts have been
parsed inside angles before.>>

 2-May-86 00:50:35-EDT,753;000000000000
Received: from REAGAN.AI.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 2 May 86 00:50-EDT
Received: from DESCARTES.AI.MIT.EDU by MIT-REAGAN.ARPA via CHAOS with CHAOS-MAIL id 30717; Fri 2-May-86 00:51:20-EDT
Date: Fri, 2 May 86 00:50 EDT
From: JCMA@MIT-AI.ARPA
Subject: Zmail bug
To: BUG-ZMAIL@MIT-REAGAN.ARPA
Message-ID: <860502005020.4.JCMA@DESCARTES.AI.MIT.EDU>

In Symbolics 3640 Zmail in Release 6.1, IP-TCP 29.13, 6-1-Patches 1.14,
AISite 14.7, Macsyma 318.23, FORTRAN 49.4, PASCAL 31.0,
microcode TMC5-IO4-COL-MIC 353, FEP 127, FEP0:>V127-LISP.FLOD(2),
FEP0:>V127-LOADERS.FLOD(3), FEP0:>V127-INFO.FLOD(2),
FEP0:>V127-DEBUG.FLOD(1), on Lisp Machine Rene Descartes:

I clicked middle on select and then middle on current and got sheet lock.
 5-May-86 03:35:46-EDT,1278;000000000000
Received: from ZERMATT.LCS.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 5 May 86 03:35-EDT
Received: from MIT-LIVE-OAK.ARPA by MIT-ZERMATT.ARPA via CHAOS with CHAOS-MAIL id 35770; Mon 5-May-86 03:34:38-EDT
Received: from JOE-LOUIS.LCS.MIT.EDU by MIT-LIVE-OAK.ARPA via CHAOS with CHAOS-MAIL id 1005; Mon 5-May-86 03:34:08-EDT
Date: Mon, 5 May 86 03:34 EDT
From: James William O'Toole <james@MIT-BORAX.ARPA>
Subject: Unix Mail File FTP operations: response code expected
To: BUG-ZMAIL@MIT-ZERMATT.ARPA
Message-ID: <860505033441.1.JAMES@JOE-LOUIS.LCS.MIT.EDU>

In Symbolics 3600 Zmail in Release 6.1, IP-TCP 29.13, Illustrate 4.6,
microcode TMC5-MIC 336, FEP 17, on Lisp Machine Joe Louis:
Warm booted from: Function Suspend.

I was trying to use ZMail to read my mail from a vax, cls, which
I had filled with a few test messages, just to see if I could do it;
hoping, actually, that I could use a nice windowy mail reader once
again!

It seems to work ok, except that it keeps expecting response codes
of 250 from the FTP server it is talking to, and the server is giving
it 200 instead.  Now, I'm not sure if one particular one is mandated
by the protocol, but I do know that all the 200s are positive acks,
so I'd expect ZMail to accept any of them.

  --Jim
 5-May-86 09:45:52-EDT,1356;000000000000
Received: from ZERMATT.LCS.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 5 May 86 09:45-EDT
Received: from MIT-MC.ARPA by MIT-ZERMATT.ARPA via CHAOS with CHAOS-MAIL id 35771; Mon 5-May-86 04:39:25-EDT
Date: Mon,  5 May 86 04:39:34 EDT
From: David Vinayak Wallace <GUMBY@MC.LCS.MIT.EDU>
Subject:  Unix Mail File FTP operations: response code expected
To: james@BORAX.LCS.MIT.EDU
cc: BUG-ZMAIL@ZERMATT.LCS.MIT.EDU
In-reply-to: Msg of Mon 5 May 86 03:34 EDT from James William O'Toole <james at MIT-BORAX.ARPA>
Message-ID: <[MC.LCS.MIT.EDU].903717.860505.GUMBY>

    Date: Mon, 5 May 86 03:34 EDT
    From: James William O'Toole <james at MIT-BORAX.ARPA>

    I was trying to use ZMail to read my mail from a vax, cls...

    It seems to work ok, except that it keeps expecting response codes
    of 250 from the FTP server it is talking to, and the server is giving
    it 200 instead.  Now, I'm not sure if one particular one is mandated
    by the protocol, but I do know that all the 200s are positive acks,
    so I'd expect ZMail to accept any of them.

RFC 959 claims that 200 means "syntactically correct" while 250 means
"operation completed OK"

This should have gone to bug-lispm, since it's not zmail-specific, but
then again, the problem's most likely at your end since the unix
network software is apparently rife with bugs.
 5-May-86 11:15:39-EDT,803;000000000000
Received: from ZERMATT.LCS.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 5 May 86 11:15-EDT
Received: from SAPSUCKER.SCRC.Symbolics.COM ([192.10.41.223]) by MIT-ZERMATT.ARPA via INTERNET with SMTP id 35785; 5 May 86 11:15:31-EDT
Received: from LARRY-BIRD.SCRC.Symbolics.COM by SAPSUCKER.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 15071; Mon 5-May-86 11:07:16 EDT
Date: Mon, 5 May 86 11:07 EDT
From: Palter@SCRC-YUKON.ARPA
To: BUG-ZMAIL@MIT-ZERMATT.ARPA
Subject: Unix Mail File FTP operations: response code expected
References: <860505033441.1.JAMES@JOE-LOUIS.LCS.MIT.EDU>
Message-ID: <860505110744.2.PALTER@LARRY-BIRD.SCRC.Symbolics.COM>

[The referenced message has been redirected:
  FTP replies codes are handled by IP-TCP.
    Bug-Zmail has been removed;
    Bug-TCP has been added.]

14-May-86 13:30:02-EDT,1484;000000000000
Received: from MC.LCS.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 14 May 86 13:29-EDT
Received: from ZERMATT.LCS.MIT.EDU by MC.LCS.MIT.EDU via Chaosnet; 14 MAY 86  13:26:17 EDT
Received: from HARVEY.LCS.MIT.EDU by MIT-ZERMATT.ARPA via CHAOS with CHAOS-MAIL id 36826; Wed 14-May-86 13:25:33-EDT
Date: Wed, 14 May 86 13:25 EDT
From: Peter Szolovits <psz@MIT-ZERMATT.ARPA>
Subject: Incompatibility between Babyl and Zmail
To: bug-babyl@MIT-MC.ARPA, Bug-Zmail@MIT-MC.ARPA
Message-ID: <860514132533.2.PSZ@HARVEY.LCS.MIT.EDU>

I don't know if this should be a bug report to Babyl or to Zmail, but
here goes.  When Babyl creates a new babyl file with an incoming mail
file associated with it, it chooses the ITS stylistic form:
	DIR; DEV: FOO MAIL
Unfortunately, if I then move this Babyl file to LMFS and then operate
on it, the filename parser appears to be trying to interpret this as
the "DIR; DEV" device, which of course it won't find.  I.e., it seems
that if the Babyl file is not coming off an ITS machine, Zmail doesn't
realize that it should apply ITS file naming conventions to the mail
file name.  Simply choosing the alternative stylistic format:
	DEV: DIR; FOO MAIL
works fine, because then MC: is recognized as the machine, and from
there on the appropriate conventions are applied.

This problem could be fixed either by changing the Babyl preferred way
of listing ITS mail file names or by fixing Zmail so it permits DIR;DEV:
form of file spec as well.
14-May-86 19:09:03-EDT,1920;000000000000
Received: from MC.LCS.MIT.EDU by OZ.AI.MIT.EDU via Chaosnet; 14 May 86 19:09-EDT
Received: from SCRC-STONY-BROOK.ARPA by MC.LCS.MIT.EDU 14 May 86 19:06:55 EDT
Received: from LARRY-BIRD.SCRC.Symbolics.COM by SCRC-STONY-BROOK.ARPA via CHAOS with CHAOS-MAIL id 488049; Wed 14-May-86 19:02:50-EDT
Date: Wed, 14 May 86 19:03 EDT
From: Gary M. Palter <Palter@SCRC-YUKON.ARPA>
Subject: Incompatibility between Babyl and Zmail
To: Peter Szolovits <psz@MIT-ZERMATT.ARPA>
cc: bug-babyl@MIT-MC.ARPA, Bug-Zmail@MIT-MC.ARPA
In-Reply-To: <860514132533.2.PSZ@HARVEY.LCS.MIT.EDU>
Message-ID: <860514190314.4.PALTER@LARRY-BIRD.SCRC.Symbolics.COM>

    Date: Wed, 14 May 86 13:25 EDT
    From: Peter Szolovits <psz@MIT-ZERMATT.ARPA>

    I don't know if this should be a bug report to Babyl or to Zmail, but
    here goes.  When Babyl creates a new babyl file with an incoming mail
    file associated with it, it chooses the ITS stylistic form:
	    DIR; DEV: FOO MAIL
    Unfortunately, if I then move this Babyl file to LMFS and then operate
    on it, the filename parser appears to be trying to interpret this as
    the "DIR; DEV" device, which of course it won't find.  I.e., it seems
    that if the Babyl file is not coming off an ITS machine, Zmail doesn't
    realize that it should apply ITS file naming conventions to the mail
    file name.  Simply choosing the alternative stylistic format:
	    DEV: DIR; FOO MAIL
    works fine, because then MC: is recognized as the machine, and from
    there on the appropriate conventions are applied.

    This problem could be fixed either by changing the Babyl preferred way
    of listing ITS mail file names or by fixing Zmail so it permits DIR;DEV:
    form of file spec as well.

I'd suggest you get Babyl to record DEV:DIR;.  Changing the Lisp machine
pathname parser to hack DIR;DEV: is extremely difficult if not
impossible.

  - Gary

